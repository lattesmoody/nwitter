/*! For license information please see main.0239404d.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},348:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,a=new Promise((function(a,o){n(i=e[t].apply(e,r)).then(a,o)}));return a.request=i,a}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function a(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function o(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function f(e){this._store=e}function h(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new h(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),a=i.request;return a&&(a.onupgradeneeded=function(e){n&&n(new d(a.result,e.oldVersion,a.transaction))}),i.then((function(e){return new p(e)}))}function m(e){return r(indexedDB,"deleteDatabase",[e])}a(c,"_index",["name","keyPath","multiEntry","unique"]),o(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),a(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),f.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},f.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},a(f,"_store",["name","keyPath","indexNames","autoIncrement"]),o(f,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(f,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(f,"_store",IDBObjectStore,["deleteIndex"]),h.prototype.objectStore=function(){return new f(this._tx.objectStore.apply(this._tx,arguments))},a(h,"_tx",["objectStoreNames","mode"]),s(h,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new f(this._db.createObjectStore.apply(this._db,arguments))},a(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new h(this._db.transaction.apply(this._db,arguments))},a(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[f,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,a=i[e].apply(i,n.slice(0,-1));a.onsuccess=function(){r(a.result)}})}))})),[c,f].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,a){for(var o,s,u=i(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var f=0;f<s.length;f++)r.call(o,s[f])&&(u[s[f]]=o[s[f]])}}return u}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,x=60106,I=60107,E=60108,T=60114,S=60109,C=60110,N=60112,A=60113,R=60120,P=60115,O=60116,D=60121,L=60128,M=60129,F=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;_=j("react.element"),x=j("react.portal"),I=j("react.fragment"),E=j("react.strict_mode"),T=j("react.profiler"),S=j("react.provider"),C=j("react.context"),N=j("react.forward_ref"),A=j("react.suspense"),R=j("react.suspense_list"),P=j("react.memo"),O=j("react.lazy"),D=j("react.block"),j("react.scope"),L=j("react.opaque.id"),M=j("react.debug_trace_mode"),F=j("react.offscreen"),U=j("react.legacy_hidden")}var V,q="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}function B(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var W=!1;function K(e,t){if(!e||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function H(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case T:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return G(e.type);case D:return G(e._render);case O:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,Q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Q(n)}}function ce(e,t){var n=Q(t.value),r=Q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe="http://www.w3.org/1999/xhtml",he="http://www.w3.org/2000/svg";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==he||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},be=["Webkit","ms","Moz","O"];function we(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function _e(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=we(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){be.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ee(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Te(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ce=null,Ne=null;function Ae(e){if(e=ri(e)){if("function"!==typeof Se)throw Error(o(280));var t=e.stateNode;t&&(t=ai(t),Se(e.stateNode,e.type,t))}}function Re(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Oe(e,t){return e(t)}function De(e,t,n,r,i){return e(t,n,r,i)}function Le(){}var Me=Oe,Fe=!1,Ue=!1;function je(){null===Ce&&null===Ne||(Le(),Pe())}function Ve(e,t){var n=e.stateNode;if(null===n)return null;var r=ai(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var qe=!1;if(f)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){qe=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(me){qe=!1}function Be(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var We=!1,Ke=null,He=!1,Ge=null,Qe={onError:function(e){We=!0,Ke=e}};function Ye(e,t,n,r,i,a,o,s,u){We=!1,Ke=null,Be.apply(Qe,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Xe(e)!==e)throw Error(o(188))}function Ze(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Je(i),e;if(a===r)return Je(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,it,at=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,ft=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ft.delete(t.pointerId)}}function mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=pt(t,n,r,i,a),null!==t&&(null!==(t=ri(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function yt(e){var t=ni(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void it(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ri(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function kt(e,t,n){gt(e)&&n.delete(t)}function bt(){for(at=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ri(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(kt),ft.forEach(kt)}function wt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,bt)))}function _t(e){function t(t){return wt(t,e)}if(0<ot.length){wt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&wt(st,e),null!==ut&&wt(ut,e),null!==ct&&wt(ct,e),lt.forEach(t),ft.forEach(t),n=0;n<ht.length;n++)(r=ht[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ht.length&&null===(n=ht[0]).blockedOn;)yt(n),null===n.blockedOn&&ht.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var It={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},Et={},Tt={};function St(e){if(Et[e])return Et[e];if(!It[e])return e;var t,n=It[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tt)return Et[e]=n[t];return e}f&&(Tt=document.createElement("div").style,"AnimationEvent"in window||(delete It.animationend.animation,delete It.animationiteration.animation,delete It.animationstart.animation),"TransitionEvent"in window||delete It.transitionend.transition);var Ct=St("animationend"),Nt=St("animationiteration"),At=St("animationstart"),Rt=St("transitionend"),Pt=new Map,Ot=new Map,Dt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Rt,"transitionEnd","waiting","waiting"];function Lt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Ot.set(r,t),Pt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Mt=8;function Ft(e){if(0!==(1&e))return Mt=15,1;if(0!==(2&e))return Mt=14,2;if(0!==(4&e))return Mt=13,4;var t=24&e;return 0!==t?(Mt=12,t):0!==(32&e)?(Mt=11,32):0!==(t=192&e)?(Mt=10,t):0!==(256&e)?(Mt=9,256):0!==(t=3584&e)?(Mt=8,t):0!==(4096&e)?(Mt=7,4096):0!==(t=4186112&e)?(Mt=6,t):0!==(t=62914560&e)?(Mt=5,t):67108864&e?(Mt=4,67108864):0!==(134217728&e)?(Mt=3,134217728):0!==(t=805306368&e)?(Mt=2,t):0!==(1073741824&e)?(Mt=1,1073741824):(Mt=8,e)}function Ut(e,t){var n=e.pendingLanes;if(0===n)return Mt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,i=Mt=15;else if(0!==(a=134217727&n)){var u=a&~o;0!==u?(r=Ft(u),i=Mt):0!==(s&=a)&&(r=Ft(s),i=Mt)}else 0!==(a=n&~o)?(r=Ft(a),i=Mt):0!==s&&(r=Ft(s),i=Mt);if(0===r)return 0;if(r=n&((0>(r=31-Wt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),i<=Mt)return t;Mt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Wt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Vt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=qt(24&~t))?Vt(10,t):e;case 10:return 0===(e=qt(192&~t))?Vt(8,t):e;case 8:return 0===(e=qt(3584&~t))&&(0===(e=qt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=qt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function qt(e){return e&-e}function zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Wt(t)]=n}var Wt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Ht|0)|0},Kt=Math.log,Ht=Math.LN2;var Gt=a.unstable_UserBlockingPriority,Qt=a.unstable_runWithPriority,Yt=!0;function Xt(e,t,n,r){Fe||Le();var i=Jt,a=Fe;Fe=!0;try{De(i,e,t,n,r)}finally{(Fe=a)||je()}}function $t(e,t,n,r){Qt(Gt,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var i;if(Yt)if((i=0===(4&t))&&0<ot.length&&-1<dt.indexOf(e))e=pt(null,e,t,n,r),ot.push(e);else{var a=Zt(e,t,n,r);if(null===a)i&&vt(e,r);else{if(i){if(-1<dt.indexOf(e))return e=pt(a,e,t,n,r),void ot.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return st=mt(st,e,t,n,r,i),!0;case"dragenter":return ut=mt(ut,e,t,n,r,i),!0;case"mouseover":return ct=mt(ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return lt.set(a,mt(lt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,ft.set(a,mt(ft.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;vt(e,r)}Lr(e,t,r,null,n)}}}function Zt(e,t,n,r){var i=Te(r);if(null!==(i=ni(i))){var a=Xe(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=$e(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Lr(e,t,r,i,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,i="value"in en?en.value:en.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return nn=i.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:sn,this.isPropagationStopped=sn,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,fn,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(hn),pn=i({},hn,{view:0,detail:0}),vn=un(pn),mn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fn&&(fn&&"mousemove"===e.type?(cn=e.screenX-fn.screenX,ln=e.screenY-fn.screenY):ln=cn=0,fn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=un(mn),gn=un(i({},mn,{dataTransfer:0})),kn=un(i({},pn,{relatedTarget:0})),bn=un(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),wn=i({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=un(wn),xn=un(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function Cn(){return Sn}var Nn=i({},pn,{key:function(e){if(e.key){var t=In[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=un(Nn),Rn=un(i({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),On=un(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=i({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Dn),Mn=[9,13,27,32],Fn=f&&"CompositionEvent"in window,Un=null;f&&"documentMode"in document&&(Un=document.documentMode);var jn=f&&"TextEvent"in window&&!Un,Vn=f&&(!Fn||Un&&8<Un&&11>=Un),qn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Qn(e,t,n,r){Re(r),0<(t=Fr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function $n(e){Nr(e,0)}function Jn(e){if($(ii(e)))return e}function Zn(e,t){if("change"===e)return t}var er=!1;if(f){var tr;if(f){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ir(){Yn&&(Yn.detachEvent("onpropertychange",ar),Xn=Yn=null)}function ar(e){if("value"===e.propertyName&&Jn(Xn)){var t=[];if(Qn(t,Xn,e,Te(e)),e=$n,Fe)e(t);else{Fe=!0;try{Oe(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ir(),Xn=n,(Yn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&ir()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Xn)}function ur(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fr=Object.prototype.hasOwnProperty;function hr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!fr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function pr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=f&&"documentMode"in document&&11>=document.documentMode,kr=null,br=null,wr=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==kr||kr!==J(r)||("selectionStart"in(r=kr)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},wr&&hr(wr,r)||(wr=r,0<(r=Fr(br,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=kr)))}Lt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Lt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Lt(Dt,2);for(var Ir="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Er=0;Er<Ir.length;Er++)Ot.set(Ir[Er],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tr));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Ye.apply(this,arguments),We){if(!We)throw Error(o(198));var l=Ke;We=!1,Ke=null,He||(He=!0,Ge=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Cr(i,s,c),a=u}}}if(He)throw e=Ge,He=!1,Ge=null,e}function Ar(e,t){var n=oi(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Rr="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Rr]||(e[Rr]=!0,s.forEach((function(t){Sr.has(t)||Or(t,!1,e,null),Or(t,!0,e,null)})))}function Or(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Sr.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=oi(a),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(i|=4),Dr(a,e,i,t),o.add(s))}function Dr(e,t,n,r){var i=Ot.get(t);switch(void 0===i?2:i){case 0:i=Xt;break;case 1:i=$t;break;default:i=Jt}n=i.bind(null,t,n,e),i=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Lr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=ni(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Ue)return e(t,n);Ue=!0;try{Me(e,t,n)}finally{Ue=!1,je()}}((function(){var r=a,i=Te(n),o=[];e:{var s=Pt.get(e);if(void 0!==s){var u=dn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":c="focus",u=kn;break;case"focusout":c="blur",u=kn;break;case"beforeblur":case"afterblur":u=kn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Ct:case Nt:case At:u=bn;break;case Rt:u=On;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Rn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ve(p,h))&&l.push(Mr(p,v,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ei])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(f=Xe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Rn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:ii(u),d=null==c?s:ii(c),(s=new l(v,p+"leave",u,n,i)).target=f,s.relatedTarget=d,v=null,ni(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Ur(d))p++;for(d=0,v=h;v;v=Ur(v))d++;for(;0<p-d;)l=Ur(l),p--;for(;0<d-p;)h=Ur(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Ur(l),h=Ur(h)}l=null}else l=null;null!==u&&jr(o,s,u,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(u=(s=r?ii(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Zn;else if(Gn(s))if(er)m=cr;else{m=sr;var y=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Qn(o,m,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ie(s,"number",s.value)),y=r?ii(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(kr=y,br=r,wr=null);break;case"focusout":wr=br=kr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Fn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Kn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Vn&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Kn&&(g=rn()):(tn="value"in(en=i)?en.value:en.textContent,Kn=!0)),0<(y=Fr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Wn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(zn=!0,qn);case"textInput":return(e=t.data)===qn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Fn&&Bn(e,t)?(e=rn(),nn=tn=en=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Nr(o,t)}))}function Mr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ve(e,n))&&r.unshift(Mr(e,a,i)),null!=(a=Ve(e,t))&&r.push(Mr(e,a,i))),e=e.return}return r}function Ur(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ve(n,a))&&o.unshift(Mr(n,u,s)):i||null!=(u=Ve(n,a))&&o.push(Mr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Vr(){}var qr=null,zr=null;function Br(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Wr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Hr="function"===typeof clearTimeout?clearTimeout:void 0;function Gr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Qr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var $r=Math.random().toString(36).slice(2),Jr="__reactFiber$"+$r,Zr="__reactProps$"+$r,ei="__reactContainer$"+$r,ti="__reactEvents$"+$r;function ni(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ei]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Jr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ri(e){return!(e=e[Jr]||e[ei])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ii(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ai(e){return e[Zr]||null}function oi(e){var t=e[ti];return void 0===t&&(t=e[ti]=new Set),t}var si=[],ui=-1;function ci(e){return{current:e}}function li(e){0>ui||(e.current=si[ui],si[ui]=null,ui--)}function fi(e,t){ui++,si[ui]=e.current,e.current=t}var hi={},di=ci(hi),pi=ci(!1),vi=hi;function mi(e,t){var n=e.type.contextTypes;if(!n)return hi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function yi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function gi(){li(pi),li(di)}function ki(e,t,n){if(di.current!==hi)throw Error(o(168));fi(di,t),fi(pi,n)}function bi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,G(t)||"Unknown",a));return i({},n,r)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||hi,vi=di.current,fi(di,e),fi(pi,pi.current),!0}function _i(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=bi(e,t,vi),r.__reactInternalMemoizedMergedChildContext=e,li(pi),li(di),fi(di,e)):li(pi),fi(pi,n)}var xi=null,Ii=null,Ei=a.unstable_runWithPriority,Ti=a.unstable_scheduleCallback,Si=a.unstable_cancelCallback,Ci=a.unstable_shouldYield,Ni=a.unstable_requestPaint,Ai=a.unstable_now,Ri=a.unstable_getCurrentPriorityLevel,Pi=a.unstable_ImmediatePriority,Oi=a.unstable_UserBlockingPriority,Di=a.unstable_NormalPriority,Li=a.unstable_LowPriority,Mi=a.unstable_IdlePriority,Fi={},Ui=void 0!==Ni?Ni:function(){},ji=null,Vi=null,qi=!1,zi=Ai(),Bi=1e4>zi?Ai:function(){return Ai()-zi};function Wi(){switch(Ri()){case Pi:return 99;case Oi:return 98;case Di:return 97;case Li:return 96;case Mi:return 95;default:throw Error(o(332))}}function Ki(e){switch(e){case 99:return Pi;case 98:return Oi;case 97:return Di;case 96:return Li;case 95:return Mi;default:throw Error(o(332))}}function Hi(e,t){return e=Ki(e),Ei(e,t)}function Gi(e,t,n){return e=Ki(e),Ti(e,t,n)}function Qi(){if(null!==Vi){var e=Vi;Vi=null,Si(e)}Yi()}function Yi(){if(!qi&&null!==ji){qi=!0;var e=0;try{var t=ji;Hi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Ti(Pi,Qi),n}finally{qi=!1}}}var Xi=w.ReactCurrentBatchConfig;function $i(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ji=ci(null),Zi=null,ea=null,ta=null;function na(){ta=ea=Zi=null}function ra(e){var t=Ji.current;li(Ji),e.type._context._currentValue=t}function ia(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function aa(e,t){Zi=e,ta=ea=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oa(e,t){if(ta!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ta=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ea){if(null===Zi)throw Error(o(308));ea=t,Zi.dependencies={lanes:0,firstContext:t,responders:null}}else ea=ea.next=t;return e._currentValue}var sa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ca(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function la(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function ha(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function da(e,t,n,r){var a=e.updateQueue;sa=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,u=a.shared.pending;if(null!==u){a.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==s&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,s=0,f=l=c=null;;){u=o.lane;var d=o.eventTime;if((r&u)===u){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(u=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,u);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,h,u):p)||void 0===u)break e;h=i({},h,u);break e;case 2:sa=!0}}null!==o.callback&&(e.flags|=32,null===(u=a.effects)?a.effects=[o]:u.push(o))}else d={eventTime:d,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,s|=u;if(null===(o=o.next)){if(null===(u=a.shared.pending))break;o=u.next,u.next=null,a.lastBaseUpdate=u,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,qs|=s,e.lanes=s,e.memoizedState=h}}function pa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var va=(new r.Component).refs;function ma(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ya={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hu(),i=du(e),a=la(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),fa(e,a),pu(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hu(),r=du(e),i=la(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),fa(e,i),pu(e,r,n)}};function ga(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!hr(n,r)||!hr(i,a))}function ka(e,t,n){var r=!1,i=hi,a=t.contextType;return"object"===typeof a&&null!==a?a=oa(a):(i=yi(t)?vi:di.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?mi(e,i):hi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ba(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=va,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=oa(a):(a=yi(t)?vi:di.current,i.context=mi(e,a)),da(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ma(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),da(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var _a=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===va&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ia(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ea(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Hu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Gu(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$u(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Qu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Gu(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case x:return(t=$u(t,e.mode,n)).return=e,t}if(_a(t)||z(t))return(t=Qu(t,e.mode,n,null)).return=e,t;Ia(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null}if(_a(n)||z(n))return null!==i?null:f(e,t,n,r,null);Ia(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(_a(r)||z(r))return f(t,e=e.get(n)||null,r,i,null);Ia(t,r)}return null}function v(i,o,s,u){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<s.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,s[v],u);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===s.length)return n(i,f),c;if(null===f){for(;v<s.length;v++)null!==(f=h(i,s[v],u))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<s.length;v++)null!==(m=p(f,i,v,s[v],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,s,u,c){var l=z(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),s=a(k,s,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=h(i,g.value,c))&&(s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=u.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,u){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case _:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Qu(a.props.children,e.mode,u,a.key)).return=e,e=r):((u=Gu(a.type,a.key,a.props,null,e.mode,u)).ref=xa(e,r,a),u.return=e,e=u)}return s(e);case x:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$u(a,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Xu(a,e.mode,u)).return=e,e=r),s(e);if(_a(a))return v(e,r,a,u);if(z(a))return m(e,r,a,u);if(l&&Ia(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,G(e.type)||"Component"))}return n(e,r)}}var Ta=Ea(!0),Sa=Ea(!1),Ca={},Na=ci(Ca),Aa=ci(Ca),Ra=ci(Ca);function Pa(e){if(e===Ca)throw Error(o(174));return e}function Oa(e,t){switch(fi(Ra,t),fi(Aa,e),fi(Na,Ca),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Na),fi(Na,t)}function Da(){li(Na),li(Aa),li(Ra)}function La(e){Pa(Ra.current);var t=Pa(Na.current),n=pe(t,e.type);t!==n&&(fi(Aa,e),fi(Na,n))}function Ma(e){Aa.current===e&&(li(Na),li(Aa))}var Fa=ci(0);function Ua(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Va=null,qa=!1;function za(e,t){var n=Wu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ba(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Wa(e){if(qa){var t=Va;if(t){var n=t;if(!Ba(e,t)){if(!(t=Qr(n.nextSibling))||!Ba(e,t))return e.flags=-1025&e.flags|2,qa=!1,void(ja=e);za(ja,n)}ja=e,Va=Qr(t.firstChild)}else e.flags=-1025&e.flags|2,qa=!1,ja=e}}function Ka(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Ha(e){if(e!==ja)return!1;if(!qa)return Ka(e),qa=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Wr(t,e.memoizedProps))for(t=Va;t;)za(e,t),t=Qr(t.nextSibling);if(Ka(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Va=Qr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Va=null}}else Va=ja?Qr(e.stateNode.nextSibling):null;return!0}function Ga(){Va=ja=null,qa=!1}var Qa=[];function Ya(){for(var e=0;e<Qa.length;e++)Qa[e]._workInProgressVersionPrimary=null;Qa.length=0}var Xa=w.ReactCurrentDispatcher,$a=w.ReactCurrentBatchConfig,Ja=0,Za=null,eo=null,to=null,no=!1,ro=!1;function io(){throw Error(o(321))}function ao(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,i,a){if(Ja=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xa.current=null===e||null===e.memoizedState?Oo:Do,e=n(r,i),ro){a=0;do{if(ro=!1,!(25>a))throw Error(o(301));a+=1,to=eo=null,t.updateQueue=null,Xa.current=Lo,e=n(r,i)}while(ro)}if(Xa.current=Po,t=null!==eo&&null!==eo.next,Ja=0,to=eo=Za=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?Za.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?Za.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?Za.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=a=null,c=i;do{var l=c.lane;if((Ja&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=f,a=r):u=u.next=f,Za.lanes|=l,qs|=l}c=c.next}while(null!==c&&c!==i);null===u?a=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);lr(a,t.memoizedState)||(Fo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ho(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(Ja&e)===e)&&(t._workInProgressVersionPrimary=r,Qa.push(t))),e)return n(t._source);throw Qa.push(t),Error(o(350))}function po(e,t,n,r){var i=Os;if(null===i)throw Error(o(349));var a=t._getVersion,s=a(t._source),u=Xa.current,c=u.useState((function(){return ho(i,t,n)})),l=c[1],f=c[0];c=to;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Za;return e.memoizedState={refs:d,source:t,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!lr(s,e)){e=n(t._source),lr(f,e)||(l(e),e=du(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var u=31-Wt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=du(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),lr(p,n)&&lr(v,t)&&lr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:f}).dispatch=l=Ro.bind(null,Za,e),c.queue=e,c.baseQueue=null,f=ho(i,t,n),c.memoizedState=c.baseState=f),f}function vo(e,t,n){return po(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Ro.bind(null,Za,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function ko(){return uo().memoizedState}function bo(e,t,n,r){var i=so();Za.flags|=e,i.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function wo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==eo){var o=eo.memoizedState;if(a=o.destroy,null!==r&&ao(r,o.deps))return void yo(t,n,a,r)}Za.flags|=e,i.memoizedState=yo(1|t,n,a,r)}function _o(e,t){return bo(516,4,e,t)}function xo(e,t){return wo(516,4,e,t)}function Io(e,t){return wo(4,2,e,t)}function Eo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,wo(4,2,Eo.bind(null,t,e),n)}function So(){}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ao(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Wi();Hi(98>n?98:n,(function(){e(!0)})),Hi(97<n?97:n,(function(){var n=$a.transition;$a.transition=1;try{e(!1),t()}finally{$a.transition=n}}))}function Ro(e,t,n){var r=hu(),i=du(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Za||null!==o&&o===Za)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(a.eagerReducer=o,a.eagerState=u,lr(u,s))return}catch(c){}pu(e,i,r)}}var Po={readContext:oa,useCallback:io,useContext:io,useEffect:io,useImperativeHandle:io,useLayoutEffect:io,useMemo:io,useReducer:io,useRef:io,useState:io,useDebugValue:io,useDeferredValue:io,useTransition:io,useMutableSource:io,useOpaqueIdentifier:io,unstable_isNewReconciler:!1},Oo={readContext:oa,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oa,useEffect:_o,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Eo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Ro.bind(null,Za,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:So,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return _o((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},po(r,e,t,n)},useOpaqueIdentifier:function(){if(qa){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,yo(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:lo,useRef:ko,useState:function(){return lo(co)},useDebugValue:So,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return xo((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Lo={readContext:oa,useCallback:Co,useContext:oa,useEffect:xo,useImperativeHandle:To,useLayoutEffect:Io,useMemo:No,useReducer:fo,useRef:ko,useState:function(){return fo(co)},useDebugValue:So,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return xo((function(){var t=$a.transition;$a.transition=1;try{r(e)}finally{$a.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[ko().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Mo=w.ReactCurrentOwner,Fo=!1;function Uo(e,t,n,r){t.child=null===e?Sa(t,null,n,r):Ta(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return aa(t,i),r=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Vo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Ku(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Gu(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,qo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:hr)(i,r)&&e.ref===t.ref)?as(e,t,a):(t.flags|=1,(e=Hu(o,r)).ref=t.ref,e.return=t,t.child=e)}function qo(e,t,n,r,i,a){if(null!==e&&hr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(a&i))return t.lanes=e.lanes,as(e,t,a);0!==(16384&e.flags)&&(Fo=!0)}return Wo(e,t,n,r,a)}function zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},_u(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},_u(t,e),null;t.memoizedState={baseLanes:0},_u(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,_u(t,r);return Uo(e,t,i,n),t.child}function Bo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Wo(e,t,n,r,i){var a=yi(n)?vi:di.current;return a=mi(t,a),aa(t,i),n=oo(e,t,n,r,a,i),null===e||Fo?(t.flags|=1,Uo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,as(e,t,i))}function Ko(e,t,n,r,i){if(yi(n)){var a=!0;wi(t)}else a=!1;if(aa(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ka(t,n,r),wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oa(c):c=mi(t,c=yi(n)?vi:di.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&ba(t,o,r,c),sa=!1;var h=t.memoizedState;o.state=h,da(t,r,o,i),u=t.memoizedState,s!==r||h!==u||pi.current||sa?("function"===typeof l&&(ma(t,n,l,r),u=t.memoizedState),(s=sa||ga(t,n,s,r,h,u,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ca(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:$i(t.type,s),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oa(u):u=mi(t,u=yi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==f||h!==u)&&ba(t,o,r,u),sa=!1,h=t.memoizedState,o.state=h,da(t,r,o,i);var p=t.memoizedState;s!==f||h!==p||pi.current||sa?("function"===typeof d&&(ma(t,n,d,r),p=t.memoizedState),(c=sa||ga(t,n,c,r,h,p,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Ho(e,t,n,r,a,i)}function Ho(e,t,n,r,i,a){Bo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&_i(t,n,!1),as(e,t,a);r=t.stateNode,Mo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ta(t,e.child,null,a),t.child=Ta(t,null,s,a)):Uo(e,t,s,a),t.memoizedState=r.state,i&&_i(t,n,!0),t.child}function Go(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),Oa(e,t.containerInfo)}var Qo,Yo,Xo,$o={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,i=t.pendingProps,a=Fa.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),fi(Fa,1&a),null===e?(void 0!==i.fallback&&Wa(t),e=i.children,a=i.fallback,o?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,e):"number"===typeof i.unstable_expectedLoadTime?(e=Zo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=ts(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=$o,i):(n=es(e,t,i.children,n),t.memoizedState=null,n))}function Zo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Yu(t,i,0,null),n=Qu(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function es(e,t,n,r){var i=e.child;return e=i.sibling,n=Hu(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Hu(o,s),null!==e?r=Hu(e,r):(r=Qu(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ia(e.return,t)}function rs(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function is(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Uo(e,t,r.children,n),0!==(2&(r=Fa.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(Fa,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Ua(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rs(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Ua(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rs(t,!0,n,null,a,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function as(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Hu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Hu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return yi(t.type)&&gi(),null;case 3:return Da(),li(pi),li(di),Ya(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ha(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Ma(t);var a=Pa(Ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pa(Na.current),Ha(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[Zr]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Tr.length;e++)Ar(Tr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ue(r,s),Ar("invalid",r)}for(var c in Ie(n,s),e=null,s)s.hasOwnProperty(c)&&(a=s[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):u.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":X(r),re(r,s,!0);break;case"textarea":X(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Vr)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe&&(e=de(n)),e===fe?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[Zr]=r,Qo(e,t),t.stateNode=e,c=Ee(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Tr.length;a++)Ar(Tr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=Z(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ue(e,r),a=se(e,r),Ar("invalid",e);break;default:a=r}Ie(n,a);var l=a;for(s in l)if(l.hasOwnProperty(s)){var f=l[s];"style"===s?_e(e,f):"dangerouslySetInnerHTML"===s?null!=(f=f?f.__html:void 0)&&ye(e,f):"children"===s?"string"===typeof f?("textarea"!==n||""!==f)&&ge(e,f):"number"===typeof f&&ge(e,""+f):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=f&&"onScroll"===s&&Ar("scroll",e):null!=f&&b(e,s,f,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vr)}Br(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pa(Ra.current),Pa(Na.current),Ha(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return li(Fa),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ha(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fa.current)?0===Us&&(Us=3):(0!==Us&&3!==Us||(Us=4),null===Os||0===(134217727&qs)&&0===(134217727&zs)||gu(Os,Ls))),(r||n)&&(t.flags|=4),null);case 4:return Da(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ra(t),null;case 19:if(li(Fa),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Us||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Ua(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return fi(Fa,1&Fa.current|2),t.child}e=e.sibling}null!==r.tail&&Bi()>Hs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Ua(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!qa)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Bi()-r.renderingStartTime>Hs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Bi(),n.sibling=null,t=Fa.current,fi(Fa,s?1&t|2:1&t),n):null;case 23:case 24:return xu(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:yi(e.type)&&gi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Da(),li(pi),li(di),Ya(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Ma(e),null;case 13:return li(Fa),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return li(Fa),null;case 4:return Da(),null;case 10:return ra(e),null;case 23:case 24:return xu(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=H(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Qo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Pa(Na.current);var o,s=null;switch(n){case"input":a=Z(e,a),r=Z(e,r),s=[];break;case"option":a=ae(e,a),r=ae(e,r),s=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":a=se(e,a),r=se(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Vr)}for(f in Ie(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(u.hasOwnProperty(f)?s||(s=[]):(s=s||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(u.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(f,l))}n&&(s=s||[]).push("style",n);var f=s;(t.updateQueue=f)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,t,n){(n=la(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,$s=r),ls(0,t)},n}function ds(e,t,n){(n=la(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return ls(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var ps="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:$i(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Gr(t.stateNode.containerInfo))}throw Error(o(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,e),Mu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:$i(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&pa(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}pa(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Br(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_t(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=we("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ks(e,t){if(Ii&&"function"===typeof Ii.onCommitFiberUnmount)try{Ii.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(t,n);else{r=t;try{i()}catch(a){Vu(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vu(t,a)}break;case 5:vs(t);break;case 4:Es(e,t)}}function bs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ws(e){return 5===e.tag||3===e.tag||4===e.tag}function _s(e){e:{for(var t=e.return;null!==t;){if(ws(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ws(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?xs(e,n,t):Is(e,n,t)}function xs(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Vr));else if(4!==r&&null!==(e=e.child))for(xs(e,t,n),e=e.sibling;null!==e;)xs(e,t,n),e=e.sibling}function Is(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Is(e,t,n),e=e.sibling;null!==e;)Is(e,t,n),e=e.sibling}function Es(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var s=e,u=i,c=u;;)if(ks(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ks(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Zr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ee(e,i),t=Ee(e,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?_e(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):b(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,_t(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ks=Bi(),gs(t.child,!0)),void Ss(t);case 19:return void Ss(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Ss(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ps),t.forEach((function(t){var r=zu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,As=w.ReactCurrentDispatcher,Rs=w.ReactCurrentOwner,Ps=0,Os=null,Ds=null,Ls=0,Ms=0,Fs=ci(0),Us=0,js=null,Vs=0,qs=0,zs=0,Bs=0,Ws=null,Ks=0,Hs=1/0;function Gs(){Hs=Bi()+500}var Qs,Ys=null,Xs=!1,$s=null,Js=null,Zs=!1,eu=null,tu=90,nu=[],ru=[],iu=null,au=0,ou=null,su=-1,uu=0,cu=0,lu=null,fu=!1;function hu(){return 0!==(48&Ps)?Bi():-1!==su?su:su=Bi()}function du(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Wi()?1:2;if(0===uu&&(uu=Vs),0!==Xi.transition){0!==cu&&(cu=null!==Ws?Ws.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Wi(),0!==(4&Ps)&&98===e?e=Vt(12,uu):e=Vt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function pu(e,t,n){if(50<au)throw au=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;Bt(e,t,n),e===Os&&(zs|=t,4===Us&&gu(e,Ls));var r=Wi();1===t?0!==(8&Ps)&&0===(48&Ps)?ku(e):(mu(e,n),0===Ps&&(Gs(),Qi())):(0===(4&Ps)||98!==r&&99!==r||(null===iu?iu=new Set([e]):iu.add(e)),mu(e,n)),Ws=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-Wt(s),c=1<<u,l=a[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Ft(c);var f=Mt;a[u]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Ut(e,e===Os?Ls:0),t=Mt,0===r)null!==n&&(n!==Fi&&Si(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fi&&Si(n)}15===t?(n=ku.bind(null,e),null===ji?(ji=[n],Vi=Ti(Pi,Yi)):ji.push(n),n=Fi):14===t?n=Gi(99,ku.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Gi(n,yu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yu(e){if(su=-1,cu=uu=0,0!==(48&Ps))throw Error(o(327));var t=e.callbackNode;if(Lu()&&e.callbackNode!==t)return null;var n=Ut(e,e===Os?Ls:0);if(0===n)return null;var r=n,i=Ps;Ps|=16;var a=Tu();for(Os===e&&Ls===r||(Gs(),Iu(e,r));;)try{Nu();break}catch(u){Eu(e,u)}if(na(),As.current=a,Ps=i,null!==Ds?r=0:(Os=null,Ls=0,r=Us),0!==(Vs&zs))Iu(e,0);else if(0!==r){if(2===r&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(n=jt(e))&&(r=Su(e,n))),1===r)throw t=js,Iu(e,0),gu(e,n),mu(e,Bi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Pu(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Ks+500-Bi())){if(0!==Ut(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Kr(Pu.bind(null,e),r);break}Pu(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var s=31-Wt(n);a=1<<s,(s=r[s])>i&&(i=s),n&=~a}if(n=i,10<(n=(120>(n=Bi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Kr(Pu.bind(null,e),n);break}Pu(e);break;default:throw Error(o(329))}}return mu(e,Bi()),e.callbackNode===t?yu.bind(null,e):null}function gu(e,t){for(t&=~Bs,t&=~zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wt(t),r=1<<n;e[n]=-1,t&=~r}}function ku(e){if(0!==(48&Ps))throw Error(o(327));if(Lu(),e===Os&&0!==(e.expiredLanes&Ls)){var t=Ls,n=Su(e,t);0!==(Vs&zs)&&(n=Su(e,t=Ut(e,t)))}else n=Su(e,t=Ut(e,0));if(0!==e.tag&&2===n&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Gr(e.containerInfo)),0!==(t=jt(e))&&(n=Su(e,t))),1===n)throw n=js,Iu(e,0),gu(e,t),mu(e,Bi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pu(e),mu(e,Bi()),null}function bu(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Qi())}}function wu(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Qi())}}function _u(e,t){fi(Fs,Ms),Ms|=t,Vs|=t}function xu(){Ms=Fs.current,li(Fs)}function Iu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Hr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&gi();break;case 3:Da(),li(pi),li(di),Ya();break;case 5:Ma(r);break;case 4:Da();break;case 13:case 19:li(Fa);break;case 10:ra(r);break;case 23:case 24:xu()}n=n.return}Os=e,Ds=Hu(e.current,null),Ls=Ms=Vs=t,Us=0,js=null,Bs=zs=qs=0}function Eu(e,t){for(;;){var n=Ds;try{if(na(),Xa.current=Po,no){for(var r=Za.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}no=!1}if(Ja=0,to=eo=Za=null,ro=!1,Rs.current=null,null===n||null===n.return){Us=1,js=t,Ds=null;break}e:{var a=e,o=n.return,s=n,u=t;if(t=Ls,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!==(1&Fa.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=la(-1,1);g.tag=2,fa(s,g)}s.lanes|=1;break e}u=void 0,s=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fs,u=new Set,k.set(c,u)):void 0===(u=k.get(c))&&(u=new Set,k.set(c,u)),!u.has(s)){u.add(s);var b=qu.bind(null,a,c,s);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Us&&(Us=2),u=cs(u,s),h=o;do{switch(h.tag){case 3:a=u,h.flags|=4096,t&=-t,h.lanes|=t,ha(h,hs(0,a,t));break e;case 1:a=u;var w=h.type,_=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Js||!Js.has(_)))){h.flags|=4096,t&=-t,h.lanes|=t,ha(h,ds(h,a,t));break e}}h=h.return}while(null!==h)}Ru(n)}catch(x){t=x,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Tu(){var e=As.current;return As.current=Po,null===e?Po:e}function Su(e,t){var n=Ps;Ps|=16;var r=Tu();for(Os===e&&Ls===t||Iu(e,t);;)try{Cu();break}catch(i){Eu(e,i)}if(na(),Ps=n,As.current=r,null!==Ds)throw Error(o(261));return Os=null,Ls=0,Us}function Cu(){for(;null!==Ds;)Au(Ds)}function Nu(){for(;null!==Ds&&!Ci();)Au(Ds)}function Au(e){var t=Qs(e.alternate,e,Ms);e.memoizedProps=e.pendingProps,null===t?Ru(e):Ds=t,Rs.current=null}function Ru(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ms)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ms)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Us&&(Us=5)}function Pu(e){var t=Wi();return Hi(99,Ou.bind(null,e,t)),null}function Ou(e,t){do{Lu()}while(null!==eu);if(0!==(48&Ps))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<a;){var c=31-Wt(a),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,a&=~l}if(null!==iu&&0===(24&r)&&iu.has(e)&&iu.delete(e),e===Os&&(Ds=Os=null,Ls=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ps,Ps|=32,Rs.current=null,qr=Yt,yr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(T){u=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=s,y=null;t:for(;;){for(var g;m!==u||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===s)break t;if(y===u&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}u=-1===h||-1===d?null:{start:h,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;zr={focusedElem:s,selectionRange:u},Yt=!1,lu=null,fu=!1,Ys=r;do{try{Du()}catch(T){if(null===Ys)throw Error(o(330));Vu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var k=Ys.flags;if(16&k&&ge(Ys.stateNode,""),128&k){var b=Ys.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:_s(Ys),Ys.flags&=-3;break;case 6:_s(Ys),Ys.flags&=-3,Ts(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Ts(Ys.alternate,Ys);break;case 4:Ts(Ys.alternate,Ys);break;case 8:Es(s,u=Ys);var _=u.alternate;bs(u),null!==_&&bs(_)}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));Vu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);if(w=zr,b=mr(),k=w.focusedElem,s=w.selectionRange,b!==k&&k&&k.ownerDocument&&vr(k.ownerDocument.documentElement,k)){null!==s&&yr(k)&&(b=s.start,void 0===(w=s.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),u=k.textContent.length,_=Math.min(s.start,u),s=void 0===s.end?_:Math.min(s.end,u),!w.extend&&_>s&&(u=s,s=_,_=u),u=pr(k,_),a=pr(k,s),u&&a&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),_>s?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Yt=!!qr,zr=qr=null,e.current=n,Ys=r;do{try{for(k=e;null!==Ys;){var x=Ys.flags;if(36&x&&ys(k,Ys.alternate,Ys),128&x){b=void 0;var I=Ys.ref;if(null!==I){var E=Ys.stateNode;Ys.tag,b=E,"function"===typeof I?I(b):I.current=b}}Ys=Ys.nextEffect}}catch(T){if(null===Ys)throw Error(o(330));Vu(Ys,T),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ui(),Ps=i}else e.current=n;if(Zs)Zs=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((x=Ys).sibling=null,x.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===ou?au++:(au=0,ou=e):au=0,n=n.stateNode,Ii&&"function"===typeof Ii.onCommitFiberRoot)try{Ii.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(T){}if(mu(e,Bi()),Xs)throw Xs=!1,e=$s,$s=null,e;return 0!==(8&Ps)||Qi(),null}function Du(){for(;null!==Ys;){var e=Ys.alternate;fu||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(fu=!0):13===Ys.tag&&Cs(e,Ys)&&et(Ys,lu)&&(fu=!0));var t=Ys.flags;0!==(256&t)&&ms(e,Ys),0===(512&t)||Zs||(Zs=!0,Gi(97,(function(){return Lu(),null}))),Ys=Ys.nextEffect}}function Lu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Hi(e,Uu)}return!1}function Mu(e,t){nu.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Fu(e,t){ru.push(t,e),Zs||(Zs=!0,Gi(97,(function(){return Lu(),null})))}function Uu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ps))throw Error(o(331));var t=Ps;Ps|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===a)throw Error(o(330));Vu(a,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ps=t,Qi(),!0}function ju(e,t,n){fa(e,t=hs(0,t=cs(n,t),1)),t=hu(),null!==(e=vu(e,1))&&(Bt(e,1,t),mu(e,t))}function Vu(e,t){if(3===e.tag)ju(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ju(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var i=ds(n,e=cs(t,e),1);if(fa(n,i),i=hu(),null!==(n=vu(n,1)))Bt(n,1,i),mu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function qu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hu(),e.pingedLanes|=e.suspendedLanes&n,Os===e&&(Ls&n)===n&&(4===Us||3===Us&&(62914560&Ls)===Ls&&500>Bi()-Ks?Iu(e,0):Bs|=n),mu(e,t)}function zu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Wi()?1:2:(0===uu&&(uu=Vs),0===(t=qt(62914560&~uu))&&(t=4194304))),n=hu(),null!==(e=vu(e,t))&&(Bt(e,t,n),mu(e,n))}function Bu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Wu(e,t,n,r){return new Bu(e,t,n,r)}function Ku(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Hu(e,t){var n=e.alternate;return null===n?((n=Wu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Gu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Ku(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case I:return Qu(n.children,i,a,t);case M:s=8,i|=16;break;case E:s=8,i|=1;break;case T:return(e=Wu(12,n,t,8|i)).elementType=T,e.type=T,e.lanes=a,e;case A:return(e=Wu(13,n,t,i)).type=A,e.elementType=A,e.lanes=a,e;case R:return(e=Wu(19,n,t,i)).elementType=R,e.lanes=a,e;case F:return Yu(n,i,a,t);case U:return(e=Wu(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case C:s=9;break e;case N:s=11;break e;case P:s=14;break e;case O:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Wu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Qu(e,t,n,r){return(e=Wu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=Wu(23,e,r,t)).elementType=F,e.lanes=n,e}function Xu(e,t,n){return(e=Wu(6,e,null,t)).lanes=n,e}function $u(e,t,n){return(t=Wu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=zt(0),this.expirationTimes=zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zt(0),this.mutableSourceEagerHydrationData=null}function Zu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var i=t.current,a=hu(),s=du(i);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(yi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(yi(c)){n=bi(n,c,u);break e}}n=u}else n=hi;return null===t.context?t.context=n:t.pendingContext=n,(t=la(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),fa(i,t),pu(i,s,a),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=Wu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[ei]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ac(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var s=i;i=function(){var e=tc(o);s.call(e)}}ec(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var u=i;i=function(){var e=tc(o);u.call(e)}}wu((function(){ec(t,o,e,i)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ac(t))throw Error(o(200));return Zu(e,t,null,n)}Qs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||pi.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Go(t),Ga();break;case 5:La(t);break;case 1:yi(t.type)&&wi(t);break;case 4:Oa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;fi(Ji,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(fi(Fa,1&Fa.current),null!==(t=as(e,t,n))?t.sibling:null);fi(Fa,1&Fa.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return is(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(Fa,Fa.current),r)break;return null;case 23:case 24:return t.lanes=0,zo(e,t,n)}return as(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=mi(t,di.current),aa(t,n),i=oo(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,yi(r)){var a=!0;wi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&ma(t,r,s,e),i.updater=ya,t.stateNode=i,i._reactInternals=t,wa(t,r,e,n),t=Ho(null,t,r,!0,a,n)}else t.tag=0,Uo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Ku(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(i),e=$i(i,e),a){case 0:t=Wo(null,t,i,e,n);break e;case 1:t=Ko(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Vo(null,t,i,$i(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Wo(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ko(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 3:if(Go(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ca(e,t),da(t,r,null,n),(r=t.memoizedState.element)===i)Ga(),t=as(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Va=Qr(t.stateNode.containerInfo.firstChild),ja=t,a=qa=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Qa.push(a);for(n=Sa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Uo(e,t,r,n),Ga();t=t.child}return t;case 5:return La(t),null===e&&Wa(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,Wr(r,i)?s=null:null!==a&&Wr(r,a)&&(t.flags|=16),Bo(e,t),Uo(e,t,s,n),t.child;case 6:return null===e&&Wa(t),null;case 13:return Jo(e,t,n);case 4:return Oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ta(t,null,r,n):Uo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:$i(r,i),n);case 7:return Uo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Uo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value;var u=t.type._context;if(fi(Ji,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=lr(u,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!pi.current){t=as(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===u.tag&&((l=la(-1,n&-n)).tag=2,fa(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ia(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Uo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,aa(t,n),r=r(i=oa(i,a.unstable_observedBits)),t.flags|=1,Uo(e,t,r,n),t.child;case 14:return a=$i(i=t.type,t.pendingProps),Vo(e,t,i,a=$i(i.type,a),r,n);case 15:return qo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:$i(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,yi(r)?(e=!0,wi(t)):e=!1,aa(t,n),ka(t,r,i),wa(t,r,i,n),Ho(null,t,r,!0,e,n);case 19:return is(e,t,n);case 23:case 24:return zo(e,t,n)}throw Error(o(156,t.tag))},ic.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ic.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ei]=null}))},tt=function(e){13===e.tag&&(pu(e,4,hu()),rc(e,4))},nt=function(e){13===e.tag&&(pu(e,67108864,hu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=hu(),n=du(e);pu(e,n,t),rc(e,n)}},it=function(e,t){return t()},Se=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ai(r);if(!i)throw Error(o(90));$(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Oe=bu,De=function(e,t,n,r,i){var a=Ps;Ps|=4;try{return Hi(98,e.bind(null,t,n,r,i))}finally{0===(Ps=a)&&(Gs(),Qi())}},Le=function(){0===(49&Ps)&&(function(){if(null!==iu){var e=iu;iu=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,Bi())}))}Qi()}(),Lu())},Me=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&(Gs(),Qi())}};var uc={Events:[ri,ii,ai,Re,Pe,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ze(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fc.isDisabled&&fc.supportsFiber)try{xi=fc.inject(lc),Ii=fc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Ze(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ps;if(0!==(48&n))return e(t);Ps|=1;try{if(e)return Hi(99,e.bind(null,t))}finally{Ps=n,Qi()}},t.hydrate=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ac(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ac(e))throw Error(o(40));return!!e._reactRootContainer&&(wu((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ei]=null}))})),!0)},t.unstable_batchedUpdates=bu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ac(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),s=f("react.context"),u=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,n){var r,a={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!_.hasOwnProperty(r)&&(a[r]=t[r]);var u=arguments.length-2;if(1===u)a.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===a[r]&&(a[r]=u[r]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:b.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var E=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function S(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case a:u=!0}}if(u)return o=o(u=e),e=""===r?"."+T(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),S(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+T(s=e[c],c);u+=S(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=S(s=s.value,t,n,l=r+T(s,c++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return S(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function R(){var e=A.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!_.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(R){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new C(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(R){return{type:"throw",arg:R}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var k={};u(k,a,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(N([])));w&&w!==n&&r.call(w,a)&&(k=w);var _=g.prototype=m.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(i,a,o,s){var u=l(e[i],e,a);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,u(_,"constructor",g),u(g,"constructor",y),y.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},x(I.prototype),u(I.prototype,o,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new I(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},x(_),u(_,s,"Generator"),u(_,a,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(S),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function _(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<E(i,t)))break e;e[r]=t,e[n]=i,n=r}}function x(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>E(o,n))void 0!==u&&0>E(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==u&&0>E(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function E(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var T=[],S=[],C=1,N=null,A=3,R=!1,P=!1,O=!1;function D(e){for(var t=x(S);null!==t;){if(null===t.callback)I(S);else{if(!(t.startTime<=e))break;I(S),t.sortIndex=t.expirationTime,_(T,t)}t=x(S)}}function L(e){if(O=!1,D(e),!P)if(null!==x(T))P=!0,n(M);else{var t=x(S);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,O&&(O=!1,i()),R=!0;var a=A;try{for(D(n),N=x(T);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===x(T)&&I(T),D(n)}else I(T);N=x(T)}if(null!==N)var u=!0;else{var c=x(S);null!==c&&r(L,c.startTime-n),u=!1}return u}finally{N=null,A=a,R=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return x(T)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,_(S,e),null===x(T)&&e===x(S)&&(O?i():O=!0,r(L,o-s))):(e.sortIndex=u,_(T,e),P||R||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Me},SDK_VERSION:function(){return Ut},_DEFAULT_ENTRY_NAME:function(){return Et},_addComponent:function(){return Nt},_addOrOverwriteComponent:function(){return At},_apps:function(){return St},_clearComponents:function(){return Dt},_components:function(){return Ct},_getProvider:function(){return Pt},_registerComponent:function(){return Rt},_removeServiceInstance:function(){return Ot},deleteApp:function(){return zt},getApp:function(){return Vt},getApps:function(){return qt},initializeApp:function(){return jt},onLog:function(){return Kt},registerVersion:function(){return Wt},setLogLevel:function(){return Ht}});var t,r=n(791),i=n(164);function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||o(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var c=function(e){return e};var l="beforeunload",f="popstate";function h(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=y(r.location.hash.substr(1)),t=e.pathname,n=void 0===t?"/":t,a=e.search,o=void 0===a?"":a,s=e.hash,u=void 0===s?"":s,l=i.state||{};return[l.idx,c({pathname:n,search:o,hash:u,state:l.usr||null,key:l.key||"default"})]}var o=null;function s(){if(o)_.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(_.length){if(null!=r){var s=k-r;s&&(o={action:e,location:i,retry:function(){C(-1*s)}},C(s))}}else S(e)}}r.addEventListener(f,s),r.addEventListener("hashchange",(function(){m(a()[1])!==m(b)&&s()}));var h=t.Pop,g=a(),k=g[0],b=g[1],w=p(),_=p();function x(e){return function(){var e=document.querySelector("base"),t="";if(e&&e.getAttribute("href")){var n=r.location.href,i=n.indexOf("#");t=-1===i?n:n.slice(0,i)}return t}()+"#"+("string"===typeof e?e:m(e))}function I(e,t){return void 0===t&&(t=null),c(u({pathname:b.pathname,hash:"",search:""},"string"===typeof e?y(e):e,{state:t,key:v()}))}function E(e,t){return[{usr:e.state,key:e.key,idx:t},x(e)]}function T(e,t,n){return!_.length||(_.call({action:e,location:t,retry:n}),!1)}function S(e){h=e;var t=a();k=t[0],b=t[1],w.call({action:h,location:b})}function C(e){i.go(e)}null==k&&(k=0,i.replaceState(u({},i.state,{idx:k}),""));var N={get action(){return h},get location(){return b},createHref:x,push:function e(n,a){var o=t.Push,s=I(n,a);if(T(o,s,(function(){e(n,a)}))){var u=E(s,k+1),c=u[0],l=u[1];try{i.pushState(c,"",l)}catch(ZI){r.location.assign(l)}S(o)}},replace:function e(n,r){var a=t.Replace,o=I(n,r);if(T(a,o,(function(){e(n,r)}))){var s=E(o,k),u=s[0],c=s[1];i.replaceState(u,"",c),S(a)}},go:C,back:function(){C(-1)},forward:function(){C(1)},listen:function(e){return w.push(e)},block:function(e){var t=_.push(e);return 1===_.length&&r.addEventListener(l,d),function(){t(),_.length||r.removeEventListener(l,d)}}};return N}function d(e){e.preventDefault(),e.returnValue=""}function p(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function v(){return Math.random().toString(36).substr(2,8)}function m(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function y(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(e,t){if(!e)throw new Error(t)}var k=(0,r.createContext)(null);var b=(0,r.createContext)(null);var w=(0,r.createContext)({outlet:null,matches:[]});function _(e){var t=e.to,n=e.replace,i=e.state;S()||g(!1);var a=N();return(0,r.useEffect)((function(){a(t,{replace:n,state:i})})),null}function x(e){g(!1)}function I(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,s=e.location,u=e.navigationType,c=void 0===u?t.Pop:u,l=e.navigator,f=e.static,h=void 0!==f&&f;S()&&g(!1);var d=z(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof s&&(s=y(s));var v=s,m=v.pathname,w=void 0===m?"/":m,_=v.search,x=void 0===_?"":_,I=v.hash,E=void 0===I?"":I,T=v.state,C=void 0===T?null:T,N=v.key,A=void 0===N?"default":N,R=(0,r.useMemo)((function(){var e=V(w,d);return null==e?null:{pathname:e,search:x,hash:E,state:C,key:A}}),[d,w,x,E,C,A]);return null==R?null:(0,r.createElement)(k.Provider,{value:p},(0,r.createElement)(b.Provider,{children:o,value:{location:R,navigationType:c}}))}function E(e){var t=e.children,n=e.location;return function(e,t){S()||g(!1);var n=(0,r.useContext)(w).matches,i=n[n.length-1],a=i?i.params:{},o=(i&&i.pathname,i?i.pathnameBase:"/");i&&i.route;0;var s,u=C();if(t){var c,l="string"===typeof t?y(t):t;"/"===o||(null==(c=l.pathname)?void 0:c.startsWith(o))||g(!1),s=l}else s=u;var f=s.pathname||"/",h="/"===o?f:f.slice(o.length)||"/",d=function(e,t,n){void 0===n&&(n="/");var r=V(("string"===typeof t?y(t):t).pathname||"/",n);if(null==r)return null;var i=P(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=M(i[o],r);return a}(e,{pathname:h});0;return F(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},a,e.params),pathname:q([o,e.pathname]),pathnameBase:"/"===e.pathnameBase?o:q([o,e.pathnameBase])})})),n)}(R(t),n)}function T(e){S()||g(!1);var t=(0,r.useContext)(k),n=t.basename,i=t.navigator,a=A(e),o=a.hash,s=a.pathname,u=a.search,c=s;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?y(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===s?n+(f?"/":""):q([n,s])}return i.createHref({pathname:c,search:u,hash:o})}function S(){return null!=(0,r.useContext)(b)}function C(){return S()||g(!1),(0,r.useContext)(b).location}function N(){S()||g(!1);var e=(0,r.useContext)(k),t=e.basename,n=e.navigator,i=(0,r.useContext)(w).matches,a=C().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),s=(0,r.useRef)(!1);(0,r.useEffect)((function(){s.current=!0}));var u=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),s.current)if("number"!==typeof e){var i=j(e,JSON.parse(o),a);"/"!==t&&(i.pathname=q([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return u}function A(e){var t=(0,r.useContext)(w).matches,n=C().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return j(e,JSON.parse(i),n)}),[e,i,n])}function R(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==x&&g(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=R(e.props.children)),t.push(n)}else t.push.apply(t,R(e.props.children))})),t}function P(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||g(!1),a.relativePath=a.relativePath.slice(r.length));var o=q([r,a.relativePath]),s=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&g(!1),P(e.children,t,s,o)),(null!=e.path||e.index)&&t.push({path:o,score:L(o,e.index),routesMeta:s})})),t}var O=/^:\w+$/,D=function(e){return"*"===e};function L(e,t){var n=e.split("/"),r=n.length;return n.some(D)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!D(e)})).reduce((function(e,t){return e+(O.test(t)?3:""===t?1:10)}),r)}function M(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],u=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=U({path:s.relativePath,caseSensitive:s.caseSensitive,end:u},c);if(!l)return null;Object.assign(r,l.params);var f=s.route;a.push({params:r,pathname:q([i,l.pathname]),pathnameBase:z(q([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=q([i,l.pathnameBase]))}return a}function F(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(w.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(ZI){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function j(e,t,n){var r,i="string"===typeof e?y(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var s=a.split("/");".."===s[0];)s.shift(),o-=1;i.pathname=s.join("/")}r=o>=0?t[o]:"/"}var u=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?y(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,u=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:u,search:B(a),hash:W(s)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!u.pathname.endsWith("/")&&(u.pathname+="/"),u}function V(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var q=function(e){return e.join("/").replace(/\/\/+/g,"/")},z=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},B=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},W=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function K(){return K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var G=["onClick","reloadDocument","replace","state","target","to"];function Q(e){var t=e.basename,n=e.children,i=e.window,a=(0,r.useRef)();null==a.current&&(a.current=h({window:i}));var o=a.current,u=s((0,r.useState)({action:o.action,location:o.location}),2),c=u[0],l=u[1];return(0,r.useLayoutEffect)((function(){return o.listen(l)}),[o]),(0,r.createElement)(I,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o})}var Y=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,s=e.state,u=e.target,c=e.to,l=H(e,G),f=T(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,s=N(),u=C(),c=A(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||m(u)===m(c);s(e,{replace:n,state:o})}}),[u,s,c,a,o,i,e])}(c,{replace:o,state:s,target:u});return(0,r.createElement)("a",K({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:u}))}));function X(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(ZI){return void n(ZI)}s.done?t(u):Promise.resolve(u).then(r,i)}function $(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){X(a,r,i,o,s,"next",e)}function s(e){X(a,r,i,o,s,"throw",e)}o(void 0)}))}}var J=n(757),Z=n.n(J);function ee(e,t){return ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ee(e,t)}function te(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ne(e,t,n){return ne=te()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ee(i,n.prototype),i},ne.apply(null,arguments)}function re(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function se(e,t){if(t&&("object"===ae(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function ue(e){var t=te();return function(){var n,r=ie(e);if(t){var i=ie(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return se(this,n)}}function ce(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return t&&fe(e.prototype,t),n&&fe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e){var t="function"===typeof Map?new Map:void 0;return pe=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ne(e,arguments,ie(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ee(n,e)},pe(e)}var ve=!1,me=!1,ye="${JSCORE_VERSION}",ge=function(e,t){if(!e)throw ke(t)},ke=function(e){return new Error("Firebase Database ("+ye+") INTERNAL ASSERT FAILED: "+e)},be=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},we={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,f=(3&a)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(be(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},_e=function(e){var t=be(e);return we.encodeByteArray(t,!0)},xe=function(e){return _e(e).replace(/\./g,"")},Ie=function(e){try{return we.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ee(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ee(e[n],t[n]));return e}var Te=function(){function e(){var t=this;le(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return he(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Se(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[xe(JSON.stringify({alg:"none",type:"JWT"})),xe(JSON.stringify(a)),""].join(".")}function Ce(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ne(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function Ae(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Re(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Pe(){var e=Ce();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Oe(){return!0===ve||!0===me}function De(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Le(){return"object"===typeof indexedDB}var Me=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(oe(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(oe(a),Fe.prototype.create),a}return he(n)}(pe(Error)),Fe=function(){function e(t,n,r){le(this,e),this.service=t,this.serviceName=n,this.errors=r}return he(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ue(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Me(n,a,t);return o}}]),e}();function Ue(e,t){return e.replace(je,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var je=/\{\$([^}]+)}/g;function Ve(e){return JSON.parse(e)}function qe(e){return JSON.stringify(e)}var ze=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ve(Ie(a[0])||""),n=Ve(Ie(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Be(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function We(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Ke(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function He(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Ge(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Qe(s)&&Qe(u)){if(!Ge(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Qe(e){return null!==e&&"object"===typeof e}function Ye(e){for(var t=[],n=function(){var e=s(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Xe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=s(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function $e(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Je=function(){function e(){le(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return he(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=h^l&(f^h),u=1518500249):(s=l^f^h,u=1859775393):p<60?(s=l&f|h&(l|f),u=2400959708):(s=l^f^h,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Ze(e,t){var n=new et(e,t);return n.subscribe.bind(n)}var et=function(){function e(t,n){var r=this;le(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return he(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=ce(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=tt),void 0===r.error&&(r.error=tt),void 0===r.complete&&(r.complete=tt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function tt(){}function nt(e,t){return"".concat(e," failed: ").concat(t," argument ")}var rt=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function it(e){return e&&e._delegate?e._delegate:e}function at(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ot=function(){function e(t,n,r){le(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return he(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),st="[DEFAULT]",ut=function(){function e(t,n){le(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return he(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Te;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:st})}catch(c){}var t,n=ce(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=$(J.mark((function e(){var t;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(at(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),at(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=ce(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=ce(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Vm){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===st?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Vm){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.component?this.component.multipleInstances?e:st:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ct,lt,ft=function(){function e(t){le(this,e),this.name=t,this.providers=new Map}return he(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ut(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ht=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(lt||(lt={}));var dt={debug:lt.DEBUG,verbose:lt.VERBOSE,info:lt.INFO,warn:lt.WARN,error:lt.ERROR,silent:lt.SILENT},pt=lt.INFO,vt=(de(ct={},lt.DEBUG,"log"),de(ct,lt.VERBOSE,"log"),de(ct,lt.INFO,"info"),de(ct,lt.WARN,"warn"),de(ct,lt.ERROR,"error"),ct),mt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=vt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},yt=function(){function e(t){le(this,e),this.name=t,this._logLevel=pt,this._logHandler=mt,this._userLogHandler=null,ht.push(this)}return he(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in lt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?dt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.DEBUG].concat(t)),this._logHandler.apply(this,[this,lt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,lt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.INFO].concat(t)),this._logHandler.apply(this,[this,lt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.WARN].concat(t)),this._logHandler.apply(this,[this,lt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,lt.ERROR].concat(t)),this._logHandler.apply(this,[this,lt.ERROR].concat(t))}}]),e}();var gt,kt,bt=n(348),wt=function(){function e(t){le(this,e),this.container=t}return he(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var _t="@firebase/app",xt="0.7.18",It=new yt("@firebase/app"),Et="[DEFAULT]",Tt=(de(gt={},_t,"fire-core"),de(gt,"@firebase/app-compat","fire-core-compat"),de(gt,"@firebase/analytics","fire-analytics"),de(gt,"@firebase/analytics-compat","fire-analytics-compat"),de(gt,"@firebase/app-check","fire-app-check"),de(gt,"@firebase/app-check-compat","fire-app-check-compat"),de(gt,"@firebase/auth","fire-auth"),de(gt,"@firebase/auth-compat","fire-auth-compat"),de(gt,"@firebase/database","fire-rtdb"),de(gt,"@firebase/database-compat","fire-rtdb-compat"),de(gt,"@firebase/functions","fire-fn"),de(gt,"@firebase/functions-compat","fire-fn-compat"),de(gt,"@firebase/installations","fire-iid"),de(gt,"@firebase/installations-compat","fire-iid-compat"),de(gt,"@firebase/messaging","fire-fcm"),de(gt,"@firebase/messaging-compat","fire-fcm-compat"),de(gt,"@firebase/performance","fire-perf"),de(gt,"@firebase/performance-compat","fire-perf-compat"),de(gt,"@firebase/remote-config","fire-rc"),de(gt,"@firebase/remote-config-compat","fire-rc-compat"),de(gt,"@firebase/storage","fire-gcs"),de(gt,"@firebase/storage-compat","fire-gcs-compat"),de(gt,"@firebase/firestore","fire-fst"),de(gt,"@firebase/firestore-compat","fire-fst-compat"),de(gt,"fire-js","fire-js"),de(gt,"firebase","fire-js-all"),gt),St=new Map,Ct=new Map;function Nt(e,t){try{e.container.addComponent(t)}catch(n){It.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function At(e,t){e.container.addOrOverwriteComponent(t)}function Rt(e){var t=e.name;if(Ct.has(t))return It.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ct.set(t,e);var n,r=ce(St.values());try{for(r.s();!(n=r.n()).done;){Nt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Pt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Et;Pt(e,t).clearInstance(n)}function Dt(){Ct.clear()}var Lt=(de(kt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),de(kt,"bad-app-name","Illegal App name: '{$appName}"),de(kt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),de(kt,"app-deleted","Firebase App named '{$appName}' already deleted"),de(kt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),de(kt,"invalid-log-argument","First argument to `onLog` must be null or a function."),de(kt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),de(kt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),de(kt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),de(kt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),kt),Mt=new Fe("app","Firebase",Lt),Ft=function(){function e(t,n,r){var i=this;le(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ot("app",(function(){return i}),"PUBLIC"))}return he(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Mt.create("app-deleted",{appName:this._name})}}]),e}(),Ut="9.6.8";function jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Et,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Mt.create("bad-app-name",{appName:String(i)});var a=St.get(i);if(a){if(Ge(e,a.options)&&Ge(r,a.config))return a;throw Mt.create("duplicate-app",{appName:i})}var o,s=new ft(i),u=ce(Ct.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(f){u.e(f)}finally{u.f()}var l=new Ft(e,r,s);return St.set(i,l),l}function Vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=St.get(e);if(!t)throw Mt.create("no-app",{appName:e});return t}function qt(){return Array.from(St.values())}function zt(e){return Bt.apply(this,arguments)}function Bt(){return Bt=$(J.mark((function e(t){var n;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!St.has(n)){e.next=6;break}return St.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Bt.apply(this,arguments)}function Wt(e,t,n){var r,i=null!==(r=Tt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void It.warn(s.join(" "))}Rt(new ot("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Kt(e,t){if(null!==e&&"function"!==typeof e)throw Mt.create("invalid-log-argument");!function(e,t){var n,r=ce(ht);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=dt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:lt[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ht(e){var t;t=e,ht.forEach((function(e){e.setLogLevel(t)}))}var Gt="firebase-heartbeat-store",Qt=null;function Yt(){return Qt||(Qt=(0,bt.openDb)("firebase-heartbeat-database",1,(function(e){if(0===e.oldVersion)e.createObjectStore(Gt)})).catch((function(e){throw Mt.create("storage-open",{originalErrorMessage:e.message})}))),Qt}function Xt(e){return $t.apply(this,arguments)}function $t(){return $t=$(J.mark((function e(t){var n;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Gt).objectStore(Gt).get(nn(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Mt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),$t.apply(this,arguments)}function Jt(e,t){return Zt.apply(this,arguments)}function Zt(){return Zt=$(J.mark((function e(t,n){var r,i,a;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt();case 3:return r=e.sent,i=r.transaction(Gt,"readwrite"),a=i.objectStore(Gt),e.next=8,a.put(n,nn(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Mt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Zt.apply(this,arguments)}function en(e){return tn.apply(this,arguments)}function tn(){return tn=$(J.mark((function e(t){var n,r;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yt();case 3:return n=e.sent,r=n.transaction(Gt,"readwrite"),e.next=7,r.objectStore(Gt).delete(nn(t));case 7:return e.abrupt("return",r.complete);case 10:throw e.prev=10,e.t0=e.catch(0),Mt.create("storage-delete",{originalErrorMessage:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),tn.apply(this,arguments)}function nn(e){return"".concat(e.name,"!").concat(e.options.appId)}var rn=function(){function e(t){var n=this;le(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new cn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return he(e,[{key:"triggerHeartbeat",value:function(){var e=$(J.mark((function e(){var t,n,r;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=an(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(!this._heartbeatsCache.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.push({date:r,userAgent:n});case 12:return this._heartbeatsCache=this._heartbeatsCache.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=$(J.mark((function e(){var t,n,r,i;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache){e.next=5;break}return e.abrupt("return","");case 5:if(t=on(this._heartbeatsCache),n=t.heartbeatsToSend,r=t.unsentEntries,i=_e(JSON.stringify({version:2,heartbeats:n})),!(r.length>0)){e.next=13;break}return this._heartbeatsCache=r,e.next=11,this._storage.overwrite(this._heartbeatsCache);case 11:e.next=15;break;case 13:this._heartbeatsCache=null,this._storage.deleteAll();case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function an(){return(new Date).toISOString().substring(0,10)}function on(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=ce(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.userAgent===e.userAgent}));if(a){if(a.dates.push(e.date),ln(r)>n)return a.dates.pop(),"break"}else if(r.push({userAgent:e.userAgent,dates:[e.date]}),ln(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var sn,un,cn=function(){function e(t){le(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return he(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=$(J.mark((function e(){return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Le()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(ZI){t(ZI)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=$(J.mark((function e(){var t;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",[]);case 7:return e.next=9,Xt(this.app);case 9:return t=e.sent,e.abrupt("return",(null===t||void 0===t?void 0:t.heartbeats)||[]);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=$(J.mark((function e(t){return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",Jt(this.app,{heartbeats:t}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=$(J.mark((function e(t){var n;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return n=e.sent,e.abrupt("return",Jt(this.app,{heartbeats:[].concat(at(n),at(t))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=$(J.mark((function e(t){var n;return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return n=e.sent,e.abrupt("return",Jt(this.app,{heartbeats:n.filter((function(e){return!t.includes(e)}))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAll",value:function(){var e=$(J.mark((function e(){return J.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.abrupt("return",en(this.app));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ln(e){return _e(JSON.stringify({version:2,heartbeats:e})).length}sn="",Rt(new ot("platform-logger",(function(e){return new wt(e)}),"PRIVATE")),Rt(new ot("heartbeat",(function(e){return new rn(e)}),"PRIVATE")),Wt(_t,xt,sn),Wt(_t,xt,"esm2017"),Wt("fire-js","");var fn=function(){function e(t,n){var r=this;le(this,e),this._delegate=t,this.firebase=n,Nt(t,new ot("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return he(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),zt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Nt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){At(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),hn=(de(un={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),de(un,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),un),dn=new Fe("app-compat","Firebase",hn);var pn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=jt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Be(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Wt,setLogLevel:Ht,onLog:Kt,apps:null,SDK_VERSION:Ut,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Rt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw dn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ee(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Be(n,e=e||Et))throw dn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(fn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ee(n,e)},createSubscribe:Ze,ErrorFactory:Fe,deepExtend:Ee}),n}(),vn=new yt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){vn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var mn=self.firebase.SDK_VERSION;mn&&mn.indexOf("LITE")>=0&&vn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var yn=pn;function gn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ie(e)););return e}function kn(){return kn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=gn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},kn.apply(this,arguments)}!function(e){Wt("@firebase/app-compat","0.1.19",e)}();var bn,wn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},_n={},xn=xn||{},In=wn||self;function En(){}function Tn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Sn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Cn="closure_uid_"+(1e9*Math.random()>>>0),Nn=0;function An(e,t,n){return e.call.apply(e.bind,arguments)}function Rn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Pn(e,t,n){return(Pn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?An:Rn).apply(null,arguments)}function On(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Dn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ln(){this.s=this.s,this.o=this.o}var Mn={};Ln.prototype.s=!1,Ln.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Cn)&&e[Cn]||(e[Cn]=++Nn)}(this);delete Mn[e]}},Ln.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Fn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Un=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function jn(e){return Array.prototype.concat.apply([],arguments)}function Vn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function qn(e){return/^[\s\xa0]*$/.test(e)}var zn,Bn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Wn(e,t){return-1!=e.indexOf(t)}function Kn(e,t){return e<t?-1:e>t?1:0}e:{var Hn=In.navigator;if(Hn){var Gn=Hn.userAgent;if(Gn){zn=Gn;break e}}zn=""}function Qn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Yn(e){var t={};for(var n in e)t[n]=e[n];return t}var Xn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $n(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Xn.length;a++)n=Xn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Jn(e){return Jn[" "](e),e}Jn[" "]=En;var Zn,er=Wn(zn,"Opera"),tr=Wn(zn,"Trident")||Wn(zn,"MSIE"),nr=Wn(zn,"Edge"),rr=nr||tr,ir=Wn(zn,"Gecko")&&!(Wn(zn.toLowerCase(),"webkit")&&!Wn(zn,"Edge"))&&!(Wn(zn,"Trident")||Wn(zn,"MSIE"))&&!Wn(zn,"Edge"),ar=Wn(zn.toLowerCase(),"webkit")&&!Wn(zn,"Edge");function or(){var e=In.document;return e?e.documentMode:void 0}e:{var sr="",ur=function(){var e=zn;return ir?/rv:([^\);]+)(\)|;)/.exec(e):nr?/Edge\/([\d\.]+)/.exec(e):tr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ar?/WebKit\/(\S+)/.exec(e):er?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ur&&(sr=ur?ur[1]:""),tr){var cr=or();if(null!=cr&&cr>parseFloat(sr)){Zn=String(cr);break e}}Zn=sr}var lr,fr={};function hr(){return function(e){var t=fr;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Bn(String(Zn)).split("."),n=Bn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Kn(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Kn(0==a[2].length,0==o[2].length)||Kn(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(In.document&&tr){var dr=or();lr=dr||(parseInt(Zn,10)||void 0)}else lr=void 0;var pr=lr,vr=function(){if(!In.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{In.addEventListener("test",En,t),In.removeEventListener("test",En,t)}catch(n){}return e}();function mr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function yr(e,t){if(mr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ir){e:{try{Jn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:gr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&yr.Z.h.call(this)}}mr.prototype.h=function(){this.defaultPrevented=!0},Dn(yr,mr);var gr={2:"touch",3:"pen",4:"mouse"};yr.prototype.h=function(){yr.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var kr="closure_listenable_"+(1e6*Math.random()|0),br=0;function wr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++br,this.ca=this.fa=!1}function _r(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function xr(e){this.src=e,this.g={},this.h=0}function Ir(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Fn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(_r(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Er(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}xr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Er(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new wr(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Tr="closure_lm_"+(1e6*Math.random()|0),Sr={};function Cr(e,t,n,r,i){if(r&&r.once)return Ar(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Cr(e,t[a],n,r,i);return null}return n=Fr(n),e&&e[kr]?e.N(t,n,Sn(r)?!!r.capture:!!r,i):Nr(e,t,n,!1,r,i)}function Nr(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Sn(i)?!!i.capture:!!i,s=Lr(e);if(s||(e[Tr]=s=new xr(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Dr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)vr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Or(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ar(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ar(e,t[a],n,r,i);return null}return n=Fr(n),e&&e[kr]?e.O(t,n,Sn(r)?!!r.capture:!!r,i):Nr(e,t,n,!0,r,i)}function Rr(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Rr(e,t[a],n,r,i);else r=Sn(r)?!!r.capture:!!r,n=Fr(n),e&&e[kr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Er(a=e.g[t],n,r,i))&&(_r(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Lr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Er(t,n,r,i)),(n=-1<e?t[e]:null)&&Pr(n))}function Pr(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[kr])Ir(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Or(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Lr(t))?(Ir(n,e),0==n.h&&(n.src=null,t[Tr]=null)):_r(e)}}}function Or(e){return e in Sr?Sr[e]:Sr[e]="on"+e}function Dr(e,t){if(e.ca)e=!0;else{t=new yr(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Pr(e),e=n.call(r,t)}return e}function Lr(e){return(e=e[Tr])instanceof xr?e:null}var Mr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fr(e){return"function"===typeof e?e:(e[Mr]||(e[Mr]=function(t){return e.handleEvent(t)}),e[Mr])}function Ur(){Ln.call(this),this.i=new xr(this),this.P=this,this.I=null}function jr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new mr(t,e);else if(t instanceof mr)t.target=t.target||e;else{var i=t;$n(t=new mr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Vr(o,r,!0,t)&&i}if(i=Vr(o=t.g=e,r,!0,t)&&i,i=Vr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Vr(o=t.g=n[a],r,!1,t)&&i}function Vr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&Ir(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Dn(Ur,Ln),Ur.prototype[kr]=!0,Ur.prototype.removeEventListener=function(e,t,n,r){Rr(this,e,t,n,r)},Ur.prototype.M=function(){if(Ur.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)_r(n[r]);delete t.g[e],t.h--}}this.I=null},Ur.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ur.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var qr=In.JSON.stringify;function zr(){var e=Xr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Br,Wr=function(){function e(){le(this,e),this.h=this.g=null}return he(e,[{key:"add",value:function(e,t){var n=Kr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Kr=new(function(){function e(t,n){le(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return he(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Hr}),(function(e){return e.reset()})),Hr=function(){function e(){le(this,e),this.next=this.g=this.h=null}return he(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Gr(e){In.setTimeout((function(){throw e}),0)}function Qr(e,t){Br||function(){var e=In.Promise.resolve(void 0);Br=function(){e.then($r)}}(),Yr||(Br(),Yr=!0),Xr.add(e,t)}var Yr=!1,Xr=new Wr;function $r(){for(var e;e=zr();){try{e.h.call(e.g)}catch(n){Gr(n)}var t=Kr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Yr=!1}function Jr(e,t){Ur.call(this),this.h=e||1,this.g=t||In,this.j=Pn(this.kb,this),this.l=Date.now()}function Zr(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function ei(e,t,n){if("function"===typeof e)n&&(e=Pn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Pn(e.handleEvent,e)}return 2147483647<Number(t)?-1:In.setTimeout(e,t||0)}function ti(e){e.g=ei((function(){e.g=null,e.i&&(e.i=!1,ti(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Dn(Jr,Ur),(bn=Jr.prototype).da=!1,bn.S=null,bn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),jr(this,"tick"),this.da&&(Zr(this),this.start()))}},bn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},bn.M=function(){Jr.Z.M.call(this),Zr(this),delete this.g};var ni=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return he(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ti(this)}},{key:"M",value:function(){kn(ie(n.prototype),"M",this).call(this),this.g&&(In.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ln);function ri(e){Ln.call(this),this.h=e,this.g={}}Dn(ri,Ln);var ii=[];function ai(e,t,n,r){Array.isArray(n)||(n&&(ii[0]=n.toString()),n=ii);for(var i=0;i<n.length;i++){var a=Cr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function oi(e){Qn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Pr(e)}),e),e.g={}}function si(){this.g=!0}function ui(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return qr(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}ri.prototype.M=function(){ri.Z.M.call(this),oi(this)},ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},si.prototype.Aa=function(){this.g=!1},si.prototype.info=function(){};var ci={},li=null;function fi(){return li=li||new Ur}function hi(e){mr.call(this,ci.Ma,e)}function di(e){var t=fi();jr(t,new hi(t,e))}function pi(e,t){mr.call(this,ci.STAT_EVENT,e),this.stat=t}function vi(e){var t=fi();jr(t,new pi(t,e))}function mi(e,t){mr.call(this,ci.Na,e),this.size=t}function yi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return In.setTimeout((function(){e()}),t)}ci.Ma="serverreachability",Dn(hi,mr),ci.STAT_EVENT="statevent",Dn(pi,mr),ci.Na="timingevent",Dn(mi,mr);var gi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ki={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function bi(){}function wi(e){return e.h||(e.h=e.i())}function _i(){}bi.prototype.h=null;var xi,Ii={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ei(){mr.call(this,"d")}function Ti(){mr.call(this,"c")}function Si(){}function Ci(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new ri(this),this.P=Ai,e=rr?125:void 0,this.W=new Jr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ni}function Ni(){this.i=null,this.g="",this.h=!1}Dn(Ei,mr),Dn(Ti,mr),Dn(Si,bi),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},xi=new Si;var Ai=45e3,Ri={},Pi={};function Oi(e,t,n){e.K=1,e.v=na(Xi(t)),e.s=n,e.U=!0,Di(e,null)}function Di(e,t){e.F=Date.now(),Ui(e),e.A=Xi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),va(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ni,e.g=go(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ni(Pn(e.Ia,e,e.g),e.O)),ai(e.V,e.g,"readystatechange",e.gb),t=e.H?Yn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),di(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Li(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Mi(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Fi(e,n))==Pi){4==t&&(e.o=4,vi(14),i=!1),ui(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ri){e.o=4,vi(15),ui(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ui(e.j,e.m,r,null),Bi(e,r)}Li(e)&&r!=Pi&&r!=Ri&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,vi(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),co(t),t.L=!0,vi(11))):(ui(e.j,e.m,n,"[Invalid Chunked Response]"),zi(e),qi(e))}function Fi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Pi:(n=Number(t.substring(n,r)),isNaN(n)?Ri:(r+=1)+n>t.length?Pi:(t=t.substr(r,n),e.C=r+n,t))}function Ui(e){e.Y=Date.now()+e.P,ji(e,e.P)}function ji(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=yi(Pn(e.eb,e),t)}function Vi(e){e.B&&(In.clearTimeout(e.B),e.B=null)}function qi(e){0==e.l.G||e.I||ho(e.l,e)}function zi(e){Vi(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Zr(e.W),oi(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Bi(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||xa(n.i,e)))if(n.I=e.N,!e.J&&xa(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;fo(n),eo(n)}uo(n),vi(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=yi(Pn(n.ab,n),6e3));if(1>=_a(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else vo(n,11)}else if((e.J||n.g==e)&&fo(n),!qn(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Wn(l,"spdy")||Wn(l,"quic")||Wn(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Ia(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,ta(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=yo(r,r.H?r.la:null,r.W),d.J){Ea(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Vi(p),Ui(p)),r.g=d}else so(r);0<n.l.length&&ro(n)}else"stop"!=a[0]&&"close"!=a[0]||vo(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?vo(n,7):Za(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}di(4)}catch(a){}}function Wi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Tn(e)||"string"===typeof e)Un(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Tn(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Tn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Ki(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Ki)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Hi(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Gi(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Gi(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Gi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(bn=Ci.prototype).setTimeout=function(e){this.P=e},bn.gb=function(e){e=e.target;var t=this.L;t&&3==Qa(e)?t.l():this.Ia(e)},bn.Ia=function(e){try{if(e==this.g)e:{var t=Qa(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||rr||this.g&&(this.h.h||this.g.ga()||Ya(this.g)))){this.I||4!=t||7==n||di(8==n||0>=r?3:2),Vi(this);var i=this.g.ba();this.N=i;t:if(Li(this)){var a=Ya(this.g);e="";var o=a.length,s=4==Qa(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){zi(this),qi(this);var u="";break t}this.h.i=new In.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qn(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,vi(12),zi(this),qi(this);break e}ui(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bi(this,i)}this.U?(Mi(this,t,u),rr&&this.i&&3==t&&(ai(this.V,this.W,"tick",this.fb),this.W.start())):(ui(this.j,this.m,u,null),Bi(this,u)),4==t&&zi(this),this.i&&!this.I&&(4==t?ho(this.l,this):(this.i=!1,Ui(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,vi(12)):(this.o=0,vi(13)),zi(this),qi(this)}}}catch(t){}},bn.fb=function(){if(this.g){var e=Qa(this.g),t=this.g.ga();this.C<t.length&&(Vi(this),Mi(this,e,t),this.i&&4!=e&&Ui(this))}},bn.cancel=function(){this.I=!0,zi(this)},bn.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(di(3),vi(17)),zi(this),this.o=2,qi(this)):ji(this,this.Y-e)},(bn=Ki.prototype).R=function(){Hi(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},bn.T=function(){return Hi(this),this.g.concat()},bn.get=function(e,t){return Gi(this.h,e)?this.h[e]:t},bn.set=function(e,t){Gi(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},bn.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Qi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Yi(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Yi){this.g=void 0!==t?t:e.g,$i(this,e.j),this.s=e.s,Ji(this,e.i),Zi(this,e.m),this.l=e.l,t=e.h;var n=new fa;n.i=t.i,t.g&&(n.g=new Ki(t.g),n.h=t.h),ea(this,n),this.o=e.o}else e&&(n=String(e).match(Qi))?(this.g=!!t,$i(this,n[1]||"",!0),this.s=ra(n[2]||""),Ji(this,n[3]||"",!0),Zi(this,n[4]),this.l=ra(n[5]||"",!0),ea(this,n[6]||"",!0),this.o=ra(n[7]||"")):(this.g=!!t,this.h=new fa(null,this.g))}function Xi(e){return new Yi(e)}function $i(e,t,n){e.j=n?ra(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ji(e,t,n){e.i=n?ra(t,!0):t}function Zi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ea(e,t,n){t instanceof fa?(e.h=t,function(e,t){t&&!e.j&&(ha(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(da(this,t),va(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ia(t,ca)),e.h=new fa(t,e.g))}function ta(e,t,n){e.h.set(t,n)}function na(e){return ta(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ra(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ia(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,aa),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function aa(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Yi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ia(t,oa,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ia(t,oa,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ia(n,"/"==n.charAt(0)?ua:sa,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ia(n,la)),e.join("")};var oa=/[#\/\?@]/g,sa=/[#\?:]/g,ua=/[#\?]/g,ca=/[#\?@]/g,la=/#/g;function fa(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ha(e){e.g||(e.g=new Ki,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function da(e,t){ha(e),t=ma(e,t),Gi(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Gi((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Hi(e)))}function pa(e,t){return ha(e),t=ma(e,t),Gi(e.g.h,t)}function va(e,t,n){da(e,t),0<n.length&&(e.i=null,e.g.set(ma(e,t),Vn(n)),e.h+=n.length)}function ma(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(bn=fa.prototype).add=function(e,t){ha(this),this.i=null,e=ma(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},bn.forEach=function(e,t){ha(this),this.g.forEach((function(n,r){Un(n,(function(n){e.call(t,n,r,this)}),this)}),this)},bn.T=function(){ha(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},bn.R=function(e){ha(this);var t=[];if("string"===typeof e)pa(this,e)&&(t=jn(t,this.g.get(ma(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=jn(t,e[n])}return t},bn.set=function(e,t){return ha(this),this.i=null,pa(this,e=ma(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},bn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},bn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var ya=he((function e(t,n){le(this,e),this.h=t,this.g=n}));function ga(e){this.l=e||ba,In.PerformanceNavigationTiming?e=0<(e=In.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(In.g&&In.g.Ea&&In.g.Ea()&&In.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ka,ba=10;function wa(e){return!!e.h||!!e.g&&e.g.size>=e.j}function _a(e){return e.h?1:e.g?e.g.size:0}function xa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ia(e,t){e.g?e.g.add(t):e.h=t}function Ea(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ta(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=ce(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Vn(e.i)}function Sa(){}function Ca(){this.g=new Sa}function Na(e,t,n){var r=n||"";try{Wi(e,(function(e,n){var i=e;Sn(e)&&(i=qr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Aa(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ra(e){this.l=e.$b||null,this.j=e.ib||!1}function Pa(e,t){Ur.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Oa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ga.prototype.cancel=function(){if(this.i=Ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=ce(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Sa.prototype.stringify=function(e){return In.JSON.stringify(e,void 0)},Sa.prototype.parse=function(e){return In.JSON.parse(e,void 0)},Dn(Ra,bi),Ra.prototype.g=function(){return new Pa(this.l,this.j)},Ra.prototype.i=(ka={},function(){return ka}),Dn(Pa,Ur);var Oa=0;function Da(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function La(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ma(e)}function Ma(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(bn=Pa.prototype).open=function(e,t){if(this.readyState!=Oa)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ma(this)},bn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||In).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},bn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,La(this)),this.readyState=Oa},bn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ma(this)),this.g&&(this.readyState=3,Ma(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof In.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Da(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},bn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?La(this):Ma(this),3==this.readyState&&Da(this)}},bn.Ua=function(e){this.g&&(this.response=this.responseText=e,La(this))},bn.Ta=function(e){this.g&&(this.response=e,La(this))},bn.ha=function(){this.g&&La(this)},bn.setRequestHeader=function(e,t){this.v.append(e,t)},bn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},bn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Pa.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Fa=In.JSON.parse;function Ua(e){Ur.call(this),this.headers=new Ki,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ja,this.K=this.L=!1}Dn(Ua,Ur);var ja="",Va=/^https?$/i,qa=["POST","PUT"];function za(e){return"content-type"==e.toLowerCase()}function Ba(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Wa(e),Ha(e)}function Wa(e){e.D||(e.D=!0,jr(e,"complete"),jr(e,"error"))}function Ka(e){if(e.h&&"undefined"!=typeof xn&&(!e.C[1]||4!=Qa(e)||2!=e.ba()))if(e.v&&4==Qa(e))ei(e.Fa,0,e);else if(jr(e,"readystatechange"),4==Qa(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Qi)[1]||null;if(!a&&In.self&&In.self.location){var o=In.self.location.protocol;a=o.substr(0,o.length-1)}i=!Va.test(a?a.toLowerCase():"")}t=i}if(t)jr(e,"complete"),jr(e,"success");else{e.m=6;try{var s=2<Qa(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Wa(e)}}finally{Ha(e)}}}function Ha(e,t){if(e.g){Ga(e);var n=e.g,r=e.C[0]?En:null;e.g=null,e.C=null,t||jr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Ga(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(In.clearTimeout(e.A),e.A=null)}function Qa(e){return e.g?e.g.readyState:0}function Ya(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ja:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Xa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Qn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ta(e,t,n))}function $a(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ja(e){this.za=0,this.l=[],this.h=new si,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$a("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$a("baseRetryDelayMs",5e3,e),this.$a=$a("retryDelaySeedMs",1e4,e),this.Ya=$a("forwardChannelMaxRetries",2,e),this.ra=$a("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ga(e&&e.concurrentRequestLimit),this.Ca=new Ca,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Za(e){if(to(e),3==e.G){var t=e.V++,n=Xi(e.F);ta(n,"SID",e.J),ta(n,"RID",t),ta(n,"TYPE","terminate"),ao(e,n),(t=new Ci(e,e.h,t,void 0)).K=2,t.v=na(Xi(n)),n=!1,In.navigator&&In.navigator.sendBeacon&&(n=In.navigator.sendBeacon(t.v.toString(),"")),!n&&In.Image&&((new Image).src=t.v,n=!0),n||(t.g=go(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ui(t)}mo(e)}function eo(e){e.g&&(co(e),e.g.cancel(),e.g=null)}function to(e){eo(e),e.u&&(In.clearTimeout(e.u),e.u=null),fo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&In.clearTimeout(e.m),e.m=null)}function no(e,t){e.l.push(new ya(e.Za++,t)),3==e.G&&ro(e)}function ro(e){wa(e.i)||e.m||(e.m=!0,Qr(e.Ha,e),e.C=0)}function io(e,t){var n;n=t?t.m:e.V++;var r=Xi(e.F);ta(r,"SID",e.J),ta(r,"RID",n),ta(r,"AID",e.U),ao(e,r),e.o&&e.s&&Xa(r,e.o,e.s),n=new Ci(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=oo(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ia(e.i,n),Oi(n,r,t)}function ao(e,t){e.j&&Wi({},(function(e,n){ta(t,n,e)}))}function oo(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Pn(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Na(l,o,"req"+c+"_")}catch(Ho){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function so(e){e.g||e.u||(e.Y=1,Qr(e.Ga,e),e.A=0)}function uo(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=yi(Pn(e.Ga,e),po(e,e.A)),e.A++,!0)}function co(e){null!=e.B&&(In.clearTimeout(e.B),e.B=null)}function lo(e){e.g=new Ci(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Xi(e.oa);ta(t,"RID","rpc"),ta(t,"SID",e.J),ta(t,"CI",e.N?"0":"1"),ta(t,"AID",e.U),ao(e,t),ta(t,"TYPE","xmlhttp"),e.o&&e.s&&Xa(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=na(Xi(t)),n.s=null,n.U=!0,Di(n,e)}function fo(e){null!=e.v&&(In.clearTimeout(e.v),e.v=null)}function ho(e,t){var n=null;if(e.g==t){fo(e),co(e),e.g=null;var r=2}else{if(!xa(e.i,t))return;n=t.D,Ea(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;jr(r=fi(),new mi(r,n,t,i)),ro(e)}else so(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(_a(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=yi(Pn(e.Ha,e,t),po(e,e.C)),e.C++,!0))}(e,t)||2==r&&uo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:vo(e,5);break;case 4:vo(e,10);break;case 3:vo(e,6);break;default:vo(e,2)}}function po(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function vo(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Pn(e.jb,e);n||(n=new Yi("//www.google.com/images/cleardot.gif"),In.location&&"http"==In.location.protocol||$i(n,"https"),na(n)),function(e,t){var n=new si;if(In.Image){var r=new Image;r.onload=On(Aa,n,r,"TestLoadImage: loaded",!0,t),r.onerror=On(Aa,n,r,"TestLoadImage: error",!1,t),r.onabort=On(Aa,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=On(Aa,n,r,"TestLoadImage: timeout",!1,t),In.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else vi(2);e.G=0,e.j&&e.j.va(t),mo(e),to(e)}function mo(e){e.G=0,e.I=-1,e.j&&(0==Ta(e.i).length&&0==e.l.length||(e.i.i.length=0,Vn(e.l),e.l.length=0),e.j.ua())}function yo(e,t,n){var r=function(e){return e instanceof Yi?Xi(e):new Yi(e,void 0)}(n);if(""!=r.i)t&&Ji(r,t+"."+r.i),Zi(r,r.m);else{var i=In.location;r=function(e,t,n,r){var i=new Yi(null,void 0);return e&&$i(i,e),t&&Ji(i,t),n&&Zi(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Qn(e.aa,(function(e,t){ta(r,t,e)})),t=e.D,n=e.sa,t&&n&&ta(r,t,n),ta(r,"VER",e.ma),ao(e,r),r}function go(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Ua(new Ra({ib:!0})):new Ua(e.qa)).L=e.H,t}function ko(){}function bo(){if(tr&&!(10<=Number(pr)))throw Error("Environmental error: no available transport.")}function wo(e,t){Ur.call(this),this.g=new Ja(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!qn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!qn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Io(this)}function _o(e){Ei.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function xo(){Ti.call(this),this.status=1}function Io(e){this.g=e}(bn=Ua.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xi.g(),this.C=this.u?wi(this.u):wi(xi),this.g.onreadystatechange=Pn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Ba(this,a)}e=n||"";var i=new Ki(this.headers);r&&Wi(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=za,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=In.FormData&&e instanceof In.FormData,!(0<=Fn(qa,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ga(this),0<this.B&&((this.K=function(e){return tr&&hr()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Pn(this.pa,this)):this.A=ei(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ba(this,a)}},bn.pa=function(){"undefined"!=typeof xn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jr(this,"timeout"),this.abort(8))},bn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,jr(this,"complete"),jr(this,"abort"),Ha(this))},bn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ha(this,!0)),Ua.Z.M.call(this)},bn.Fa=function(){this.s||(this.F||this.v||this.l?Ka(this):this.cb())},bn.cb=function(){Ka(this)},bn.ba=function(){try{return 2<Qa(this)?this.g.status:-1}catch(ka){return-1}},bn.ga=function(){try{return this.g?this.g.responseText:""}catch(ka){return""}},bn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Fa(t)}},bn.Da=function(){return this.m},bn.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(bn=Ja.prototype).ma=8,bn.G=1,bn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},bn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Ci(this,this.h,e,void 0),n=this.s;if(this.P&&(n?$n(n=Yn(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=oo(this,t,r),ta(i=Xi(this.F),"RID",e),ta(i,"CVER",22),this.D&&ta(i,"X-HTTP-Session-Id",this.D),ao(this,i),this.o&&n&&Xa(i,this.o,n),Ia(this.i,t),this.Ra&&ta(i,"TYPE","init"),this.ja?(ta(i,"$req",r),ta(i,"SID","null"),t.$=!0,Oi(t,i,null)):Oi(t,i,r),this.G=2}}else 3==this.G&&(e?io(this,e):0==this.l.length||wa(this.i)||io(this))},bn.Ga=function(){if(this.u=null,lo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=yi(Pn(this.bb,this),e)}},bn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,vi(10),eo(this),lo(this))},bn.ab=function(){null!=this.v&&(this.v=null,eo(this),uo(this),vi(19))},bn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),vi(2)):(this.h.info("Failed to ping google.com"),vi(1))},(bn=ko.prototype).xa=function(){},bn.wa=function(){},bn.va=function(){},bn.ua=function(){},bn.Oa=function(){},bo.prototype.g=function(e,t){return new wo(e,t)},Dn(wo,Ur),wo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Qr(Pn(e.hb,e,t))),vi(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=yo(e,null,e.W),ro(e)},wo.prototype.close=function(){Za(this.g)},wo.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,no(this.g,t)}else this.v?((t={}).__data__=qr(e),no(this.g,t)):no(this.g,e)},wo.prototype.M=function(){this.g.j=null,delete this.j,Za(this.g),delete this.g,wo.Z.M.call(this)},Dn(_o,Ei),Dn(xo,Ti),Dn(Io,ko),Io.prototype.xa=function(){jr(this.g,"a")},Io.prototype.wa=function(e){jr(this.g,new _o(e))},Io.prototype.va=function(e){jr(this.g,new xo(e))},Io.prototype.ua=function(){jr(this.g,"b")},bo.prototype.createWebChannel=bo.prototype.g,wo.prototype.send=wo.prototype.u,wo.prototype.open=wo.prototype.m,wo.prototype.close=wo.prototype.close,gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,ki.COMPLETE="complete",_i.EventType=Ii,Ii.OPEN="a",Ii.CLOSE="b",Ii.ERROR="c",Ii.MESSAGE="d",Ur.prototype.listen=Ur.prototype.N,Ua.prototype.listenOnce=Ua.prototype.O,Ua.prototype.getLastError=Ua.prototype.La,Ua.prototype.getLastErrorCode=Ua.prototype.Da,Ua.prototype.getStatus=Ua.prototype.ba,Ua.prototype.getResponseJson=Ua.prototype.Qa,Ua.prototype.getResponseText=Ua.prototype.ga,Ua.prototype.send=Ua.prototype.ea;var Eo=_n.createWebChannelTransport=function(){return new bo},To=_n.getStatEventTarget=function(){return fi()},So=_n.ErrorCode=gi,Co=_n.EventType=ki,No=_n.Event=ci,Ao=_n.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ro=_n.FetchXmlHttpFactory=Ra,Po=_n.WebChannel=_i,Oo=_n.XhrIo=Ua,Do="@firebase/firestore",Lo=function(){function e(t){le(this,e),this.uid=t}return he(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Lo.UNAUTHENTICATED=new Lo(null),Lo.GOOGLE_CREDENTIALS=new Lo("google-credentials-uid"),Lo.FIRST_PARTY=new Lo("first-party-uid"),Lo.MOCK_USER=new Lo("mock-user");var Mo="9.6.7",Fo=new yt("@firebase/firestore");function Uo(){return Fo.logLevel}function jo(e){if(Fo.logLevel<=lt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zo);Fo.debug.apply(Fo,["Firestore (".concat(Mo,"): ").concat(e)].concat(at(i)))}}function Vo(e){if(Fo.logLevel<=lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zo);Fo.error.apply(Fo,["Firestore (".concat(Mo,"): ").concat(e)].concat(at(i)))}}function qo(e){if(Fo.logLevel<=lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(zo);Fo.warn.apply(Fo,["Firestore (".concat(Mo,"): ").concat(e)].concat(at(i)))}}function zo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Bo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Mo,") INTERNAL ASSERTION FAILED: ")+e;throw Vo(t),new Error(t)}function Wo(e,t){e||Bo()}function Ko(e,t){return e}var Ho={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Go=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return he(n)}(Me),Qo=he((function e(){var t=this;le(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Yo=he((function e(t,n){le(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Xo=function(){function e(){le(this,e)}return he(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lo.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),$o=function(){function e(t){le(this,e),this.token=t,this.changeListener=null}return he(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Jo=function(){function e(t){le(this,e),this.t=t,this.currentUser=Lo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return he(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Qo;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Qo,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable($(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){jo("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(jo("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Qo)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(jo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Wo("string"==typeof n.accessToken),new Yo(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Wo(null===e||"string"==typeof e),new Lo(e)}}]),e}(),Zo=he((function e(t,n,r){le(this,e),this.type="FirstParty",this.user=Lo.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),es=function(){function e(t,n,r){le(this,e),this.h=t,this.l=n,this.m=r}return he(e,[{key:"getToken",value:function(){return Promise.resolve(new Zo(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Lo.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),ts=he((function e(t){le(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),ns=function(){function e(t){le(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return he(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&jo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,jo("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){jo("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):jo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Wo("string"==typeof t.token),e.p=t.token,new ts(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),rs=function(){function e(t,n){var r=this;le(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return he(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function is(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}rs.A=-1;var as=function(){function e(){le(this,e)}return he(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=is(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function os(e,t){return e<t?-1:e>t?1:0}function ss(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function us(e){return e+"\0"}var cs=function(){function e(t,n){if(le(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Go(Ho.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Go(Ho.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Go(Ho.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Go(Ho.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return he(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?os(this.nanoseconds,e.nanoseconds):os(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ls=function(){function e(t){le(this,e),this.timestamp=t}return he(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new cs(0,0))}}]),e}();function fs(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hs(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ds(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var ps=function(){function e(t,n,r){le(this,e),void 0===n?n=0:n>t.length&&Bo(),void 0===r?r=t.length-n:r>t.length-n&&Bo(),this.segments=t,this.offset=n,this.len=r}return he(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),vs=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Go(Ho.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,at(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ps),ms=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ys=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return ms.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Go(Ho.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new Go(Ho.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Go(Ho.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new Go(Ho.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ps),gs=function(){function e(t){le(this,e),this.fields=t,t.sort(ys.comparator)}return he(e,[{key:"covers",value:function(e){var t,n=ce(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return ss(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var ks=function(e){function t(e){le(this,t),this.binaryString=e}return he(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return os(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();ks.EMPTY_BYTE_STRING=new ks("");var bs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(e){if(Wo(!!e),"string"==typeof e){var t=0,n=bs.exec(e);if(Wo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:_s(e.seconds),nanos:_s(e.nanos)}}function _s(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xs(e){return"string"==typeof e?ks.fromBase64String(e):ks.fromUint8Array(e)}function Is(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Es(e){var t=e.mapValue.fields.__previous_value__;return Is(t)?Es(t):t}function Ts(e){var t=ws(e.mapValue.fields.__local_write_time__.timestampValue);return new cs(t.seconds,t.nanos)}var Ss=he((function e(t,n,r,i,a,o,s,u){le(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),Cs=function(){function e(t,n){le(this,e),this.projectId=t,this.database=n||"(default)"}return he(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Ns(e){return null==e}function As(e){return 0===e&&1/e==-1/0}function Rs(e){return"number"==typeof e&&Number.isInteger(e)&&!As(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Ps=function(){function e(t){le(this,e),this.path=t}return he(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===vs.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(vs.fromString(t))}},{key:"fromName",value:function(t){return new e(vs.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(vs.emptyPath())}},{key:"comparator",value:function(e,t){return vs.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new vs(t.slice()))}}]),e}(),Os={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function Ds(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Is(e)?4:10:Bo()}function Ls(e,t){if(e===t)return!0;var n=Ds(e);if(n!==Ds(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ts(e).isEqual(Ts(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=ws(e.timestampValue),r=ws(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xs(e.bytesValue).isEqual(xs(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return _s(e.geoPointValue.latitude)===_s(t.geoPointValue.latitude)&&_s(e.geoPointValue.longitude)===_s(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return _s(e.integerValue)===_s(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=_s(e.doubleValue),r=_s(t.doubleValue);return n===r?As(n)===As(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ss(e.arrayValue.values||[],t.arrayValue.values||[],Ls);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(fs(n)!==fs(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ls(n[i],r[i])))return!1;return!0}(e,t);default:return Bo()}}function Ms(e,t){return void 0!==(e.values||[]).find((function(e){return Ls(e,t)}))}function Fs(e,t){if(e===t)return 0;var n=Ds(e),r=Ds(t);if(n!==r)return os(n,r);switch(n){case 0:return 0;case 1:return os(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=_s(e.integerValue||e.doubleValue),r=_s(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Us(e.timestampValue,t.timestampValue);case 4:return Us(Ts(e),Ts(t));case 5:return os(e.stringValue,t.stringValue);case 6:return function(e,t){var n=xs(e),r=xs(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=os(n[i],r[i]);if(0!==a)return a}return os(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=os(_s(e.latitude),_s(t.latitude));return 0!==n?n:os(_s(e.longitude),_s(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Fs(n[i],r[i]);if(a)return a}return os(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=os(r[o],a[o]);if(0!==s)return s;var u=Fs(n[r[o]],i[a[o]]);if(0!==u)return u}return os(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Bo()}}function Us(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return os(e,t);var n=ws(e),r=ws(t),i=os(n.seconds,r.seconds);return 0!==i?i:os(n.nanos,r.nanos)}function js(e){return Vs(e)}function Vs(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=ws(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?xs(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ps.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=ce(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Vs(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=ce(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Vs(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Bo();var t,n}function qs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function zs(e){return!!e&&"integerValue"in e}function Bs(e){return!!e&&"arrayValue"in e}function Ws(e){return!!e&&"nullValue"in e}function Ks(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hs(e){return!!e&&"mapValue"in e}function Gs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return hs(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Gs(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Gs(e.arrayValue.values[r]);return n}return Object.assign({},e)}var Qs=function(){function e(t){le(this,e),this.value=t}return he(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Hs(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gs(t)}},{key:"setAll",value:function(e){var t=this,n=ys.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Gs(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Hs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Ls(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Hs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){hs(t,(function(t,n){return e[t]=n}));var r,i=ce(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Gs(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Ys(e){var t=[];return hs(e.fields,(function(e,n){var r=new ys([e]);if(Hs(n)){var i=Ys(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=ce(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new gs(t)}var Xs=function(){function e(t,n,r,i,a,o){le(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return he(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Qs.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Qs.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ls.min(),ls.min(),Qs.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,ls.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ls.min(),Qs.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ls.min(),Qs.empty(),2)}}]),e}(),$s=he((function e(t,n,r,i){le(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));$s.UNKNOWN_ID=-1;var Js=he((function e(t,n){le(this,e),this.fieldPath=t,this.kind=n})),Zs=function(){function e(t,n){le(this,e),this.sequenceNumber=t,this.offset=n}return he(e,null,[{key:"empty",value:function(){return new e(0,eu.min())}}]),e}(),eu=function(){function e(t,n,r){le(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return he(e,null,[{key:"min",value:function(){return new e(ls.min(),Ps.empty(),-1)}}]),e}(),tu=he((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;le(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.P=null}));function nu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new tu(e,t,n,r,i,a,o)}function ru(e){var t=Ko(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+js(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Ns(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return js(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return js(e)})).join(",")),t.P=n}return t.P}function iu(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!yu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Ls(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ku(e.startAt,t.startAt)&&ku(e.endAt,t.endAt)}function au(e){return Ps.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var ou=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return he(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(Fs(t,this.value)):null!==t&&Ds(this.value)===Ds(t)&&this.V(Fs(t,this.value))}},{key:"V",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bo()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new su(e,t,r):"array-contains"===t?new fu(e,r):"in"===t?new hu(e,r):"not-in"===t?new du(e,r):"array-contains-any"===t?new pu(e,r):new n(e,t,r)}},{key:"v",value:function(e,t,n){return"in"===t?new uu(e,n):new cu(e,n)}}]),n}(function(){return he((function e(){le(this,e)}))}()),su=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this,e,r,i)).key=Ps.fromName(i.referenceValue),a}return he(n,[{key:"matches",value:function(e){var t=Ps.comparator(e.key,this.key);return this.V(t)}}]),n}(ou),uu=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,e,"in",r)).keys=lu("in",r),i}return he(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ou),cu=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,e,"not-in",r)).keys=lu("not-in",r),i}return he(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ou);function lu(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Ps.fromName(e.referenceValue)}))}var fu=function(e){re(n,e);var t=ue(n);function n(e,r){return le(this,n),t.call(this,e,"array-contains",r)}return he(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Bs(t)&&Ms(t.arrayValue,this.value)}}]),n}(ou),hu=function(e){re(n,e);var t=ue(n);function n(e,r){return le(this,n),t.call(this,e,"in",r)}return he(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ms(this.value.arrayValue,t)}}]),n}(ou),du=function(e){re(n,e);var t=ue(n);function n(e,r){return le(this,n),t.call(this,e,"not-in",r)}return he(n,[{key:"matches",value:function(e){if(Ms(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ms(this.value.arrayValue,t)}}]),n}(ou),pu=function(e){re(n,e);var t=ue(n);function n(e,r){return le(this,n),t.call(this,e,"array-contains-any",r)}return he(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Bs(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ms(t.value.arrayValue,e)}))}}]),n}(ou),vu=he((function e(t,n){le(this,e),this.position=t,this.inclusive=n})),mu=he((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";le(this,e),this.field=t,this.dir=n}));function yu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function gu(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Ps.comparator(Ps.fromName(o.referenceValue),n.key):Fs(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function ku(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Ls(e.position[n],t.position[n]))return!1;return!0}var bu=he((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;le(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function wu(e,t,n,r,i,a,o,s){return new bu(e,t,n,r,i,a,o,s)}function _u(e){return new bu(e)}function xu(e){return!Ns(e.limit)&&"F"===e.limitType}function Iu(e){return!Ns(e.limit)&&"L"===e.limitType}function Eu(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Tu(e){var t,n=ce(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Su(e){return null!==e.collectionGroup}function Cu(e){var t=Ko(e);if(null===t.D){t.D=[];var n=Tu(t),r=Eu(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new mu(n)),t.D.push(new mu(ys.keyField(),"asc"));else{var i,a=!1,o=ce(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.D.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new mu(ys.keyField(),u))}}}return t.D}function Nu(e){var t=Ko(e);if(!t.C)if("F"===t.limitType)t.C=nu(t.path,t.collectionGroup,Cu(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=ce(Cu(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new mu(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new vu(t.endAt.position,!t.endAt.inclusive):null,u=t.startAt?new vu(t.startAt.position,!t.startAt.inclusive):null;t.C=nu(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function Au(e,t,n){return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ru(e,t){return iu(Nu(e),Nu(t))&&e.limitType===t.limitType}function Pu(e){return"".concat(ru(Nu(e)),"|lt:").concat(e.limitType)}function Ou(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(js(t.value));var t})).join(", "),"]")),Ns(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return js(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return js(e)})).join(",")),"Target(".concat(t,")")}(Nu(e)),"; limitType=").concat(e.limitType,")")}function Du(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ps.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=ce(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=ce(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=gu(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Cu(e),t))&&!(e.endAt&&!function(e,t,n){var r=gu(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Cu(e),t))}(e,t)}function Lu(e){return function(t,n){var r,i=!1,a=ce(Cu(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=Mu(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function Mu(e,t,n){var r=e.field.isKeyField()?Ps.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Fs(r,i):Bo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Bo()}}function Fu(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:As(t)?"-0":t}}function Uu(e){return{integerValue:""+e}}function ju(e,t){return Rs(t)?Uu(t):Fu(e,t)}var Vu=he((function e(){le(this,e),this._=void 0}));function qu(e,t,n){return e instanceof Wu?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ku?Hu(e,t):e instanceof Gu?Qu(e,t):function(e,t){var n=Bu(e,t),r=Xu(n)+Xu(e.k);return zs(n)&&zs(e.k)?Uu(r):Fu(e.O,r)}(e,t)}function zu(e,t,n){return e instanceof Ku?Hu(e,t):e instanceof Gu?Qu(e,t):n}function Bu(e,t){return e instanceof Yu?zs(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Wu=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n)}(Vu),Ku=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this)).elements=e,r}return he(n)}(Vu);function Hu(e,t){var n,r=$u(t),i=ce(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Ls(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Gu=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this)).elements=e,r}return he(n)}(Vu);function Qu(e,t){var n,r=$u(t),i=ce(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Ls(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Yu=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this)).O=e,i.k=r,i}return he(n)}(Vu);function Xu(e){return _s(e.integerValue||e.doubleValue)}function $u(e){return Bs(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Ju=he((function e(t,n){le(this,e),this.field=t,this.transform=n}));var Zu=he((function e(t,n){le(this,e),this.version=t,this.transformResults=n})),ec=function(){function e(t,n){le(this,e),this.updateTime=t,this.exists=n}return he(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function tc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var nc=he((function e(){le(this,e)}));function rc(e,t,n){e instanceof uc?function(e,t,n){var r=e.value.clone(),i=fc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof cc?function(e,t,n){if(tc(e.precondition,t)){var r=fc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(lc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ic(e,t,n){e instanceof uc?function(e,t,n){if(tc(e.precondition,t)){var r=e.value.clone(),i=hc(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(sc(t),r).setHasLocalMutations()}}(e,t,n):e instanceof cc?function(e,t,n){if(tc(e.precondition,t)){var r=hc(e.fieldTransforms,n,t),i=t.data;i.setAll(lc(e)),i.setAll(r),t.convertToFoundDocument(sc(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){tc(e.precondition,t)&&t.convertToNoDocument(ls.min())}(e,t)}function ac(e,t){var n,r=null,i=ce(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=Bu(a.transform,o||null);null!=s&&(null==r&&(r=Qs.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function oc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ss(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ku&&t instanceof Ku||e instanceof Gu&&t instanceof Gu?ss(e.elements,t.elements,Ls):e instanceof Yu&&t instanceof Yu?Ls(e.k,t.k):e instanceof Wu&&t instanceof Wu}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function sc(e){return e.isFoundDocument()?e.version:ls.min()}var uc=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return le(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return he(n)}(nc),cc=function(e){re(n,e);var t=ue(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return le(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return he(n)}(nc);function lc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function fc(e,t,n){var r=new Map;Wo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,zu(o,s,n[i]))}return r}function hc(e,t,n){var r,i=new Map,a=ce(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,qu(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var dc,pc,vc=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return he(n)}(nc),mc=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return he(n)}(nc),yc=he((function e(t){le(this,e),this.count=t}));function gc(e){switch(e){default:return Bo();case Ho.CANCELLED:case Ho.UNKNOWN:case Ho.DEADLINE_EXCEEDED:case Ho.RESOURCE_EXHAUSTED:case Ho.INTERNAL:case Ho.UNAVAILABLE:case Ho.UNAUTHENTICATED:return!1;case Ho.INVALID_ARGUMENT:case Ho.NOT_FOUND:case Ho.ALREADY_EXISTS:case Ho.PERMISSION_DENIED:case Ho.FAILED_PRECONDITION:case Ho.ABORTED:case Ho.OUT_OF_RANGE:case Ho.UNIMPLEMENTED:case Ho.DATA_LOSS:return!0}}function kc(e){if(void 0===e)return Vo("GRPC error has no .code"),Ho.UNKNOWN;switch(e){case dc.OK:return Ho.OK;case dc.CANCELLED:return Ho.CANCELLED;case dc.UNKNOWN:return Ho.UNKNOWN;case dc.DEADLINE_EXCEEDED:return Ho.DEADLINE_EXCEEDED;case dc.RESOURCE_EXHAUSTED:return Ho.RESOURCE_EXHAUSTED;case dc.INTERNAL:return Ho.INTERNAL;case dc.UNAVAILABLE:return Ho.UNAVAILABLE;case dc.UNAUTHENTICATED:return Ho.UNAUTHENTICATED;case dc.INVALID_ARGUMENT:return Ho.INVALID_ARGUMENT;case dc.NOT_FOUND:return Ho.NOT_FOUND;case dc.ALREADY_EXISTS:return Ho.ALREADY_EXISTS;case dc.PERMISSION_DENIED:return Ho.PERMISSION_DENIED;case dc.FAILED_PRECONDITION:return Ho.FAILED_PRECONDITION;case dc.ABORTED:return Ho.ABORTED;case dc.OUT_OF_RANGE:return Ho.OUT_OF_RANGE;case dc.UNIMPLEMENTED:return Ho.UNIMPLEMENTED;case dc.DATA_LOSS:return Ho.DATA_LOSS;default:return Bo()}}(pc=dc||(dc={}))[pc.OK=0]="OK",pc[pc.CANCELLED=1]="CANCELLED",pc[pc.UNKNOWN=2]="UNKNOWN",pc[pc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pc[pc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pc[pc.NOT_FOUND=5]="NOT_FOUND",pc[pc.ALREADY_EXISTS=6]="ALREADY_EXISTS",pc[pc.PERMISSION_DENIED=7]="PERMISSION_DENIED",pc[pc.UNAUTHENTICATED=16]="UNAUTHENTICATED",pc[pc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pc[pc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pc[pc.ABORTED=10]="ABORTED",pc[pc.OUT_OF_RANGE=11]="OUT_OF_RANGE",pc[pc.UNIMPLEMENTED=12]="UNIMPLEMENTED",pc[pc.INTERNAL=13]="INTERNAL",pc[pc.UNAVAILABLE=14]="UNAVAILABLE",pc[pc.DATA_LOSS=15]="DATA_LOSS";var bc=function(){function e(t,n){le(this,e),this.comparator=t,this.root=n||_c.EMPTY}return he(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,_c.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,_c.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new wc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new wc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new wc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new wc(this.root,e,this.comparator,!0)}}]),e}(),wc=function(){function e(t,n,r,i){le(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return he(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),_c=function(){function e(t,n,r,i,a){le(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return he(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Bo();if(this.right.isRed())throw Bo();var e=this.left.check();if(e!==this.right.check())throw Bo();return e+(this.isRed()?0:1)}}]),e}();_c.EMPTY=null,_c.RED=!0,_c.BLACK=!1,_c.EMPTY=new(function(){function e(){le(this,e),this.size=0}return he(e,[{key:"key",get:function(){throw Bo()}},{key:"value",get:function(){throw Bo()}},{key:"color",get:function(){throw Bo()}},{key:"left",get:function(){throw Bo()}},{key:"right",get:function(){throw Bo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new _c(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var xc=function(){function e(t){le(this,e),this.comparator=t,this.data=new bc(this.comparator)}return he(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Ic(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Ic(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Ic=function(){function e(t){le(this,e),this.iter=t}return he(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Ec(e){return e.hasNext()?e.getNext():void 0}var Tc=new bc(Ps.comparator);function Sc(){return Tc}var Cc=new bc(Ps.comparator);function Nc(){return Cc}var Ac=new bc(Ps.comparator),Rc=new xc(Ps.comparator);function Pc(){for(var e=Rc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Oc=new xc(os);function Dc(){return Oc}var Lc=function(){function e(t,n,r,i,a){le(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return he(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Mc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(ls.min(),r,Dc(),Sc(),Pc())}}]),e}(),Mc=function(){function e(t,n,r,i,a){le(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return he(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(ks.EMPTY_BYTE_STRING,n,Pc(),Pc(),Pc())}}]),e}(),Fc=he((function e(t,n,r,i){le(this,e),this.M=t,this.removedTargetIds=n,this.key=r,this.$=i})),Uc=he((function e(t,n){le(this,e),this.targetId=t,this.F=n})),jc=he((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ks.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;le(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Vc=function(){function e(){le(this,e),this.B=0,this.L=Bc(),this.U=ks.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return he(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Pc(),t=Pc(),n=Pc();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Bo()}})),new Mc(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Bc()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),qc=function(){function e(t){le(this,e),this.nt=t,this.st=new Map,this.it=Sc(),this.rt=zc(),this.ot=new xc(os)}return he(e,[{key:"ct",value:function(e){var t,n=ce(e.M);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.at(r,e.key,e.$)}}catch(s){n.e(s)}finally{n.f()}var i,a=ce(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.at(o,e.key,e.$)}}catch(s){a.e(s)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Bo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var i=r.target;if(au(i))if(0===n){var a=new Ps(i.path);this.at(t,a,Xs.newNoDocument(a,ls.min()))}else Wo(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&au(a.target)){var o=new Ps(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.at(i,o,Xs.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Pc();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Lc(e,n,this.ot,this.it,r);return this.it=Sc(),this.rt=zc(),this.ot=new xc(os),i}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}}},{key:"at",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Vc,this.st.set(e,t)),t}},{key:"Et",value:function(e){var t=this.rt.get(e);return t||(t=new xc(os),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||jo("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Vc),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.at(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function zc(){return new bc(Ps.comparator)}function Bc(){return new bc(Ps.comparator)}var Wc={asc:"ASCENDING",desc:"DESCENDING"},Kc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hc=he((function e(t,n){le(this,e),this.databaseId=t,this.N=n}));function Gc(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Qc(e,t){return e.N?t.toBase64():t.toUint8Array()}function Yc(e,t){return Gc(e,t.toTimestamp())}function Xc(e){return Wo(!!e),ls.fromTimestamp(function(e){var t=ws(e);return new cs(t.seconds,t.nanos)}(e))}function $c(e,t){return function(e){return new vs(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Jc(e){var t=vs.fromString(e);return Wo(wl(t)),t}function Zc(e,t){return $c(e.databaseId,t.path)}function el(e,t){var n=Jc(t);if(n.get(1)!==e.databaseId.projectId)throw new Go(Ho.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Go(Ho.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ps(il(n))}function tl(e,t){return $c(e.databaseId,t)}function nl(e){var t=Jc(e);return 4===t.length?vs.emptyPath():il(t)}function rl(e){return new vs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function il(e){return Wo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function al(e,t,n){return{name:Zc(e,t),fields:n.value.mapValue.fields}}function ol(e,t,n){var r=el(e,t.name),i=Xc(t.updateTime),a=new Qs({mapValue:{fields:t.fields}}),o=Xs.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function sl(e,t){return"found"in t?function(e,t){Wo(!!t.found),t.found.name,t.found.updateTime;var n=el(e,t.found.name),r=Xc(t.found.updateTime),i=new Qs({mapValue:{fields:t.found.fields}});return Xs.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Wo(!!t.missing),Wo(!!t.readTime);var n=el(e,t.missing),r=Xc(t.readTime);return Xs.newNoDocument(n,r)}(e,t):Bo()}function ul(e,t){var n;if(t instanceof uc)n={update:al(e,t.key,t.value)};else if(t instanceof vc)n={delete:Zc(e,t.key)};else if(t instanceof cc)n={update:al(e,t.key,t.data),updateMask:bl(t.fieldMask)};else{if(!(t instanceof mc))return Bo();n={verify:Zc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Wu)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ku)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Gu)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yu)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Bo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Yc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Bo()}(e,t.precondition)),n}function cl(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ec.updateTime(Xc(e.updateTime)):void 0!==e.exists?ec.exists(e.exists):ec.none()}(t.currentDocument):ec.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Wo("REQUEST_TIME"===t.setToServerValue),n=new Wu;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ku(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Gu(i)}else"increment"in t?n=new Yu(e,t.increment):Bo();var a=ys.fromServerFormat(t.fieldPath);return new Ju(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=el(e,t.update.name),a=new Qs({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new gs(t.map((function(e){return ys.fromServerFormat(e)})))}(t.updateMask);return new cc(i,a,o,n,r)}return new uc(i,a,n,r)}if(t.delete){var s=el(e,t.delete);return new vc(s,n)}if(t.verify){var u=el(e,t.verify);return new mc(u,n)}return Bo()}function ll(e,t){return{documents:[tl(e,t.path)]}}function fl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=tl(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=tl(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ks(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NAN"}};if(Ws(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ks(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NOT_NAN"}};if(Ws(e.value))return{unaryFilter:{field:ml(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ml(e.field),op:vl(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:ml(e.field),direction:pl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.N||Ns(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function hl(e){var t=nl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Wo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=dl(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new mu(yl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Ns(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new vu(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new vu(n,t)}(n.endAt)),wu(t,i,s,o,u,"F",c,l)}function dl(e){return e?void 0!==e.unaryFilter?[kl(e)]:void 0!==e.fieldFilter?[gl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return dl(e)})).reduce((function(e,t){return e.concat(t)})):Bo():[]}function pl(e){return Wc[e]}function vl(e){return Kc[e]}function ml(e){return{fieldPath:e.canonicalString()}}function yl(e){return ys.fromServerFormat(e.fieldPath)}function gl(e){return ou.create(yl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bo()}}(e.fieldFilter.op),e.fieldFilter.value)}function kl(e){switch(e.unaryFilter.op){case"IS_NAN":var t=yl(e.unaryFilter.field);return ou.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=yl(e.unaryFilter.field);return ou.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=yl(e.unaryFilter.field);return ou.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=yl(e.unaryFilter.field);return ou.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Bo()}}function bl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function wl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function _l(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Il(t)),t=xl(e.get(n),t);return Il(t)}function xl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Il(e){return e+"\x01\x01"}function El(e){var t=e.length;if(Wo(t>=2),2===t)return Wo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),vs.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Bo(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Bo()}a=o+2}return new vs(r)}var Tl=he((function e(t,n){le(this,e),this.seconds=t,this.nanoseconds=n})),Sl=he((function e(t,n,r){le(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r}));Sl.store="owner",Sl.key="owner";var Cl=he((function e(t,n,r){le(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r}));Cl.store="mutationQueues",Cl.keyPath="userId";var Nl=he((function e(t,n,r,i,a){le(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}));Nl.store="mutations",Nl.keyPath="batchId",Nl.userMutationsIndex="userMutationsIndex",Nl.userMutationsKeyPath=["userId","batchId"];var Al=function(){function e(){le(this,e)}return he(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,_l(t)]}},{key:"key",value:function(e,t,n){return[e,_l(t),n]}}]),e}();Al.store="documentMutations",Al.PLACEHOLDER=new Al;var Rl=he((function e(t,n){le(this,e),this.path=t,this.readTime=n})),Pl=he((function e(t,n){le(this,e),this.path=t,this.version=n})),Ol=he((function e(t,n,r,i,a,o){le(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=o}));Ol.store="remoteDocuments",Ol.readTimeIndex="readTimeIndex",Ol.readTimeIndexPath="readTime",Ol.collectionReadTimeIndex="collectionReadTimeIndex",Ol.collectionReadTimeIndexPath=["parentPath","readTime"];var Dl=he((function e(t){le(this,e),this.byteSize=t}));Dl.store="remoteDocumentGlobal",Dl.key="remoteDocumentGlobalKey";var Ll=he((function e(t,n,r,i,a,o,s){le(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=o,this.query=s}));Ll.store="targets",Ll.keyPath="targetId",Ll.queryTargetsIndexName="queryTargetsIndex",Ll.queryTargetsKeyPath=["canonicalId","targetId"];var Ml=he((function e(t,n,r){le(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r}));Ml.store="targetDocuments",Ml.keyPath=["targetId","path"],Ml.documentTargetsIndex="documentTargetsIndex",Ml.documentTargetsKeyPath=["path","targetId"];var Fl=he((function e(t,n,r,i){le(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i}));Fl.key="targetGlobalKey",Fl.store="targetGlobal";var Ul=he((function e(t,n){le(this,e),this.collectionId=t,this.parent=n}));Ul.store="collectionParents",Ul.keyPath=["collectionId","parent"];var jl=he((function e(t,n,r,i){le(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i}));jl.store="clientMetadata",jl.keyPath="clientId";var Vl=he((function e(t,n,r){le(this,e),this.bundleId=t,this.createTime=n,this.version=r}));Vl.store="bundles",Vl.keyPath="bundleId";var ql=he((function e(t,n,r){le(this,e),this.name=t,this.readTime=n,this.bundledQuery=r}));ql.store="namedQueries",ql.keyPath="name";var zl=he((function e(t,n,r){le(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r}));zl.store="indexConfiguration",zl.keyPath="indexId",zl.collectionGroupIndex="collectionGroupIndex",zl.collectionGroupIndexPath="collectionGroup";var Bl=he((function e(t,n,r,i,a,o){le(this,e),this.indexId=t,this.uid=n,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=o}));Bl.store="indexState",Bl.keyPath=["indexId","uid"],Bl.sequenceNumberIndex="sequenceNumberIndex",Bl.sequenceNumberIndexPath=["uid","sequenceNumber"];var Wl=he((function e(t,n,r,i,a){le(this,e),this.indexId=t,this.uid=n,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}));Wl.store="indexEntries",Wl.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Wl.documentKeyIndex="documentKeyIndex",Wl.documentKeyIndexPath=["indexId","uid","documentKey"];var Kl=he((function e(t,n,r,i,a,o){le(this,e),this.userId=t,this.collectionPath=n,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=o}));Kl.store="documentOverlays",Kl.keyPath=["userId","collectionPath","documentId"],Kl.collectionPathOverlayIndex="collectionPathOverlayIndex",Kl.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Kl.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Kl.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];var Hl=[Cl.store,Nl.store,Al.store,Ol.store,Ll.store,Sl.store,Fl.store,Ml.store].concat([jl.store]).concat([Dl.store]).concat([Ul.store]).concat([Vl.store,ql.store]),Gl=[].concat(at(Hl),[Kl.store]),Ql=[].concat(at(Gl),[zl.store,Bl.store,Wl.store]),Yl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Xl=function(){function e(){le(this,e),this.onCommittedListeners=[]}return he(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),$l=function(){function e(t){var n=this;le(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return he(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Bo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=ce(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),Jl=function(){function e(t,n){var r=this;le(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Qo,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new tf(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=sf(e.target.error);r.At.reject(new tf(t,n))}}return he(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(jo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new rf(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new tf(n,t)}}}]),e}(),Zl=function(){function e(t,n,r){le(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.vt(Ce())&&Vo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return he(e,[{key:"xt",value:function(){var e=$(Z().mark((function e(t){var n=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return jo("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new tf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Go(Ho.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Go(Ho.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new tf(t,n))},i.onupgradeneeded=function(e){jo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){jo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Ot&&(this.db.onversionchange=function(e){return n.Ot(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mt",value:function(e){this.Ot=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=$(Z().mark((function e(t,n,r,i){var a,o,s,u,c=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Z().mark((function e(){var n,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.xt(t);case 2:return c.db=e.sent,n=Jl.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),$l.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,jo("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return jo("SimpleDb","Removing database:",e),af(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"Vt",value:function(){if(!Le())return!1;if(e.St())return!0;var t=Ce(),n=e.vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBwS_jf7yuRFb4wahRFCoXhhKzoJPN9R8U",REACT_APP_APP_ID:"1:560448026776:web:10a763e6a9728b7b6e78ed",REACT_APP_AUTH_DOMAIN:"nwitter-ccf4c.firebaseapp.com",REACT_APP_DATABASE_URL:"https://nwitter-ccf4c.firebaseapp.com",REACT_APP_MESSAGIN_ID:"560448026776",REACT_APP_PROJECT_ID:"nwitter-ccf4c",REACT_APP_STORAGE_BUCKET:"nwitter-ccf4c.appspot.com"})||void 0===e?void 0:e.Ct)}},{key:"Nt",value:function(e,t){return e.store(t)}},{key:"vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ef=function(){function e(t){le(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return he(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return af(this.$t.delete())}}]),e}(),tf=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,Ho.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return he(n)}(Go);function nf(e){return"IndexedDbTransactionError"===e.name}var rf=function(){function e(t){le(this,e),this.store=t}return he(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(jo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(jo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),af(n)}},{key:"add",value:function(e){return jo("SimpleDb","ADD",this.store.name,e,e),af(this.store.add(e))}},{key:"get",value:function(e){var t=this;return af(this.store.get(e)).next((function(n){return void 0===n&&(n=null),jo("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return jo("SimpleDb","DELETE",this.store.name,e),af(this.store.delete(e))}},{key:"count",value:function(){return jo("SimpleDb","COUNT",this.store.name),af(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new $l((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){jo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Qt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"Wt",value:function(e){var t=this.cursor({});return new $l((function(n,r){t.onerror=function(e){var t=sf(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new $l((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ef(i),o=t(i.primaryKey,i.value,a);if(o instanceof $l){var s=o.catch((function(e){return a.done(),$l.reject(e)}));n.push(s)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return $l.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function af(e){return new $l((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=sf(e.target.error);n(t)}}))}var of=!1;function sf(e){var t=Zl.vt(Ce());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Go("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return of||(of=!0,setTimeout((function(){throw r}),0)),r}}return e}var uf=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this)).zt=e,i.currentSequenceNumber=r,i}return he(n)}(Xl);function cf(e,t){var n=Ko(e);return Zl.Nt(n.zt,t)}var lf=function(){function e(t,n,r,i){le(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return he(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&rc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=ce(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&ic(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var i,a=ce(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&ic(o,e,this.localWriteTime)}}catch(s){a.e(s)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ls.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Pc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&ss(this.mutations,e.mutations,(function(e,t){return oc(e,t)}))&&ss(this.baseMutations,e.baseMutations,(function(e,t){return oc(e,t)}))}}]),e}(),ff=function(){function e(t,n,r,i){le(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return he(e,null,[{key:"from",value:function(t,n,r){Wo(t.mutations.length===r.length);for(var i=Ac,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),hf=function(){function e(t,n){le(this,e),this.largestBatchId=t,this.mutation=n}return he(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),df=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ls.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ls.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ks.EMPTY_BYTE_STRING;le(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return he(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),pf=he((function e(t){le(this,e),this.Ht=t}));function vf(e,t){var n;if(t.document)n=ol(e.Ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Ps.fromSegments(t.noDocument.path),i=bf(t.noDocument.readTime);n=Xs.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Bo();var a=Ps.fromSegments(t.unknownDocument.path),o=bf(t.unknownDocument.version);n=Xs.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(gf(t.readTime)),n}function mf(e,t){var n=yf(t.readTime),r=t.key.path.popLast().toArray();if(t.isFoundDocument()){var i=function(e,t){return{name:Zc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Gc(e,t.version.toTimestamp())}}(e.Ht,t),a=t.hasCommittedMutations;return new Ol(null,null,i,a,n,r)}if(t.isNoDocument()){var o=t.key.path.toArray(),s=kf(t.version),u=t.hasCommittedMutations;return new Ol(null,new Rl(o,s),null,u,n,r)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=kf(t.version);return new Ol(new Pl(c,l),null,null,!0,n,r)}return Bo()}function yf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function gf(e){var t=new cs(e[0],e[1]);return ls.fromTimestamp(t)}function kf(e){var t=e.toTimestamp();return new Tl(t.seconds,t.nanoseconds)}function bf(e){var t=new cs(e.seconds,e.nanoseconds);return ls.fromTimestamp(t)}function wf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return cl(e.Ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return cl(e.Ht,t)})),s=cs.fromMillis(t.localWriteTimeMs);return new lf(t.batchId,s,n,o)}function _f(e){var t,n,r=bf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?bf(e.lastLimboFreeSnapshotVersion):ls.min();return void 0!==e.query.documents?(Wo(1===(n=e.query).documents.length),t=Nu(_u(nl(n.documents[0])))):t=function(e){return Nu(hl(e))}(e.query),new df(t,e.targetId,0,e.lastListenSequenceNumber,r,i,ks.fromBase64String(e.resumeToken))}function xf(e,t){var n,r=kf(t.snapshotVersion),i=kf(t.lastLimboFreeSnapshotVersion);n=au(t.target)?ll(e.Ht,t.target):fl(e.Ht,t.target);var a=t.resumeToken.toBase64();return new Ll(t.targetId,ru(t.target),r,a,t.sequenceNumber,i,n)}function If(e){var t=hl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Au(t,t.limit,"L"):t}function Ef(e,t){return new hf(t.largestBatchId,cl(e.Ht,t.overlayMutation))}function Tf(e,t){var n=t.path.lastSegment();return[e,_l(t.path.popLast()),n]}var Sf=function(){function e(){le(this,e)}return he(e,[{key:"getBundleMetadata",value:function(e,t){return Cf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:bf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Cf(e).put({bundleId:(n=t).id,createTime:kf(Xc(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Nf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:If(t.bundledQuery),readTime:bf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Nf(e).put(function(e){return{name:e.name,readTime:kf(Xc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Cf(e){return cf(e,Vl.store)}function Nf(e){return cf(e,ql.store)}var Af=function(){function e(t,n){le(this,e),this.O=t,this.userId=n}return he(e,[{key:"getOverlay",value:function(e,t){var n=this;return Rf(e).get(Tf(this.userId,t)).next((function(e){return e?Ef(n.O,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n){var a=new hf(t,n);i.push(r.Yt(e,a))})),$l.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(_l(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Rf(e).Gt(Kl.collectionPathOverlayIndex,i))})),$l.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=new Map,a=_l(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Rf(e).qt(Kl.collectionPathOverlayIndex,o).next((function(e){var t,n=ce(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ef(r.O,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=new Map,s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rf(e).Qt({index:Kl.collectionGroupOverlayIndex,range:s},(function(e,t,n){var s=Ef(a.O,t);o.size<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Yt",value:function(e,t){return Rf(e).put(function(e,t,n){var r=s(Tf(t,n.mutation.key),3),i=(r[0],r[1]),a=r[2];return new Kl(t,i,a,n.mutation.key.getCollectionGroup(),n.largestBatchId,ul(e.Ht,n.mutation))}(this.O,this.userId,t))}}],[{key:"Jt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Rf(e){return cf(e,Kl.store)}var Pf=function(){function e(){le(this,e)}return he(e,[{key:"Xt",value:function(e,t){this.Zt(e,t),t.te()}},{key:"Zt",value:function(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(_s(e.integerValue));else if("doubleValue"in e){var n=_s(e.doubleValue);isNaN(n)?this.ee(t,13):(this.ee(t,15),As(n)?t.ne(0):t.ne(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se("".concat(r.seconds||"")),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(xs(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ee(t,45),t.ne(i.latitude||0),t.ne(i.longitude||0)}else"mapValue"in e?Ls(e,Os)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):Bo()}},{key:"ie",value:function(e,t){this.ee(t,25),this.he(e,t)}},{key:"he",value:function(e,t){t.se(e)}},{key:"ue",value:function(e,t){var n=e.fields||{};this.ee(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ie(a,t),this.Zt(n[a],t)}}},{key:"ae",value:function(e,t){var n=e.values||[];this.ee(t,50);var r,i=ce(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Zt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ce",value:function(e,t){var n=this;this.ee(t,37),Ps.fromName(e).path.forEach((function(e){n.ee(t,60),n.he(e,t)}))}},{key:"ee",value:function(e,t){e.ne(t)}},{key:"re",value:function(e){e.ne(2)}}]),e}();function Of(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Df(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Of(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Pf.le=new Pf;var Lf=function(){function e(){le(this,e),this.buffer=new Uint8Array(1024),this.position=0}return he(e,[{key:"fe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.de(n.value),n=t.next();this._e()}},{key:"we",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.me(n.value),n=t.next();this.ge()}},{key:"ye",value:function(e){var t,n=ce(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.de(i);else if(i<2048)this.de(960|i>>>6),this.de(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.de(480|i>>>12),this.de(128|63&i>>>6),this.de(128|63&i);else{var a=r.codePointAt(0);this.de(240|a>>>18),this.de(128|63&a>>>12),this.de(128|63&a>>>6),this.de(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this._e()}},{key:"pe",value:function(e){var t,n=ce(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.me(i);else if(i<2048)this.me(960|i>>>6),this.me(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.me(480|i>>>12),this.me(128|63&i>>>6),this.me(128|63&i);else{var a=r.codePointAt(0);this.me(240|a>>>18),this.me(128|63&a>>>12),this.me(128|63&a>>>6),this.me(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ge()}},{key:"Ie",value:function(e){var t=this.Ee(e),n=Df(t);this.Te(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ae",value:function(e){var t=this.Ee(e),n=Df(t);this.Te(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Re",value:function(){this.Pe(255),this.Pe(255)}},{key:"be",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Ve",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"de",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"me",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"_e",value:function(){this.Pe(0),this.Pe(1)}},{key:"ge",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Te(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Te(1),this.buffer[this.position++]=~e}},{key:"Te",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Mf=function(){function e(t){le(this,e),this.Se=t}return he(e,[{key:"oe",value:function(e){this.Se.fe(e)}},{key:"se",value:function(e){this.Se.ye(e)}},{key:"ne",value:function(e){this.Se.Ie(e)}},{key:"te",value:function(){this.Se.Re()}}]),e}(),Ff=function(){function e(t){le(this,e),this.Se=t}return he(e,[{key:"oe",value:function(e){this.Se.we(e)}},{key:"se",value:function(e){this.Se.pe(e)}},{key:"ne",value:function(e){this.Se.Ae(e)}},{key:"te",value:function(){this.Se.be()}}]),e}(),Uf=function(){function e(){le(this,e),this.Se=new Lf,this.De=new Mf(this.Se),this.Ce=new Ff(this.Se)}return he(e,[{key:"seed",value:function(e){this.Se.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.De:this.Ce}},{key:"Ve",value:function(){return this.Se.Ve()}},{key:"reset",value:function(){this.Se.reset()}}]),e}(),jf=he((function e(t,n,r,i){le(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}));function Vf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Ps.comparator(e.documentKey,t.documentKey))?n:0!==(n=qf(e.arrayValue,t.arrayValue))?n:qf(e.directionalValue,t.directionalValue)}function qf(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var zf=function(){function e(){le(this,e),this.xe=new Bf}return he(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.xe.add(t),$l.resolve()}},{key:"getCollectionParents",value:function(e,t){return $l.resolve(this.xe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return $l.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return $l.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return $l.resolve(Pc())}},{key:"getFieldIndex",value:function(e,t){return $l.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return $l.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return $l.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return $l.resolve()}},{key:"updateIndexEntries",value:function(e,t){return $l.resolve()}}]),e}(),Bf=function(){function e(){le(this,e),this.index={}}return he(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xc(vs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new xc(vs.comparator)).toArray()}}]),e}(),Wf=function(){function e(t){le(this,e),this.user=t,this.ke=new Bf,this.uid=t.uid||""}return he(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.ke.add(t)}));var a={collectionId:r,parent:_l(i)};return Kf(e).put(a)}return $l.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[us(t),""],!1,!0);return Kf(e).qt(r).next((function(e){var r,i=ce(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(El(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Gf(e),r=function(e){return new zl(e.indexId,e.collectionGroup,e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]})))}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Gf(e),r=Qf(e),i=Hf(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t,n){return $l.resolve(Pc())}},{key:"getFieldIndex",value:function(e,t){return $l.resolve(null)}},{key:"Oe",value:function(e,t){var n,r=new Uf,i=ce(function(e){return e.fields.filter((function(e){return 2!==e.kind}))}(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Ne(a.kind);Pf.le.Xt(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Ve()}},{key:"Me",value:function(e){var t=new Uf;return Pf.le.Xt(e,t.Ne(0)),t.Ve()}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Gf(e),i=Qf(e);return(t?r.qt(zl.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return $l.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Zs(t.sequenceNumber,new eu(bf(t.readTime),new Ps(El(t.documentKey)),t.largestBatchId)):Zs.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new Js(ys.fromServerFormat(n),r)}));return new $s(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){return e.indexState.sequenceNumber-t.indexState.sequenceNumber})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Gf(e),a=Qf(e);return this.$e(e).next((function(e){return i.qt(zl.collectionGroupIndex,IDBKeyRange.bound(t,t)).next((function(t){return $l.forEach(t,(function(t){return a.put(function(e,t,n,r){return new Bl(e,t.uid||"",n,kf(r.readTime),_l(r.documentKey.path),r.largestBatchId)}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return $l.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?$l.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),$l.forEach(a,(function(r){return n.Fe(e,t,r).next((function(t){var a=n.Be(i,r);return t.isEqual(a)?$l.resolve():n.Le(e,i,t,a)}))}))}))}))}},{key:"Ue",value:function(e,t,n){return Hf(e).put(new Wl(n.indexId,this.uid,n.arrayValue,n.directionalValue,_l(t.key.path)))}},{key:"qe",value:function(e,t,n){return Hf(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,_l(t.key.path)])}},{key:"Fe",value:function(e,t,n){var r=Hf(e),i=new xc(Vf);return r.Qt({index:Wl.documentKeyIndex,range:IDBKeyRange.only([n.indexId,this.uid,_l(t.path)])},(function(e,r){i=i.add(new jf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"Be",value:function(e,t){var n=new xc(Vf),r=this.Oe(t,e);if(null==r)return n;var i=function(e){return e.fields.find((function(e){return 2===e.kind}))}(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Bs(a)){var o,s=ce(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new jf(t.indexId,e.key,this.Me(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new jf(t.indexId,e.key,new Uint8Array,r));return n}},{key:"Le",value:function(e,t,n,r){var i=this;jo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var a=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=Ec(a),u=Ec(o);s||u;){var c=!1,l=!1;if(s&&u){var f=n(s,u);f<0?l=!0:f>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=Ec(o)):l?(i(s),s=Ec(a)):(s=Ec(a),u=Ec(o))}}(n,r,Vf,(function(n){a.push(i.Ue(e,t,n))}),(function(n){a.push(i.qe(e,t,n))})),$l.waitFor(a)}},{key:"$e",value:function(e){var t=1;return Qf(e).Qt({index:Bl.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}}]),e}();function Kf(e){return cf(e,Ul.store)}function Hf(e){return cf(e,Wl.store)}function Gf(e){return cf(e,zl.store)}function Qf(e){return cf(e,Bl.store)}var Yf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xf=function(){function e(t,n,r){le(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return he(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function $f(e,t,n){var r=e.store(Nl.store),i=e.store(Al.store),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Qt({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Wo(1===s)})));var c,l=[],f=ce(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Al.key(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return $l.waitFor(a).next((function(){return l}))}function Jf(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Bo();t=e.noDocument}return JSON.stringify(t).length}Xf.DEFAULT_COLLECTION_PERCENTILE=10,Xf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xf.DEFAULT=new Xf(41943040,Xf.DEFAULT_COLLECTION_PERCENTILE,Xf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xf.DISABLED=new Xf(-1,0,0);var Zf=function(){function e(t,n,r,i){le(this,e),this.userId=t,this.O=n,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}return he(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return th(e).Qt({index:Nl.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=nh(e),o=th(e);return o.add({}).next((function(s){Wo("number"==typeof s);var u,c=new lf(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return ul(e.Ht,t)})),i=n.mutations.map((function(t){return ul(e.Ht,t)}));return new Nl(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.O,i.userId,c),f=[],h=new xc((function(e,t){return os(e.canonicalString(),t.canonicalString())})),d=ce(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=Al.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Al.PLACEHOLDER))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Ke[s]=c.keys()})),$l.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return th(e).get(t).next((function(e){return e?(Wo(e.userId===n.userId),wf(n.O,e)):null}))}},{key:"Ge",value:function(e,t){var n=this;return this.Ke[t]?$l.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Ke[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return th(e).Qt({index:Nl.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(Wo(t.batchId>=r),a=wf(n.O,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return th(e).Qt({index:Nl.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return th(e).qt(Nl.userMutationsIndex,n).next((function(e){return e.map((function(e){return wf(t.O,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Al.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return nh(e).Qt({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=El(l);if(c===n.userId&&t.path.isEqual(h))return th(e).get(f).next((function(e){if(!e)throw Bo();Wo(e.userId===n.userId),a.push(wf(n.O,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new xc(os),i=[];return t.forEach((function(t){var a=Al.prefixForPath(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=nh(e).Qt({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=El(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),$l.waitFor(i).next((function(){return n.je(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Al.prefixForPath(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new xc(os);return nh(e).Qt({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=El(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.je(e,u)}))}},{key:"je",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(th(e).get(t).next((function(e){if(null===e)throw Bo();Wo(e.userId===n.userId),r.push(wf(n.O,e))})))})),$l.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return $f(e.zt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Qe(t.batchId)})),$l.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Qe",value:function(e){delete this.Ke[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return $l.resolve();var r=IDBKeyRange.lowerBound(Al.prefixForUser(t.userId)),i=[];return nh(e).Qt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=El(e[1]);i.push(a)}else r.done()})).next((function(){Wo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return eh(e,this.userId,t)}},{key:"We",value:function(e){var t=this;return rh(e).get(this.userId).next((function(e){return e||new Cl(t.userId,-1,"")}))}}],[{key:"Jt",value:function(t,n,r,i){return Wo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function eh(e,t,n){var r=Al.prefixForPath(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return nh(e).Qt({range:a,jt:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function th(e){return cf(e,Nl.store)}function nh(e){return cf(e,Al.store)}function rh(e){return cf(e,Cl.store)}var ih=function(){function e(t){le(this,e),this.ze=t}return he(e,[{key:"next",value:function(){return this.ze+=2,this.ze}}],[{key:"He",value:function(){return new e(0)}},{key:"Je",value:function(){return new e(-1)}}]),e}(),ah=function(){function e(t,n){le(this,e),this.referenceDelegate=t,this.O=n}return he(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Ye(e).next((function(n){var r=new ih(n.highestTargetId);return n.highestTargetId=r.next(),t.Xe(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Ye(e).next((function(e){return ls.fromTimestamp(new cs(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Ye(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Ye(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Xe(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Ze(e,t).next((function(){return n.Ye(e).next((function(r){return r.targetCount+=1,n.tn(t,r),n.Xe(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Ze(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return oh(e).delete(t.targetId)})).next((function(){return n.Ye(e)})).next((function(t){return Wo(t.targetCount>0),t.targetCount-=1,n.Xe(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return oh(e).Qt((function(o,s){var u=_f(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return $l.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return oh(e).Qt((function(e,n){var r=_f(n);t(r)}))}},{key:"Ye",value:function(e){return sh(e).get(Fl.key).next((function(e){return Wo(null!==e),e}))}},{key:"Xe",value:function(e,t){return sh(e).put(Fl.key,t)}},{key:"Ze",value:function(e,t){return oh(e).put(xf(this.O,t))}},{key:"tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Ye(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ru(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return oh(e).Qt({range:r,index:Ll.queryTargetsIndexName},(function(e,n,r){var a=_f(n);iu(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=uh(e);return t.forEach((function(t){var o=_l(t.path);i.push(a.put(new Ml(n,o))),i.push(r.referenceDelegate.addReference(e,n,t))})),$l.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=uh(e);return $l.forEach(t,(function(t){var a=_l(t.path);return $l.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=uh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=uh(e),i=Pc();return r.Qt({range:n,jt:!0},(function(e,t,n){var r=El(e[1]),a=new Ps(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=_l(t.path),r=IDBKeyRange.bound([n],[us(n)],!1,!0),i=0;return uh(e).Qt({index:Ml.documentTargetsIndex,jt:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Tt",value:function(e,t){return oh(e).get(t).next((function(e){return e?_f(e):null}))}}]),e}();function oh(e){return cf(e,Ll.store)}function sh(e){return cf(e,Fl.store)}function uh(e){return cf(e,Ml.store)}function ch(e){return lh.apply(this,arguments)}function lh(){return lh=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ho.FAILED_PRECONDITION&&t.message===Yl){e.next=2;break}throw t;case 2:jo("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),lh.apply(this,arguments)}function fh(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=os(r,o);return 0===c?os(i,u):c}var hh=function(){function e(t){le(this,e),this.en=t,this.buffer=new xc(fh),this.nn=0}return he(e,[{key:"sn",value:function(){return++this.nn}},{key:"rn",value:function(e){var t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();fh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),dh=function(){function e(t,n){le(this,e),this.garbageCollector=t,this.asyncQueue=n,this.on=!1,this.cn=null}return he(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}},{key:"stop",value:function(){this.cn&&(this.cn.cancel(),this.cn=null)}},{key:"started",get:function(){return null!==this.cn}},{key:"un",value:function(e){var t=this,n=this.on?3e5:6e4;jo("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,$(Z().mark((function n(){return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.cn=null,t.on=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!nf(n.t0)){n.next=12;break}jo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,ch(n.t0);case 14:return n.next=16,t.un(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),ph=function(){function e(t,n){le(this,e),this.an=t,this.params=n}return he(e,[{key:"calculateTargetCount",value:function(e,t){return this.an.hn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return $l.resolve(rs.A);var r=new hh(t);return this.an.forEachTarget(e,(function(e){return r.rn(e.sequenceNumber)})).next((function(){return n.an.ln(e,(function(e){return r.rn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.an.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.an.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(jo("LruGarbageCollector","Garbage collection skipped; disabled"),$l.resolve(Yf)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(jo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Yf):n.fn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.an.getCacheSize(e)}},{key:"fn",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(jo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Uo()<=lt.DEBUG&&jo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),$l.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),vh=function(){function e(t,n){le(this,e),this.db=t,this.garbageCollector=function(e,t){return new ph(e,t)}(this,n)}return he(e,[{key:"hn",value:function(e){var t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"dn",value:function(e){var t=0;return this.ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"ln",value:function(e,t){return this._n(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return mh(e,n)}},{key:"removeReference",value:function(e,t,n){return mh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return mh(e,t)}},{key:"wn",value:function(e,t){return function(e,t){var n=!1;return rh(e).Wt((function(r){return eh(e,r,t).next((function(e){return e&&(n=!0),$l.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this._n(e,(function(o,s){if(s<=t){var u=n.wn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ls.min()),uh(e).delete([0,_l(o.path)])}))}));i.push(u)}})).next((function(){return $l.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return mh(e,t)}},{key:"_n",value:function(e,t){var n,r=uh(e),i=rs.A;return r.Qt({index:Ml.documentTargetsIndex},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==rs.A&&t(new Ps(El(n)),i),i=c,n=u):i=rs.A})).next((function(){i!==rs.A&&t(new Ps(El(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function mh(e,t){return uh(e).put(function(e,t){return new Ml(0,_l(e.path),t)}(t,e.currentSequenceNumber))}var yh=function(){function e(t,n){le(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return he(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=ce(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){hs(this.inner,(function(t,n){var r,i=ce(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ds(this.inner)}}]),e}(),gh=function(){function e(){le(this,e),this.changes=new yh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return he(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Xs.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?$l.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),kh=function(){function e(t){le(this,e),this.O=t}return he(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return _h(e).put(xh(t),n)}},{key:"removeEntry",value:function(e,t){var n=_h(e),r=xh(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.mn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return _h(e).get(xh(t)).next((function(e){return n.gn(t,e)}))}},{key:"yn",value:function(e,t){var n=this;return _h(e).get(xh(t)).next((function(e){return{document:n.gn(t,e),size:Jf(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=Sc();return this.pn(e,t,(function(e,t){var i=n.gn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"In",value:function(e,t){var n=this,r=Sc(),i=new bc(Ps.comparator);return this.pn(e,t,(function(e,t){var a=n.gn(e,t);r=r.insert(e,a),i=i.insert(e,Jf(t))})).next((function(){return{documents:r,En:i}}))}},{key:"pn",value:function(e,t,n){if(t.isEmpty())return $l.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),a=i.getNext();return _h(e).Qt({range:r},(function(e,t,r){for(var o=Ps.fromSegments(e);a&&Ps.comparator(a,o)<0;)n(a,null),a=i.getNext();a&&a.isEqual(o)&&(n(a,t),a=i.hasNext()?i.getNext():null),a?r.Ut(a.path.toArray()):r.done()})).next((function(){for(;a;)n(a,null),a=i.hasNext()?i.getNext():null}))}},{key:"getAll",value:function(e,t,n){var r=this,i=Sc(),a=t.length+1,o={};if(n.isEqual(ls.min())){var s=t.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.toArray(),c=yf(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index=Ol.collectionReadTimeIndex}return _h(e).Qt(o,(function(e,n,o){if(e.length===a){var s=r.gn(Ps.fromSegments(e),n);t.isPrefixOf(s.key.path)?i=i.insert(s.key,s):o.done()}})).next((function(){return i}))}},{key:"newChangeBuffer",value:function(e){return new bh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return wh(e).get(Dl.key).next((function(e){return Wo(!!e),e}))}},{key:"mn",value:function(e,t){return wh(e).put(Dl.key,t)}},{key:"gn",value:function(e,t){if(t){var n=vf(this.O,t);if(!n.isNoDocument()||!n.version.isEqual(ls.min()))return n}return Xs.newInvalidDocument(e)}}]),e}(),bh=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this)).Tn=e,i.trackRemovals=r,i.An=new yh((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return he(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new xc((function(e,t){return os(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.An.get(a);if(o.isValidDocument()){var u=mf(t.Tn.O,o);i=i.add(a.path.popLast());var c=Jf(u);r+=c-s,n.push(t.Tn.addEntry(e,a,u))}else if(r-=s,t.trackRemovals){var l=mf(t.Tn.O,o.convertToNoDocument(ls.min()));n.push(t.Tn.addEntry(e,a,l))}else n.push(t.Tn.removeEntry(e,a))})),i.forEach((function(r){n.push(t.Tn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Tn.updateMetadata(e,r)),$l.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Tn.yn(e,t).next((function(e){return n.An.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Tn.In(e,t).next((function(e){var t=e.documents;return e.En.forEach((function(e,t){n.An.set(e,t)})),t}))}}]),n}(gh);function wh(e){return cf(e,Dl.store)}function _h(e){return cf(e,Ol.store)}function xh(e){return e.path.toArray()}var Ih=function(){function e(t){le(this,e),this.O=t}return he(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new Jl("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Sl.store)}(e),function(e){e.createObjectStore(Cl.store,{keyPath:Cl.keyPath}),e.createObjectStore(Nl.store,{keyPath:Nl.keyPath,autoIncrement:!0}).createIndex(Nl.userMutationsIndex,Nl.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Al.store)}(e),Eh(e),function(e){e.createObjectStore(Ol.store)}(e));var o=$l.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Ml.store),e.deleteObjectStore(Ll.store),e.deleteObjectStore(Fl.store)}(e),Eh(e)),o=o.next((function(){return function(e){var t=e.store(Fl.store),n=new Fl(0,0,ls.min().toTimestamp(),0);return t.put(Fl.key,n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store(Nl.store).qt().next((function(n){e.deleteObjectStore(Nl.store),e.createObjectStore(Nl.store,{keyPath:Nl.keyPath,autoIncrement:!0}).createIndex(Nl.userMutationsIndex,Nl.userMutationsKeyPath,{unique:!0});var r=t.store(Nl.store),i=n.map((function(e){return r.put(e)}));return $l.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore(jl.store,{keyPath:jl.keyPath})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Rn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore(Dl.store)}(e),i.Pn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.bn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.vn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Ol.store);t.createIndex(Ol.readTimeIndex,Ol.readTimeIndexPath,{unique:!1}),t.createIndex(Ol.collectionReadTimeIndex,Ol.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return i.Vn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore(Vl.store,{keyPath:Vl.keyPath})}(e),function(e){e.createObjectStore(ql.store,{keyPath:ql.keyPath})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore(Kl.store,{keyPath:Kl.keyPath});t.createIndex(Kl.collectionPathOverlayIndex,Kl.collectionPathOverlayIndexPath,{unique:!1}),t.createIndex(Kl.collectionGroupOverlayIndex,Kl.collectionGroupOverlayIndexPath,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){!function(e){e.createObjectStore(zl.store,{keyPath:zl.keyPath,autoIncrement:!0}).createIndex(zl.collectionGroupIndex,zl.collectionGroupIndexPath,{unique:!1}),e.createObjectStore(Bl.store,{keyPath:Bl.keyPath}).createIndex(Bl.sequenceNumberIndex,Bl.sequenceNumberIndexPath,{unique:!1}),e.createObjectStore(Wl.store,{keyPath:Wl.keyPath}).createIndex(Wl.documentKeyIndex,Wl.documentKeyIndexPath,{unique:!1})}(e)}))),o}},{key:"Pn",value:function(e){var t=0;return e.store(Ol.store).Qt((function(e,n){t+=Jf(n)})).next((function(){var n=new Dl(t);return e.store(Dl.store).put(Dl.key,n)}))}},{key:"Rn",value:function(e){var t=this,n=e.store(Cl.store),r=e.store(Nl.store);return n.qt().next((function(n){return $l.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt(Nl.userMutationsIndex,i).next((function(r){return $l.forEach(r,(function(r){Wo(r.userId===n.userId);var i=wf(t.O,r);return $f(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"bn",value:function(e){var t=e.store(Ml.store),n=e.store(Ol.store);return e.store(Fl.store).get(Fl.key).next((function(e){var r=[];return n.Qt((function(n,i){var a=new vs(n),o=function(e){return[0,_l(e)]}(a);r.push(t.get(o).next((function(n){return n?$l.resolve():function(n){return t.put(new Ml(0,_l(n),e.highestListenSequenceNumber))}(a)})))})).next((function(){return $l.waitFor(r)}))}))}},{key:"vn",value:function(e,t){e.createObjectStore(Ul.store,{keyPath:Ul.keyPath});var n=t.store(Ul.store),r=new Bf,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:_l(i)})}};return t.store(Ol.store).Qt({jt:!0},(function(e,t){var n=new vs(e);return i(n.popLast())})).next((function(){return t.store(Al.store).Qt({jt:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],El(r));return i(a.popLast())}))}))}},{key:"Vn",value:function(e){var t=this,n=e.store(Ll.store);return n.Qt((function(e,r){var i=_f(r),a=xf(t.O,i);return n.put(a)}))}}]),e}();function Eh(e){e.createObjectStore(Ml.store,{keyPath:Ml.keyPath}).createIndex(Ml.documentTargetsIndex,Ml.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Ll.store,{keyPath:Ll.keyPath}).createIndex(Ll.queryTargetsIndexName,Ll.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Fl.store)}var Th="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sh=function(){function e(t,n,r,i,a,o,s,u,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if(le(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Sn=a,this.window=o,this.document=s,this.Dn=c,this.Cn=l,this.schemaVersion=f,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=function(e){return Promise.resolve()},!e.Vt())throw new Go(Ho.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new vh(this,i),this.Bn=n+"main",this.O=new pf(u),this.Ln=new Zl(this.Bn,this.schemaVersion,new Ih(this.O)),this.Un=new ah(this.referenceDelegate,this.O),this.qn=function(e){return new kh(e)}(this.O),this.Kn=new Sf,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===l&&Vo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return he(e,[{key:"start",value:function(){var e=this;return this.jn().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Go(Ho.FAILED_PRECONDITION,Th);return e.Qn(),e.Wn(),e.zn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Un.getHighestSequenceNumber(t)}))})).then((function(t){e.Nn=new rs(t,e.Dn)})).then((function(){e.xn=!0})).catch((function(t){return e.Ln&&e.Ln.close(),Promise.reject(t)}))}},{key:"Hn",value:function(e){var t=this;return this.Fn=function(){var n=$(Z().mark((function n(r){return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ln.Mt(function(){var t=$(Z().mark((function t(n){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget($(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.jn();case 4:case"end":return e.stop()}}),e)})))))}},{key:"jn",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Nh(t).put(new jl(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Jn(t).next((function(t){t||(e.isPrimary=!1,e.Sn.enqueueRetryable((function(){return e.Fn(!1)})))}))})).next((function(){return e.Yn(t)})).next((function(n){return e.isPrimary&&!n?e.Xn(t).next((function(){return!1})):!!n&&e.Zn(t).next((function(){return!0}))}))})).catch((function(t){if(nf(t))return jo("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return jo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Sn.enqueueRetryable((function(){return e.Fn(t)})),e.isPrimary=t}))}},{key:"Jn",value:function(e){var t=this;return Ch(e).get(Sl.key).next((function(e){return $l.resolve(t.ts(e))}))}},{key:"es",value:function(e){return Nh(e).delete(this.clientId)}},{key:"ns",value:function(){var e=$(Z().mark((function e(){var t,n,r,i,a=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.ss(this.$n,18e5)){e.next=6;break}return this.$n=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=cf(e,jl.store);return t.qt().next((function(e){var n=a.rs(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return $l.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Gn){n=ce(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Gn.removeItem(this.os(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"zn",value:function(){var e=this;this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.jn().then((function(){return e.ns()})).then((function(){return e.zn()}))}))}},{key:"ts",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Yn",value:function(e){var t=this;return this.Cn?$l.resolve(!0):Ch(e).get(Sl.key).next((function(n){if(null!==n&&t.ss(n.leaseTimestampMs,5e3)&&!t.cs(n.ownerId)){if(t.ts(n)&&t.networkEnabled)return!0;if(!t.ts(n)){if(!n.allowTabSynchronization)throw new Go(Ho.FAILED_PRECONDITION,Th);return!1}}return!(!t.networkEnabled||!t.inForeground)||Nh(e).qt().next((function(e){return void 0===t.rs(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&jo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=$(Z().mark((function e(){var t=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.xn=!1,this.us(),this.Mn&&(this.Mn.cancel(),this.Mn=null),this.hs(),this.ls(),e.next=7,this.Ln.runTransaction("shutdown","readwrite",[Sl.store,jl.store],(function(e){var n=new uf(e,rs.A);return t.Xn(n).next((function(){return t.es(n)}))}));case 7:this.Ln.close(),this.fs();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"rs",value:function(e,t){var n=this;return e.filter((function(e){return n.ss(e.updateTimeMs,t)&&!n.cs(e.clientId)}))}},{key:"ds",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Nh(t).qt().next((function(t){return e.rs(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.xn}},{key:"getMutationQueue",value:function(e,t){return Zf.Jt(e,this.O,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getIndexManager",value:function(e){return new Wf(e)}},{key:"getDocumentOverlayCache",value:function(e){return Af.Jt(this.O,e)}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;jo("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=13===(i=this.schemaVersion)?Ql:12===i?Gl:11===i?Hl:void Bo();return this.Ln.runTransaction(e,o,s,(function(i){return a=new uf(i,r.Nn?r.Nn.next():rs.A),"readwrite-primary"===t?r.Jn(a).next((function(e){return!!e||r.Yn(a)})).next((function(t){if(!t)throw Vo("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Sn.enqueueRetryable((function(){return r.Fn(!1)})),new Go(Ho.FAILED_PRECONDITION,Yl);return n(a)})).next((function(e){return r.Zn(a).next((function(){return e}))})):r._s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"_s",value:function(e){var t=this;return Ch(e).get(Sl.key).next((function(e){if(null!==e&&t.ss(e.leaseTimestampMs,5e3)&&!t.cs(e.ownerId)&&!t.ts(e)&&!(t.Cn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Go(Ho.FAILED_PRECONDITION,Th)}))}},{key:"Zn",value:function(e){var t=new Sl(this.clientId,this.allowTabSynchronization,Date.now());return Ch(e).put(Sl.key,t)}},{key:"Xn",value:function(e){var t=this,n=Ch(e);return n.get(Sl.key).next((function(e){return t.ts(e)?(jo("IndexedDbPersistence","Releasing primary lease."),n.delete(Sl.key)):$l.resolve()}))}},{key:"ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Vo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Qn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=function(){e.Sn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.jn()}))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}},{key:"hs",value:function(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}},{key:"Wn",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=function(){t.us(),De()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Sn.enterRestrictedMode(!0),t.Sn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.kn))}},{key:"ls",value:function(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}},{key:"cs",value:function(e){var t;try{var n=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return jo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Vo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"us",value:function(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(Dn){Vo("Failed to set zombie client id.",Dn)}}},{key:"fs",value:function(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(Dn){}}},{key:"os",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"Vt",value:function(){return Zl.Vt()}}]),e}();function Ch(e){return cf(e,Sl.store)}function Nh(e){return cf(e,jl.store)}function Ah(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Rh=he((function e(t,n){le(this,e),this.progress=t,this.ws=n})),Ph=function(){function e(t,n,r){le(this,e),this.qn=t,this.gs=n,this.indexManager=r}return he(e,[{key:"ys",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.ps(e,t,r)}))}},{key:"ps",value:function(e,t,n){return this.qn.getEntry(e,t).next((function(e){var t,r=ce(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"Is",value:function(e,t){e.forEach((function(e,n){var r,i=ce(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Es",value:function(e,t){var n=this;return this.qn.getEntries(e,t).next((function(t){return n.Ts(e,t).next((function(){return t}))}))}},{key:"Ts",value:function(e,t){var n=this;return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.Is(t,e)}))}},{key:"As",value:function(e,t,n){return function(e){return Ps.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Rs(e,t.path):Su(t)?this.Ps(e,t,n):this.bs(e,t,n)}},{key:"Rs",value:function(e,t){return this.ys(e,new Ps(t)).next((function(e){var t=Nc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ps",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Nc();return this.indexManager.getCollectionParents(e,i).next((function(o){return $l.forEach(o,(function(o){var s=function(e,t){return new bu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.bs(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"bs",value:function(e,t,n){var r,i=this;return this.qn.getAll(e,t.path,n).next((function(n){return r=n,i.gs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=ce(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=ce(a.mutations);try{for(o.s();!(i=o.n()).done;){var s=i.value,u=s.key,c=r.get(u);null==c&&(c=Xs.newInvalidDocument(u),r=r.insert(u,c)),ic(s,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Du(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Oh=function(){function e(t,n,r,i){le(this,e),this.targetId=t,this.fromCache=n,this.vs=r,this.Vs=i}return he(e,null,[{key:"Ss",value:function(t,n){var r,i=Pc(),a=Pc(),o=ce(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Dh=function(){function e(){le(this,e)}return he(e,[{key:"Ds",value:function(e){this.Cs=e}},{key:"As",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(ls.min())?this.Ns(e,t):this.Cs.Es(e,r).next((function(a){var o=i.xs(t,a);return(xu(t)||Iu(t))&&i.ks(t.limitType,o,r,n)?i.Ns(e,t):(Uo()<=lt.DEBUG&&jo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ou(t)),i.Cs.As(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"xs",value:function(e,t){var n=new xc(Lu(e));return t.forEach((function(t,r){Du(e,r)&&(n=n.add(r))})),n}},{key:"ks",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ns",value:function(e,t){return Uo()<=lt.DEBUG&&jo("QueryEngine","Using full collection scan to execute query:",Ou(t)),this.Cs.As(e,t,ls.min())}}]),e}(),Lh=function(){function e(t,n,r,i){le(this,e),this.persistence=t,this.Os=n,this.O=i,this.Ms=new bc(os),this.$s=new yh((function(e){return ru(e)}),iu),this.Fs=ls.min(),this.Bs=t.getRemoteDocumentCache(),this.Un=t.getTargetCache(),this.Kn=t.getBundleCache(),this.Ls(r)}return he(e,[{key:"Ls",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new Ph(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ms)}))}}]),e}();function Mh(e,t,n,r){return new Lh(e,t,n,r)}function Fh(e,t){return Uh.apply(this,arguments)}function Uh(){return Uh=$(Z().mark((function e(t,n){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ko(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.gs.getAllMutationBatches(e).next((function(i){return t=i,r.Ls(n),r.gs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=Pc(),u=ce(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,f=ce(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;s=s.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=ce(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=ce(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.Us.Es(e,s).next((function(e){return{qs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Uh.apply(this,arguments)}function jh(e,t){var n=Ko(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Bs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=$l.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Wo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.gs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}function Vh(e){var t=Ko(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Un.getLastRemoteSnapshotVersion(e)}))}function qh(e,t){var n=Ko(e),r=t.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.Ms;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Un.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Un.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(ks.EMPTY_BYTE_STRING,ls.min()).withLastLimboFreeSnapshotVersion(ls.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Un.updateTargetData(e,c))}}));var s=Sc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(zh(e,a,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(ls.min())){var u=n.Un.getLastRemoteSnapshotVersion(e).next((function(t){return n.Un.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return $l.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.Us.Ts(e,s)})).next((function(){return s}))})).then((function(e){return n.Ms=i,e}))}function zh(e,t,n){var r=Pc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Sc();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(ls.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):jo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Bh(e,t){var n=Ko(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.gs.getNextMutationBatchAfterBatchId(e,t)}))}function Wh(e,t){var n=Ko(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Un.getTargetData(e,t).next((function(i){return i?(r=i,$l.resolve(r)):n.Un.allocateTargetId(e).next((function(i){return r=new df(t,i,0,e.currentSequenceNumber),n.Un.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.$s.set(t,e.targetId)),e}))}function Kh(e,t,n){return Hh.apply(this,arguments)}function Hh(){return Hh=$(Z().mark((function e(t,n,r){var i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ko(t),a=i.Ms.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),nf(e.t1)){e.next=12;break}throw e.t1;case 12:jo("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ms=i.Ms.remove(n),i.$s.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Hh.apply(this,arguments)}function Gh(e,t,n){var r=Ko(e),i=ls.min(),a=Pc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Ko(e),i=r.$s.get(n);return void 0!==i?$l.resolve(r.Ms.get(i)):r.Un.getTargetData(t,n)}(r,e,Nu(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Os.As(e,t,n?i:ls.min(),n?a:Pc())})).next((function(e){return{documents:e,Ks:a}}))}))}function Qh(e,t){var n=Ko(e),r=Ko(n.Un),i=n.Ms.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Tt(e,t).next((function(e){return e?e.target:null}))}))}function Yh(e){var t=Ko(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Ko(e),i=Sc(),a=yf(n),o=_h(t),s=IDBKeyRange.lowerBound(a,!0);return o.Qt({index:Ol.readTimeIndex,range:s},(function(e,t){var n=vf(r.O,t);i=i.insert(n.key,n),a=t.readTime})).next((function(){return{ws:i,readTime:gf(a)}}))}(t.Bs,e,t.Fs)})).then((function(e){var n=e.ws,r=e.readTime;return t.Fs=r,n}))}function Xh(e){return $h.apply(this,arguments)}function $h(){return $h=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ko(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=_h(e),n=ls.min();return t.Qt({index:Ol.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=gf(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.Fs=e})));case 2:case"end":return e.stop()}}),e)}))),$h.apply(this,arguments)}function Jh(e,t,n,r){return Zh.apply(this,arguments)}function Zh(){return Zh=$(Z().mark((function e(t,n,r,i){var a,o,s,u,c,l,f,h,d,p;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Ko(t),o=Pc(),s=Sc(),u=ce(r);try{for(u.s();!(c=u.n()).done;)l=c.value,f=n.Gs(l.metadata.name),l.document&&(o=o.add(f)),(h=n.js(l)).setReadTime(n.Qs(l.metadata.readTime)),s=s.insert(f,h)}catch(v){u.e(v)}finally{u.f()}return d=a.Bs.newChangeBuffer({trackRemovals:!0}),e.next=7,Wh(a,function(e){return Nu(_u(vs.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return zh(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Un.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Un.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.Us.Ts(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),Zh.apply(this,arguments)}function ed(e,t){return td.apply(this,arguments)}function td(){return td=$(Z().mark((function e(t,n){var r,i,a,o=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Pc(),e.next=3,Wh(t,Nu(If(n.bundledQuery)));case 3:return i=e.sent,a=Ko(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Xc(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Kn.saveNamedQuery(e,n);var o=i.withResumeToken(ks.EMPTY_BYTE_STRING,t);return a.Ms=a.Ms.insert(o.targetId,o),a.Un.updateTargetData(e,o).next((function(){return a.Un.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Un.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Kn.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),td.apply(this,arguments)}var nd=function(){function e(t){le(this,e),this.O=t,this.Ws=new Map,this.zs=new Map}return he(e,[{key:"getBundleMetadata",value:function(e,t){return $l.resolve(this.Ws.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Ws.set(t.id,{id:(n=t).id,version:n.version,createTime:Xc(n.createTime)}),$l.resolve()}},{key:"getNamedQuery",value:function(e,t){return $l.resolve(this.zs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.zs.set(t.name,function(e){return{name:e.name,query:If(e.bundledQuery),readTime:Xc(e.readTime)}}(t)),$l.resolve()}}]),e}(),rd=function(){function e(){le(this,e),this.overlays=new bc(Ps.comparator),this.Hs=new Map}return he(e,[{key:"getOverlay",value:function(e,t){return $l.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n){r.Yt(e,t,n)})),$l.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Hs.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Hs.delete(n)),$l.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=new Map,i=t.length+1,a=new Ps(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return $l.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new bc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=new Map,i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=new Map,c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(t,e)})),!(u.size>=r)););return $l.resolve(u)}},{key:"Yt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);null!==r&&this.Hs.get(r.largestBatchId).delete(n.key),this.overlays=this.overlays.insert(n.key,new hf(t,n));var i=this.Hs.get(t);void 0===i&&(i=new Set,this.Hs.set(t,i)),i.add(n.key)}}}]),e}(),id=function(){function e(){le(this,e),this.Js=new xc(ad.Ys),this.Xs=new xc(ad.Zs)}return he(e,[{key:"isEmpty",value:function(){return this.Js.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ad(e,t);this.Js=this.Js.add(n),this.Xs=this.Xs.add(n)}},{key:"ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ei(new ad(e,t))}},{key:"ni",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"si",value:function(e){var t=this,n=new Ps(new vs([])),r=new ad(n,e),i=new ad(n,e+1),a=[];return this.Xs.forEachInRange([r,i],(function(e){t.ei(e),a.push(e.key)})),a}},{key:"ii",value:function(){var e=this;this.Js.forEach((function(t){return e.ei(t)}))}},{key:"ei",value:function(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}},{key:"ri",value:function(e){var t=new Ps(new vs([])),n=new ad(t,e),r=new ad(t,e+1),i=Pc();return this.Xs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ad(e,0),n=this.Js.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ad=function(){function e(t,n){le(this,e),this.key=t,this.oi=n}return he(e,null,[{key:"Ys",value:function(e,t){return Ps.comparator(e.key,t.key)||os(e.oi,t.oi)}},{key:"Zs",value:function(e,t){return os(e.oi,t.oi)||Ps.comparator(e.key,t.key)}}]),e}(),od=function(){function e(t,n){le(this,e),this.indexManager=t,this.referenceDelegate=n,this.gs=[],this.ci=1,this.ui=new xc(ad.Ys)}return he(e,[{key:"checkEmpty",value:function(e){return $l.resolve(0===this.gs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ci;this.ci++,this.gs.length>0&&this.gs[this.gs.length-1];var a=new lf(i,t,n,r);this.gs.push(a);var o,s=ce(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ui=this.ui.add(new ad(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return $l.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return $l.resolve(this.ai(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.hi(n),i=r<0?0:r;return $l.resolve(this.gs.length>i?this.gs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return $l.resolve(0===this.gs.length?-1:this.ci-1)}},{key:"getAllMutationBatches",value:function(e){return $l.resolve(this.gs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ad(t,0),i=new ad(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],(function(e){var t=n.ai(e.oi);a.push(t)})),$l.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new xc(os);return t.forEach((function(e){var t=new ad(e,0),i=new ad(e,Number.POSITIVE_INFINITY);n.ui.forEachInRange([t,i],(function(e){r=r.add(e.oi)}))})),$l.resolve(this.li(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Ps.isDocumentKey(i)||(i=i.child(""));var a=new ad(new Ps(i),0),o=new xc(os);return this.ui.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.oi)),!0)}),a),$l.resolve(this.li(o))}},{key:"li",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ai(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Wo(0===this.fi(t.batchId,"removed")),this.gs.shift();var r=this.ui;return $l.forEach(t.mutations,(function(i){var a=new ad(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ui=r}))}},{key:"Qe",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ad(t,0),r=this.ui.firstAfterOrEqual(n);return $l.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.gs.length,$l.resolve()}},{key:"fi",value:function(e,t){return this.hi(e)}},{key:"hi",value:function(e){return 0===this.gs.length?0:e-this.gs[0].batchId}},{key:"ai",value:function(e){var t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}]),e}(),sd=function(){function e(t){le(this,e),this.di=t,this.docs=new bc(Ps.comparator),this.size=0}return he(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.di(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return $l.resolve(n?n.document.mutableCopy():Xs.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Sc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Xs.newInvalidDocument(e))})),$l.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=Sc(),i=new Ps(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||u.readTime.compareTo(n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return $l.resolve(r)}},{key:"_i",value:function(e,t){return $l.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ud(this)}},{key:"getSize",value:function(e){return $l.resolve(this.size)}}]),e}(),ud=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this)).Tn=e,r}return he(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Tn.addEntry(e,i)):t.Tn.removeEntry(r)})),$l.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Tn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Tn.getEntries(e,t)}}]),n}(gh),cd=function(){function e(t){le(this,e),this.persistence=t,this.wi=new yh((function(e){return ru(e)}),iu),this.lastRemoteSnapshotVersion=ls.min(),this.highestTargetId=0,this.mi=0,this.gi=new id,this.targetCount=0,this.yi=ih.He()}return he(e,[{key:"forEachTarget",value:function(e,t){return this.wi.forEach((function(e,n){return t(n)})),$l.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return $l.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return $l.resolve(this.mi)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.yi.next(),$l.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.mi&&(this.mi=t),$l.resolve()}},{key:"Ze",value:function(e){this.wi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.yi=new ih(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Ze(t),this.targetCount+=1,$l.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Ze(t),$l.resolve()}},{key:"removeTargetData",value:function(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,$l.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.wi.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.wi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),$l.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return $l.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.wi.get(t)||null;return $l.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.gi.ti(t,n),$l.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.gi.ni(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),$l.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.gi.si(t),$l.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.gi.ri(t);return $l.resolve(n)}},{key:"containsKey",value:function(e,t){return $l.resolve(this.gi.containsKey(t))}}]),e}(),ld=function(){function e(t,n){var r=this;le(this,e),this.pi={},this.overlays={},this.Nn=new rs(0),this.xn=!1,this.xn=!0,this.referenceDelegate=t(this),this.Un=new cd(this),this.indexManager=new zf,this.qn=new sd((function(e){return r.referenceDelegate.Ii(e)})),this.O=new pf(n),this.Kn=new nd(this.O)}return he(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.xn=!1,Promise.resolve()}},{key:"started",get:function(){return this.xn}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new rd,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.pi[e.toKey()];return n||(n=new od(t,this.referenceDelegate),this.pi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Un}},{key:"getRemoteDocumentCache",value:function(){return this.qn}},{key:"getBundleCache",value:function(){return this.Kn}},{key:"runTransaction",value:function(e,t,n){var r=this;jo("MemoryPersistence","Starting transaction:",e);var i=new fd(this.Nn.next());return this.referenceDelegate.Ei(),n(i).next((function(e){return r.referenceDelegate.Ti(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ai",value:function(e,t){return $l.or(Object.values(this.pi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),fd=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return he(n)}(Xl),hd=function(){function e(t){le(this,e),this.persistence=t,this.Ri=new id,this.Pi=null}return he(e,[{key:"vi",get:function(){if(this.Pi)return this.Pi;throw Bo()}},{key:"addReference",value:function(e,t,n){return this.Ri.addReference(n,t),this.vi.delete(n.toString()),$l.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Ri.removeReference(n,t),this.vi.add(n.toString()),$l.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.vi.add(t.toString()),$l.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Ri.si(t.targetId).forEach((function(e){return n.vi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ei",value:function(){this.Pi=new Set}},{key:"Ti",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $l.forEach(this.vi,(function(r){var i=Ps.fromPath(r);return t.Vi(e,i).next((function(e){e||n.removeEntry(i,ls.min())}))})).next((function(){return t.Pi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Vi(e,t).next((function(e){e?n.vi.delete(t.toString()):n.vi.add(t.toString())}))}},{key:"Ii",value:function(e){return 0}},{key:"Vi",value:function(e,t){var n=this;return $l.or([function(){return $l.resolve(n.Ri.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ai(e,t)}])}}],[{key:"bi",value:function(t){return new e(t)}}]),e}();function dd(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function pd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function vd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var md=function(){function e(t,n,r,i){le(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return he(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Go(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Vo("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),yd=function(){function e(t,n,r){le(this,e),this.targetId=t,this.state=n,this.error=r}return he(e,[{key:"Di",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Si",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Go(i.error.code,i.error.message))),a?new e(t,i.state,r):(Vo("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),gd=function(){function e(t,n){le(this,e),this.clientId=t,this.activeTargetIds=n}return he(e,null,[{key:"Si",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Dc(),o=0;i&&o<r.activeTargetIds.length;++o)i=Rs(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Vo("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),kd=function(){function e(t,n){le(this,e),this.clientId=t,this.onlineState=n}return he(e,null,[{key:"Si",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Vo("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),bd=function(){function e(){le(this,e),this.activeTargetIds=Dc()}return he(e,[{key:"Ci",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ni",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Di",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),wd=function(){function e(t,n,r,i,a){le(this,e),this.window=t,this.Sn=n,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new bc(os),this.started=!1,this.$i=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=dd(this.persistenceKey,this.xi),this.Bi=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Mi=this.Mi.insert(this.xi,new bd),this.Li=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ui=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.qi=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Ki=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Gi=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}return he(e,[{key:"start",value:function(){var e=$(Z().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f,h=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ds();case 2:t=e.sent,n=ce(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.xi){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(dd(this.persistenceKey,i)))&&(o=gd.Si(i,a))&&(this.Mi=this.Mi.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.ji(),(s=this.storage.getItem(this.Ki))&&(u=this.Qi(s))&&this.Wi(u),c=ce(this.$i);try{for(c.s();!(l=c.n()).done;)f=l.value,this.Oi(f)}catch(d){c.e(d)}finally{c.f()}this.$i=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Bi,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.zi(this.Mi)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Mi.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Hi(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Hi(e,t,n),this.Ji(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(vd(this.persistenceKey,e));if(n){var r=yd.Si(e,n);r&&(t=r.state)}}return this.Yi.Ci(e),this.ji(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Yi.Ni(e),this.ji()}},{key:"isLocalQueryTarget",value:function(e){return this.Yi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(vd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Xi(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ji(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Zi(e)}},{key:"notifyBundleLoaded",value:function(){this.tr()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return jo("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){jo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){jo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"Oi",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(jo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Fi)return void Vo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable($(Z().mark((function e(){var r,i,a,o,s,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Li.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.er(n.key),e.abrupt("return",t.nr(r,null));case 6:if(!(i=t.sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.nr(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.Ui.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.ir(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.rr(a));case 16:e.next=39;break;case 18:if(!t.qi.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.ur(o));case 23:e.next=39;break;case 25:if(n.key!==t.Ki){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Qi(n.newValue))){e.next=30;break}return e.abrupt("return",t.Wi(s));case 30:e.next=39;break;case 32:if(n.key!==t.Bi){e.next=37;break}u=function(e){var t=rs.A;if(null!=e)try{var n=JSON.parse(e);Wo("number"==typeof n),t=n}catch(e){Vo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==rs.A&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.Gi){e.next=39;break}return e.abrupt("return",t.syncEngine.ar());case 39:e.next=42;break;case 41:t.$i.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"Yi",get:function(){return this.Mi.get(this.xi)}},{key:"ji",value:function(){this.setItem(this.Fi,this.Yi.Di())}},{key:"Hi",value:function(e,t,n){var r=new md(this.currentUser,e,t,n),i=pd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Di())}},{key:"Ji",value:function(e){var t=pd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Zi",value:function(e){var t={clientId:this.xi,onlineState:e};this.storage.setItem(this.Ki,JSON.stringify(t))}},{key:"Xi",value:function(e,t,n){var r=vd(this.persistenceKey,e),i=new yd(e,t,n);this.setItem(r,i.Di())}},{key:"tr",value:function(){this.setItem(this.Gi,"value-not-used")}},{key:"er",value:function(e){var t=this.Li.exec(e);return t?t[1]:null}},{key:"sr",value:function(e,t){var n=this.er(e);return gd.Si(n,t)}},{key:"ir",value:function(e,t){var n=this.Ui.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return md.Si(new Lo(i),r,t)}},{key:"cr",value:function(e,t){var n=this.qi.exec(e),r=Number(n[1]);return yd.Si(r,t)}},{key:"Qi",value:function(e){return kd.Si(e)}},{key:"rr",value:function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.hr(t.batchId,t.state,t.error));case 2:jo("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ur",value:function(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}},{key:"nr",value:function(e,t){var n=this,r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.dr(o,s).then((function(){n.Mi=r}))}},{key:"Wi",value:function(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"zi",value:function(e){var t=Dc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"Vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),_d=function(){function e(){le(this,e),this._r=new bd,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return he(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this._r.Ci(e),this.wr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.wr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this._r.Ni(e)}},{key:"isLocalQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.wr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this._r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this._r.activeTargetIds.has(e)}},{key:"start",value:function(){return this._r=new bd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),xd=function(){function e(){le(this,e)}return he(e,[{key:"mr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Id=function(){function e(){var t=this;le(this,e),this.gr=function(){return t.yr()},this.pr=function(){return t.Ir()},this.Er=[],this.Tr()}return he(e,[{key:"mr",value:function(e){this.Er.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}},{key:"Tr",value:function(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}},{key:"yr",value:function(){jo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=ce(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ir",value:function(){jo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=ce(this.Er);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"Vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Ed={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Td=function(){function e(t){le(this,e),this.Ar=t.Ar,this.Rr=t.Rr}return he(e,[{key:"Pr",value:function(e){this.br=e}},{key:"vr",value:function(e){this.Vr=e}},{key:"onMessage",value:function(e){this.Sr=e}},{key:"close",value:function(){this.Rr()}},{key:"send",value:function(e){this.Ar(e)}},{key:"Dr",value:function(){this.br()}},{key:"Cr",value:function(e){this.Vr(e)}},{key:"Nr",value:function(e){this.Sr(e)}}]),e}(),Sd=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return he(n,[{key:"Br",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Oo;o.listenOnce(Co.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case So.NO_ERROR:var t=o.getResponseJson();jo("Connection","XHR received:",JSON.stringify(t)),i(t);break;case So.TIMEOUT:jo("Connection",'RPC "'+e+'" timed out'),a(new Go(Ho.DEADLINE_EXCEEDED,"Request time out"));break;case So.HTTP_ERROR:var n=o.getStatus();if(jo("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ho).indexOf(t)>=0?t:Ho.UNKNOWN}(r.status);a(new Go(s,r.message))}else a(new Go(Ho.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Go(Ho.UNAVAILABLE,"Connection failed."));break;default:Bo()}}finally{jo("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"Ur",value:function(e,t,n){var r=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Eo(),a=To(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ro({})),this.Fr(o.initMessageHeaders,t,n),Ne()||Re()||Ce().indexOf("Electron/")>=0||Pe()||Ce().indexOf("MSAppHost/")>=0||Ae()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");jo("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,f=new Td({Ar:function(e){l?jo("Connection","Not sending because WebChannel is closed:",e):(c||(jo("Connection","Opening WebChannel transport."),u.open(),c=!0),jo("Connection","WebChannel sending:",e),u.send(e))},Rr:function(){return u.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(u,Po.EventType.OPEN,(function(){l||jo("Connection","WebChannel transport opened.")})),h(u,Po.EventType.CLOSE,(function(){l||(l=!0,jo("Connection","WebChannel transport closed"),f.Cr())})),h(u,Po.EventType.ERROR,(function(e){l||(l=!0,qo("Connection","WebChannel transport errored:",e),f.Cr(new Go(Ho.UNAVAILABLE,"The operation could not be completed")))})),h(u,Po.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Wo(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){jo("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=dc[e];if(void 0!==t)return kc(t)}(a),s=i.message;void 0===o&&(o=Ho.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,f.Cr(new Go(o,s)),u.close()}else jo("Connection","WebChannel received:",n),f.Nr(n)}})),h(a,No.STAT_EVENT,(function(e){e.stat===Ao.PROXY?jo("Connection","Detected buffering proxy"):e.stat===Ao.NOPROXY&&jo("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Dr()}),0),f}}]),n}(function(){function e(t){le(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.kr=n+"://"+t.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return he(e,[{key:"Mr",value:function(e,t,n,r,i){var a=this.$r(e,t);jo("RestConnection","Sending: ",a,n);var o={};return this.Fr(o,r,i),this.Br(e,a,o,n).then((function(e){return jo("RestConnection","Received: ",e),e}),(function(t){throw qo("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"Lr",value:function(e,t,n,r,i){return this.Mr(e,t,n,r,i)}},{key:"Fr",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Mo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"$r",value:function(e,t){var n=Ed[e];return"".concat(this.kr,"/v1/").concat(t,":").concat(n)}}]),e}());function Cd(){return"undefined"!=typeof window?window:null}function Nd(){return"undefined"!=typeof document?document:null}function Ad(e){return new Hc(e,!0)}var Rd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;le(this,e),this.Sn=t,this.timerId=n,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}return he(e,[{key:"reset",value:function(){this.jr=0}},{key:"zr",value:function(){this.jr=this.Gr}},{key:"Hr",value:function(e){var t=this;this.cancel();var n=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,n-r);i>0&&jo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.jr," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,(function(){return t.Wr=Date.now(),e()})),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}},{key:"Yr",value:function(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}},{key:"cancel",value:function(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}},{key:"Jr",value:function(){return(Math.random()-.5)*this.jr}}]),e}(),Pd=function(){function e(t,n,r,i,a,o,s,u){le(this,e),this.Sn=t,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new Rd(t,n)}return he(e,[{key:"oo",value:function(){return 1===this.state||5===this.state||this.co()}},{key:"co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.uo()}},{key:"stop",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.oo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ao",value:function(){this.state=0,this.ro.reset()}},{key:"ho",value:function(){var e=this;this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,(function(){return e.lo()})))}},{key:"fo",value:function(e){this._o(),this.stream.send(e)}},{key:"lo",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_o",value:function(){this.so&&(this.so.cancel(),this.so=null)}},{key:"wo",value:function(){this.io&&(this.io.cancel(),this.io=null)}},{key:"close",value:function(){var e=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._o(),this.wo(),this.ro.cancel(),this.no++,4!==t?this.ro.reset():n&&n.code===Ho.RESOURCE_EXHAUSTED?(Vo(n.toString()),Vo("Using maximum backoff delay to prevent overloading the backend."),this.ro.zr()):n&&n.code===Ho.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.mo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.vr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"mo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.yo(this.no),n=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.no===n&&e.po(i,a)}),(function(n){t((function(){var t=new Go(Ho.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Io(t)}))}))}},{key:"po",value:function(e,t){var n=this,r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr((function(){r((function(){return n.state=2,n.io=n.Sn.enqueueAfterDelay(n.Zr,1e4,(function(){return n.co()&&(n.state=3),Promise.resolve()})),n.listener.Pr()}))})),this.stream.vr((function(e){r((function(){return n.Io(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"uo",value:function(){var e=this;this.state=5,this.ro.Hr($(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Io",value:function(e){return jo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"yo",value:function(e){var t=this;return function(n){t.Sn.enqueueAndForget((function(){return t.no===e?n():(jo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Od=function(e){re(n,e);var t=ue(n);function n(e,r,i,a,o,s){var u;return le(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).O=o,u}return he(n,[{key:"Eo",value:function(e,t){return this.eo.Ur("Listen",e,t)}},{key:"onMessage",value:function(e){this.ro.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Bo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Wo(void 0===t||"string"==typeof t),ks.fromBase64String(t||"")):(Wo(void 0===t||t instanceof Uint8Array),ks.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Ho.UNKNOWN:kc(e.code);return new Go(t,e.message||"")}(o);n=new jc(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=el(e,u.document.name),l=Xc(u.document.updateTime),f=new Qs({mapValue:{fields:u.document.fields}}),h=Xs.newFoundDocument(c,l,f),d=u.targetIds||[],p=u.removedTargetIds||[];n=new Fc(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=el(e,v.document),y=v.readTime?Xc(v.readTime):ls.min(),g=Xs.newNoDocument(m,y),k=v.removedTargetIds||[];n=new Fc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var w=el(e,b.document),_=b.removedTargetIds||[];n=new Fc([],_,w,null)}else{if(!("filter"in t))return Bo();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new yc(I),T=x.targetId;n=new Uc(T,E)}return n}(this.O,e),n=function(e){if(!("targetChange"in e))return ls.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ls.min():t.readTime?Xc(t.readTime):ls.min()}(e);return this.listener.To(t,n)}},{key:"Ao",value:function(e){var t={};t.database=rl(this.O),t.addTarget=function(e,t){var n,r=t.target;return(n=au(r)?{documents:ll(e,r)}:{query:fl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Qc(e,t.resumeToken):t.snapshotVersion.compareTo(ls.min())>0&&(n.readTime=Gc(e,t.snapshotVersion.toTimestamp())),n}(this.O,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.O,e);n&&(t.labels=n),this.fo(t)}},{key:"Ro",value:function(e){var t={};t.database=rl(this.O),t.removeTarget=e,this.fo(t)}}]),n}(Pd),Dd=function(e){re(n,e);var t=ue(n);function n(e,r,i,a,o,s){var u;return le(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).O=o,u.Po=!1,u}return he(n,[{key:"bo",get:function(){return this.Po}},{key:"start",value:function(){this.Po=!1,this.lastStreamToken=void 0,kn(ie(n.prototype),"start",this).call(this)}},{key:"mo",value:function(){this.Po&&this.vo([])}},{key:"Eo",value:function(e,t){return this.eo.Ur("Write",e,t)}},{key:"onMessage",value:function(e){if(Wo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();var t=function(e,t){return e&&e.length>0?(Wo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Xc(e.updateTime):Xc(t);return n.isEqual(ls.min())&&(n=Xc(t)),new Zu(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Xc(e.commitTime);return this.listener.Vo(n,t)}return Wo(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}},{key:"Do",value:function(){var e={};e.database=rl(this.O),this.fo(e)}},{key:"vo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return ul(t.O,e)}))};this.fo(n)}}]),n}(Pd),Ld=function(e){re(n,e);var t=ue(n);function n(e,r,i,a){var o;return le(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.eo=i,o.O=a,o.Co=!1,o}return he(n,[{key:"No",value:function(){if(this.Co)throw new Go(Ho.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Mr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.eo.Mr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ho.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Go(Ho.UNKNOWN,e.toString())}))}},{key:"Lr",value:function(e,t,n){var r=this;return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.eo.Lr(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ho.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Go(Ho.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Co=!0}}]),n}(function(){return he((function e(){le(this,e)}))}()),Md=function(){function e(t,n){le(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}return he(e,[{key:"Mo",value:function(){var e=this;0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ko=null,e.Fo("Backend didn't respond within 10 seconds."),e.$o("Offline"),Promise.resolve()})))}},{key:"Bo",value:function(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.$o("Offline")))}},{key:"set",value:function(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}},{key:"$o",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"Fo",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Oo?(Vo(t),this.Oo=!1):jo("OnlineStateTracker",t)}},{key:"Lo",value:function(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}]),e}(),Fd=he((function e(t,n,r,i,a){var o=this;le(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr((function(e){r.enqueueAndForget($(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Qd(o),!e.t0){e.next=5;break}return jo("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ko(t)).Ko.add(4),e.next=4,Vd(n);case 4:return n.Qo.set("Unknown"),n.Ko.delete(4),e.next=8,Ud(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.Qo=new Md(r,i)}));function Ud(e){return jd.apply(this,arguments)}function jd(){return jd=$(Z().mark((function e(t){var n,r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Qd(t)){e.next=18;break}n=ce(t.Go),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),jd.apply(this,arguments)}function Vd(e){return qd.apply(this,arguments)}function qd(){return qd=$(Z().mark((function e(t){var n,r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ce(t.Go),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),qd.apply(this,arguments)}function zd(e,t){var n=Ko(e);n.qo.has(t.targetId)||(n.qo.set(t.targetId,t),Gd(n)?Hd(n):xp(n).co()&&Wd(n,t))}function Bd(e,t){var n=Ko(e),r=xp(n);n.qo.delete(t),r.co()&&Kd(n,t),0===n.qo.size&&(r.co()?r.ho():Qd(n)&&n.Qo.set("Unknown"))}function Wd(e,t){e.Wo.Z(t.targetId),xp(e).Ao(t)}function Kd(e,t){e.Wo.Z(t),xp(e).Ro(t)}function Hd(e){e.Wo=new qc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Tt:function(t){return e.qo.get(t)||null}}),xp(e).start(),e.Qo.Mo()}function Gd(e){return Qd(e)&&!xp(e).oo()&&e.qo.size>0}function Qd(e){return 0===Ko(e).Ko.size}function Yd(e){e.Wo=void 0}function Xd(e){return $d.apply(this,arguments)}function $d(){return $d=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.qo.forEach((function(e,n){Wd(t,e)}));case 1:case"end":return e.stop()}}),e)}))),$d.apply(this,arguments)}function Jd(e,t){return Zd.apply(this,arguments)}function Zd(){return Zd=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yd(t),Gd(t)?(t.Qo.Bo(n),Hd(t)):t.Qo.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Zd.apply(this,arguments)}function ep(e,t,n){return tp.apply(this,arguments)}function tp(){return tp=$(Z().mark((function e(t,n,r){var i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Qo.set("Online"),!(n instanceof jc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=$(Z().mark((function e(t,n){var r,i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=ce(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.qo.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.qo.delete(o),t.Wo.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),jo("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,np(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Fc?t.Wo.ct(n):n instanceof Uc?t.Wo._t(n):t.Wo.ht(n),r.isEqual(ls.min())){e.next=29;break}return e.prev=14,e.next=17,Vh(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Wo.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.qo.get(r);i&&e.qo.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.qo.get(t);if(n){e.qo.set(t,n.withResumeToken(ks.EMPTY_BYTE_STRING,n.snapshotVersion)),Kd(e,t);var r=new df(n.target,t,1,n.sequenceNumber);Wd(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),jo("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,np(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),tp.apply(this,arguments)}function np(e,t,n){return rp.apply(this,arguments)}function rp(){return rp=$(Z().mark((function e(t,n,r){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nf(n)){e.next=2;break}throw n;case 2:return t.Ko.add(1),e.next=5,Vd(t);case 5:t.Qo.set("Offline"),r||(r=function(){return Vh(t.localStore)}),t.asyncQueue.enqueueRetryable($(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jo("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Ko.delete(1),e.next=6,Ud(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),rp.apply(this,arguments)}function ip(e,t){return t().catch((function(n){return np(e,n,t)}))}function ap(e){return op.apply(this,arguments)}function op(){return op=$(Z().mark((function e(t){var n,r,i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ko(t),r=Ip(n),i=n.Uo.length>0?n.Uo[n.Uo.length-1].batchId:-1;case 2:if(!sp(n)){e.next=19;break}return e.prev=3,e.next=6,Bh(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Uo.length&&r.ho(),e.abrupt("break",19);case 10:i=a.batchId,up(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,np(n,e.t0);case 17:e.next=2;break;case 19:cp(n)&&lp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),op.apply(this,arguments)}function sp(e){return Qd(e)&&e.Uo.length<10}function up(e,t){e.Uo.push(t);var n=Ip(e);n.co()&&n.bo&&n.vo(t.mutations)}function cp(e){return Qd(e)&&!Ip(e).oo()&&e.Uo.length>0}function lp(e){Ip(e).start()}function fp(e){return hp.apply(this,arguments)}function hp(){return hp=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ip(t).Do();case 1:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}function dp(e){return pp.apply(this,arguments)}function pp(){return pp=$(Z().mark((function e(t){var n,r,i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ip(t),r=ce(t.Uo);try{for(r.s();!(i=r.n()).done;)a=i.value,n.vo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),pp.apply(this,arguments)}function vp(e,t,n){return mp.apply(this,arguments)}function mp(){return mp=$(Z().mark((function e(t,n,r){var i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Uo.shift(),a=ff.from(i,n,r),e.next=3,ip(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,ap(t);case 5:case"end":return e.stop()}}),e)}))),mp.apply(this,arguments)}function yp(e,t){return gp.apply(this,arguments)}function gp(){return gp=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Ip(t).bo,!e.t0){e.next=4;break}return e.next=4,function(){var e=$(Z().mark((function e(t,n){var r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!gc(i=n.code)||i===Ho.ABORTED){e.next=7;break}return r=t.Uo.shift(),Ip(t).ao(),e.next=5,ip(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,ap(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:cp(t)&&lp(t);case 5:case"end":return e.stop()}}),e)}))),gp.apply(this,arguments)}function kp(e,t){return bp.apply(this,arguments)}function bp(){return bp=$(Z().mark((function e(t,n){var r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Ko(t)).asyncQueue.verifyOperationInProgress(),jo("RemoteStore","RemoteStore received new credentials"),i=Qd(r),r.Ko.add(3),e.next=6,Vd(r);case 6:return i&&r.Qo.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Ko.delete(3),e.next=12,Ud(r);case 12:case"end":return e.stop()}}),e)}))),bp.apply(this,arguments)}function wp(e,t){return _p.apply(this,arguments)}function _p(){return _p=$(Z().mark((function e(t,n){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ko(t),!n){e.next=7;break}return r.Ko.delete(2),e.next=5,Ud(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Ko.add(2),e.next=12,Vd(r);case 12:r.Qo.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),_p.apply(this,arguments)}function xp(e){return e.zo||(e.zo=function(e,t,n){var r=Ko(e);return r.No(),new Od(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:Xd.bind(null,e),vr:Jd.bind(null,e),To:ep.bind(null,e)}),e.Go.push(function(){var t=$(Z().mark((function t(n){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.zo.ao(),Gd(e)?Hd(e):e.Qo.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.zo.stop();case 6:Yd(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.zo}function Ip(e){return e.Ho||(e.Ho=function(e,t,n){var r=Ko(e);return r.No(),new Dd(t,r.eo,r.authCredentials,r.appCheckCredentials,r.O,n)}(e.datastore,e.asyncQueue,{Pr:fp.bind(null,e),vr:yp.bind(null,e),So:dp.bind(null,e),Vo:vp.bind(null,e)}),e.Go.push(function(){var t=$(Z().mark((function t(n){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Ho.ao(),t.next=4,ap(e);case 4:t.next=9;break;case 6:return t.next=8,e.Ho.stop();case 8:e.Uo.length>0&&(jo("RemoteStore","Stopping write stream with ".concat(e.Uo.length," pending writes")),e.Uo=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Ho}var Ep=function(){function e(t,n,r,i,a){le(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return he(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Go(Ho.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Tp(e,t){if(Vo("AsyncQueue","".concat(t,": ").concat(e)),nf(e))return new Go(Ho.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Sp=function(){function e(t){le(this,e),this.comparator=t?function(e,n){return t(e,n)||Ps.comparator(e.key,n.key)}:function(e,t){return Ps.comparator(e.key,t.key)},this.keyedMap=Nc(),this.sortedSet=new bc(this.comparator)}return he(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Cp=function(){function e(){le(this,e),this.Jo=new bc(Ps.comparator)}return he(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Jo.get(t);n?0!==e.type&&3===n.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==n.type?this.Jo=this.Jo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jo=this.Jo.remove(t):1===e.type&&2===n.type?this.Jo=this.Jo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):Bo():this.Jo=this.Jo.insert(t,e)}},{key:"Yo",value:function(){var e=[];return this.Jo.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Np=function(){function e(t,n,r,i,a,o,s,u){le(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return he(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ru(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Sp.emptySet(n),a,r,i,!0,!1)}}]),e}(),Ap=he((function e(){le(this,e),this.Xo=void 0,this.listeners=[]})),Rp=he((function e(){le(this,e),this.queries=new yh((function(e){return Pu(e)}),Ru),this.onlineState="Unknown",this.Zo=new Set}));function Pp(e,t){return Op.apply(this,arguments)}function Op(){return Op=$(Z().mark((function e(t,n){var r,i,a,o,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ko(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Ap),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Xo=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Tp(e.t0,"Initialization of query '".concat(Ou(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.tc(r.onlineState),o.Xo&&n.ec(o.Xo)&&Up(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Op.apply(this,arguments)}function Dp(e,t){return Lp.apply(this,arguments)}function Lp(){return Lp=$(Z().mark((function e(t,n){var r,i,a,o,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ko(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Lp.apply(this,arguments)}function Mp(e,t){var n,r=Ko(e),i=!1,a=ce(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=ce(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.ec(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}u.Xo=o}}}catch(f){a.e(f)}finally{a.f()}i&&Up(r)}function Fp(e,t,n){var r=Ko(e),i=r.queries.get(t);if(i){var a,o=ce(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function Up(e){e.Zo.forEach((function(e){e.next()}))}var jp=function(){function e(t,n,r){le(this,e),this.query=t,this.nc=n,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}return he(e,[{key:"ec",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=ce(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Np(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.sc?this.rc(e)&&(this.nc.next(e),a=!0):this.oc(e,this.onlineState)&&(this.cc(e),a=!0),this.ic=e,a}},{key:"onError",value:function(e){this.nc.error(e)}},{key:"tc",value:function(e){this.onlineState=e;var t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}},{key:"oc",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.uc||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"rc",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"cc",value:function(e){e=Np.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}]),e}(),Vp=function(){function e(t,n){le(this,e),this.payload=t,this.byteLength=n}return he(e,[{key:"ac",value:function(){return"metadata"in this.payload}}]),e}(),qp=function(){function e(t){le(this,e),this.O=t}return he(e,[{key:"Gs",value:function(e){return el(this.O,e)}},{key:"js",value:function(e){return e.metadata.exists?ol(this.O,e.document,!1):Xs.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}},{key:"Qs",value:function(e){return Xc(e)}}]),e}(),zp=function(){function e(t,n,r){le(this,e),this.hc=t,this.localStore=n,this.O=r,this.queries=[],this.documents=[],this.progress=Bp(t)}return he(e,[{key:"lc",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"fc",value:function(e){var t,n=new Map,r=new qp(this.O),i=ce(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Gs(a.metadata.name),u=ce(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||Pc()).add(s);n.set(c,l)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=$(Z().mark((function e(){var t,n,r,i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jh(this.localStore,new qp(this.O),this.documents,this.hc.id);case 2:t=e.sent,n=this.fc(this.documents),r=ce(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,ed(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new Rh(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Bp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Wp=he((function e(t){le(this,e),this.key=t})),Kp=he((function e(t){le(this,e),this.key=t})),Hp=function(){function e(t,n){le(this,e),this.query=t,this.dc=n,this._c=null,this.current=!1,this.wc=Pc(),this.mutatedKeys=Pc(),this.mc=Lu(t),this.gc=new Sp(this.mc)}return he(e,[{key:"yc",get:function(){return this.dc}},{key:"Ic",value:function(e,t){var n=this,r=t?t.Ec:new Cp,i=t?t.gc:this.gc,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u=xu(this.query)&&i.size===this.query.limit?i.last():null,c=Iu(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Du(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Tc(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.mc(f,u)>0||c&&n.mc(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),xu(this.query)||Iu(this.query))for(;o.size>this.query.limit;){var l=xu(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{gc:o,Ec:r,ks:s,mutatedKeys:a}}},{key:"Tc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;var a=e.Ec.Yo();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bo()}};return n(e)-n(t)}(e.type,t.type)||r.mc(e.doc,t.doc)})),this.Ac(n);var o=t?this.Rc():[],s=0===this.wc.size&&this.current?1:0,u=s!==this._c;return this._c=s,0!==a.length||u?{snapshot:new Np(this.query,e.gc,i,a,e.mutatedKeys,0===s,u,!1),Pc:o}:{Pc:o}}},{key:"tc",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new Cp,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}},{key:"bc",value:function(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}},{key:"Ac",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.dc=t.dc.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.dc=t.dc.delete(e)})),this.current=e.current)}},{key:"Rc",value:function(){var e=this;if(!this.current)return[];var t=this.wc;this.wc=Pc(),this.gc.forEach((function(t){e.bc(t.key)&&(e.wc=e.wc.add(t.key))}));var n=[];return t.forEach((function(t){e.wc.has(t)||n.push(new Kp(t))})),this.wc.forEach((function(e){t.has(e)||n.push(new Wp(e))})),n}},{key:"vc",value:function(e){this.dc=e.Ks,this.wc=Pc();var t=this.Ic(e.documents);return this.applyChanges(t,!0)}},{key:"Vc",value:function(){return Np.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}]),e}(),Gp=he((function e(t,n,r){le(this,e),this.query=t,this.targetId=n,this.view=r})),Qp=he((function e(t){le(this,e),this.key=t,this.Sc=!1})),Yp=function(){function e(t,n,r,i,a,o){le(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Dc={},this.Cc=new yh((function(e){return Pu(e)}),Ru),this.Nc=new Map,this.xc=new Set,this.kc=new bc(Ps.comparator),this.Oc=new Map,this.Mc=new id,this.$c={},this.Fc=new Map,this.Bc=ih.Je(),this.onlineState="Unknown",this.Lc=void 0}return he(e,[{key:"isPrimaryClient",get:function(){return!0===this.Lc}}]),e}();function Xp(e,t){return $p.apply(this,arguments)}function $p(){return $p=$(Z().mark((function e(t,n){var r,i,a,o,s,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Bv(t),!(o=r.Cc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Vc(),e.next=15;break;case 6:return e.next=8,Wh(r.localStore,Nu(n));case 8:return s=e.sent,r.isPrimaryClient&&zd(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,Jp(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),$p.apply(this,arguments)}function Jp(e,t,n,r){return Zp.apply(this,arguments)}function Zp(){return Zp=$(Z().mark((function e(t,n,r,i){var a,o,s,u,c,l;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Uc=function(e,n,r){return function(){var e=$(Z().mark((function e(t,n,r,i){var a,o,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ic(r),e.t0=a.ks,!e.t0){e.next=6;break}return e.next=5,Gh(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ic(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(kv(t,n.targetId,s.Pc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Gh(t.localStore,n,!0);case 3:return a=e.sent,o=new Hp(n,a.Ks),s=o.Ic(a.documents),u=Mc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),kv(t,r,c.Pc),l=new Gp(n,r,o),e.abrupt("return",(t.Cc.set(n,l),t.Nc.has(r)?t.Nc.get(r).push(n):t.Nc.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),Zp.apply(this,arguments)}function ev(e,t){return tv.apply(this,arguments)}function tv(){return tv=$(Z().mark((function e(t,n){var r,i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ko(t),i=r.Cc.get(n),!((a=r.Nc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Nc.set(i.targetId,a.filter((function(e){return!Ru(e,n)}))),void r.Cc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Kh(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Bd(r.remoteStore,i.targetId),yv(r,i.targetId)})).catch(ch);case 9:e.next=14;break;case 11:return yv(r,i.targetId),e.next=14,Kh(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),tv.apply(this,arguments)}function nv(e,t,n){return rv.apply(this,arguments)}function rv(){return rv=$(Z().mark((function e(t,n,r){var i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Wv(t),e.prev=1,e.next=4,function(e,t){var n,r=Ko(e),i=cs.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Pc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Us.Es(e,a).next((function(a){n=a;var o,s=[],u=ce(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=ac(c,n.get(c.key));null!=l&&s.push(new cc(c.key,l,Ys(l.value.mapValue),ec.exists(!0)))}}catch(f){u.e(f)}finally{u.f()}return r.gs.addMutationBatch(e,i,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.$c[e.currentUser.toKey()];r||(r=new bc(os)),r=r.insert(t,n),e.$c[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,_v(i,a.changes);case 9:return e.next=11,ap(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Tp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),rv.apply(this,arguments)}function iv(e,t){return av.apply(this,arguments)}function av(){return av=$(Z().mark((function e(t,n){var r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ko(t),e.prev=1,e.next=4,qh(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Oc.get(t);n&&(Wo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Sc=!0:e.modifiedDocuments.size>0?Wo(n.Sc):e.removedDocuments.size>0&&(Wo(n.Sc),n.Sc=!1))})),e.next=8,_v(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,ch(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),av.apply(this,arguments)}function ov(e,t,n){var r=Ko(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Cc.forEach((function(e,n){var r=n.view.tc(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Ko(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=ce(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.tc(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Up(n)}(r.eventManager,t),i.length&&r.Dc.To(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function sv(e,t,n){return uv.apply(this,arguments)}function uv(){return uv=$(Z().mark((function e(t,n,r){var i,a,o,s,u,c;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Ko(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.Oc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new bc(Ps.comparator)).insert(o,Xs.newNoDocument(o,ls.min())),u=Pc().add(o),c=new Lc(ls.min(),new Map,new xc(os),s,u),e.next=9,iv(i,c);case 9:i.kc=i.kc.remove(o),i.Oc.delete(n),wv(i),e.next=16;break;case 14:return e.next=16,Kh(i.localStore,n,!1).then((function(){return yv(i,n,r)})).catch(ch);case 16:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function cv(e,t){return lv.apply(this,arguments)}function lv(){return lv=$(Z().mark((function e(t,n){var r,i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ko(t),i=n.batch.batchId,e.prev=1,e.next=4,jh(r.localStore,n);case 4:return a=e.sent,mv(r,i,null),vv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,_v(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ch(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),lv.apply(this,arguments)}function fv(e,t,n){return hv.apply(this,arguments)}function hv(){return hv=$(Z().mark((function e(t,n,r){var i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ko(t),e.prev=1,e.next=4,function(e,t){var n=Ko(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.gs.lookupMutationBatch(e,t).next((function(t){return Wo(null!==t),r=t.keys(),n.gs.removeMutationBatch(e,t)})).next((function(){return n.gs.performConsistencyCheck(e)})).next((function(){return n.Us.Es(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,mv(i,n,r),vv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,_v(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,ch(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),hv.apply(this,arguments)}function dv(e,t){return pv.apply(this,arguments)}function pv(){return pv=$(Z().mark((function e(t,n){var r,i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Qd((r=Ko(t)).remoteStore)||jo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Ko(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.gs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Fc.get(i)||[]).push(n),r.Fc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Tp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),pv.apply(this,arguments)}function vv(e,t){(e.Fc.get(t)||[]).forEach((function(e){e.resolve()})),e.Fc.delete(t)}function mv(e,t,n){var r=Ko(e),i=r.$c[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.$c[r.currentUser.toKey()]=i}}function yv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=ce(e.Nc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.Cc.delete(a),n&&e.Dc.qc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.Nc.delete(t),e.isPrimaryClient&&e.Mc.si(t).forEach((function(t){e.Mc.containsKey(t)||gv(e,t)}))}function gv(e,t){e.xc.delete(t.path.canonicalString());var n=e.kc.get(t);null!==n&&(Bd(e.remoteStore,n),e.kc=e.kc.remove(t),e.Oc.delete(n),wv(e))}function kv(e,t,n){var r,i=ce(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Wp?(e.Mc.addReference(a.key,t),bv(e,a)):a instanceof Kp?(jo("SyncEngine","Document no longer in limbo: "+a.key),e.Mc.removeReference(a.key,t),e.Mc.containsKey(a.key)||gv(e,a.key)):Bo()}}catch(o){i.e(o)}finally{i.f()}}function bv(e,t){var n=t.key,r=n.path.canonicalString();e.kc.get(n)||e.xc.has(r)||(jo("SyncEngine","New document in limbo: "+n),e.xc.add(r),wv(e))}function wv(e){for(;e.xc.size>0&&e.kc.size<e.maxConcurrentLimboResolutions;){var t=e.xc.values().next().value;e.xc.delete(t);var n=new Ps(vs.fromString(t)),r=e.Bc.next();e.Oc.set(r,new Qp(n)),e.kc=e.kc.insert(n,r),zd(e.remoteStore,new df(Nu(_u(n.path)),r,2,rs.A))}}function _v(e,t,n){return xv.apply(this,arguments)}function xv(){return xv=$(Z().mark((function e(t,n,r){var i,a,o,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ko(t),a=[],o=[],s=[],e.t0=i.Cc.isEmpty(),e.t0){e.next=9;break}return i.Cc.forEach((function(e,t){s.push(i.Uc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Oh.Ss(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Dc.To(a),e.next=9,function(){var e=$(Z().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ko(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return $l.forEach(n,(function(t){return $l.forEach(t.vs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return $l.forEach(t.Vs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),nf(e.t0)){e.next=10;break}throw e.t0;case 10:jo("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=ce(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.Ms.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.Ms=r.Ms.insert(s,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}function Iv(e,t){return Ev.apply(this,arguments)}function Ev(){return Ev=$(Z().mark((function e(t,n){var r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Ko(t)).currentUser.isEqual(n)){e.next=11;break}return jo("SyncEngine","User change. New user:",n.toKey()),e.next=5,Fh(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Fc.forEach((function(e){e.forEach((function(e){e.reject(new Go(Ho.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,_v(r,i.qs);case 11:case"end":return e.stop()}}),e)}))),Ev.apply(this,arguments)}function Tv(e,t){var n=Ko(e),r=n.Oc.get(t);if(r&&r.Sc)return Pc().add(r.key);var i=Pc(),a=n.Nc.get(t);if(!a)return i;var o,s=ce(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Cc.get(u);i=i.unionWith(c.view.yc)}}catch(l){s.e(l)}finally{s.f()}return i}function Sv(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=$(Z().mark((function e(t,n){var r,i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ko(t),e.next=3,Gh(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.vc(i),e.abrupt("return",(r.isPrimaryClient&&kv(r,n.targetId,a.Pc),a));case 6:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Nv(e){return Av.apply(this,arguments)}function Av(){return Av=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ko(t),e.abrupt("return",Yh(n.localStore).then((function(e){return _v(n,e)})));case 2:case"end":return e.stop()}}),e)}))),Av.apply(this,arguments)}function Rv(e,t,n,r){return Pv.apply(this,arguments)}function Pv(){return Pv=$(Z().mark((function e(t,n,r,i){var a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ko(t),e.next=3,function(e,t){var n=Ko(e),r=Ko(n.gs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Ge(e,t).next((function(t){return t?n.Us.Es(e,t):$l.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,ap(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(mv(a,n,i||null),vv(a,n),function(e,t){Ko(Ko(e).gs).Qe(t)}(a.localStore,n)):Bo();case 11:return e.next=13,_v(a,o);case 13:e.next=16;break;case 15:jo("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Pv.apply(this,arguments)}function Ov(e,t){return Dv.apply(this,arguments)}function Dv(){return Dv=$(Z().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Bv(r=Ko(t)),Wv(r),!0!==n||!0===r.Lc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Lv(r,i.toArray());case 5:return a=e.sent,r.Lc=!0,e.next=9,wp(r.remoteStore,!0);case 9:o=ce(a);try{for(o.s();!(s=o.n()).done;)u=s.value,zd(r.remoteStore,u)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Lc){e.next=25;break}return c=[],l=Promise.resolve(),r.Nc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return yv(r,t),Kh(r.localStore,t,!0)})),Bd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Lv(r,c);case 21:return function(e){var t=Ko(e);t.Oc.forEach((function(e,n){Bd(t.remoteStore,n)})),t.Mc.ii(),t.Oc=new Map,t.kc=new bc(Ps.comparator)}(r),r.Lc=!1,e.next=25,wp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Dv.apply(this,arguments)}function Lv(e,t,n){return Mv.apply(this,arguments)}function Mv(){return Mv=$(Z().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h,d,p,v,m,y;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Ko(t),a=[],o=[],s=ce(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(f=i.Nc.get(c))||0===f.length){e.next=34;break}return e.next=11,Wh(i.localStore,Nu(f[0]));case 11:l=e.sent,h=ce(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.Cc.get(p),e.next=20,Sv(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Qh(i.localStore,c);case 36:return y=e.sent,e.next=39,Wh(i.localStore,y);case 39:return l=e.sent,e.next=42,Jp(i,Fv(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Dc.To(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Mv.apply(this,arguments)}function Fv(e){return wu(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Uv(e){var t=Ko(e);return Ko(Ko(t.localStore).persistence).ds()}function jv(e,t,n,r){return Vv.apply(this,arguments)}function Vv(){return Vv=$(Z().mark((function e(t,n,r,i){var a,o,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Ko(t)).Lc){e.next=5;break}jo("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!a.Nc.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Yh(a.localStore);case 11:return o=e.sent,s=Lc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,_v(a,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,Kh(a.localStore,n,!0);case 18:return yv(a,n,i),e.abrupt("break",21);case 20:Bo();case 21:case"end":return e.stop()}}),e)}))),Vv.apply(this,arguments)}function qv(e,t,n){return zv.apply(this,arguments)}function zv(){return zv=$(Z().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Bv(t)).Lc){e.next=45;break}a=ce(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.Nc.has(s)){e.next=10;break}return jo("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Qh(i.localStore,s);case 12:return u=e.sent,e.next=15,Wh(i.localStore,u);case 15:return c=e.sent,e.next=18,Jp(i,Fv(u),c.targetId,!1);case 18:zd(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=ce(r),e.prev=30,h=Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Nc.has(t),!e.t0){e.next=5;break}return e.next=5,Kh(i.localStore,t,!1).then((function(){Bd(i.remoteStore,t),yv(i,t)})).catch(ch);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),zv.apply(this,arguments)}function Bv(e){var t=Ko(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=iv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sv.bind(null,t),t.Dc.To=Mp.bind(null,t.eventManager),t.Dc.qc=Fp.bind(null,t.eventManager),t}function Wv(e){var t=Ko(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=cv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=fv.bind(null,t),t}function Kv(e,t,n){var r=Ko(e);(function(){var e=$(Z().mark((function e(t,n,r){var i,a,o,s,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Ko(e),r=Xc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Kn.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)));case 10:return r._updateProgress(Bp(i)),a=new zp(i,t.localStore,n.O),e.next=14,n.Kc();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,a.lc(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.Kc();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,a.complete();case 27:return u=e.sent,e.next=30,_v(t,u.ws,void 0);case 30:return e.next=32,function(e,t){var n=Ko(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Kn.saveBundleMetadata(e,t)}))}(t.localStore,i);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),qo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Hv=function(){function e(){le(this,e),this.synchronizeTabs=!1}return he(e,[{key:"initialize",value:function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.O=Ad(t.databaseInfo.databaseId),this.sharedClientState=this.Gc(t),this.persistence=this.jc(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.Qc(t),this.localStore=this.Wc(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){return null}},{key:"Wc",value:function(e){return Mh(this.persistence,new Dh,e.initialUser,this.O)}},{key:"jc",value:function(e){return new ld(hd.bi,this.O)}},{key:"Gc",value:function(e){return new _d}},{key:"terminate",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Gv=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this)).zc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return he(n,[{key:"initialize",value:function(){var e=$(Z().mark((function e(t){var r=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(ie(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,Xh(this.localStore);case 4:return e.next=6,this.zc.initialize(this,t);case 6:return e.next=8,Wv(this.zc.syncEngine);case 8:return e.next=10,ap(this.zc.remoteStore);case 10:return e.next=12,this.persistence.Hn((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Wc",value:function(e){return Mh(this.persistence,new Dh,e.initialUser,this.O)}},{key:"Qc",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new dh(t,e.asyncQueue)}},{key:"jc",value:function(e){var t=Ah(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Xf.withCacheSize(this.cacheSizeBytes):Xf.DEFAULT;return new Sh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Cd(),Nd(),this.O,this.sharedClientState,!!this.forceOwnership)}},{key:"Gc",value:function(e){return new _d}}]),n}(Hv),Qv=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,e,r,!1)).zc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return he(n,[{key:"initialize",value:function(){var e=$(Z().mark((function e(t){var r,i=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(ie(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.zc.syncEngine,e.t0=this.sharedClientState instanceof wd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={hr:Rv.bind(null,r),lr:jv.bind(null,r),dr:qv.bind(null,r),ds:Uv.bind(null,r),ar:Nv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Hn(function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ov(i.zc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Gc",value:function(e){var t=Cd();if(!wd.Vt(t))throw new Go(Ho.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ah(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Gv),Yv=function(){function e(){le(this,e)}return he(e,[{key:"initialize",value:function(){var e=$(Z().mark((function e(t,n){var r=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ov(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Iv.bind(null,this.syncEngine),e.next=12,wp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Rp}},{key:"createDatastore",value:function(e){var t,n=Ad(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Sd(t));return function(e,t,n,r){return new Ld(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ov(o.syncEngine,e,0)},a=Id.Vt()?new Id:new xd,new Fd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new Yp(e,t,n,r,i,a);return o&&(s.Lc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ko(t),jo("RemoteStore","RemoteStore shutting down."),n.Ko.add(5),e.next=5,Vd(n);case 5:n.jo.shutdown(),n.Qo.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Xv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return $(Z().mark((function r(){var i;return Z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return $(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var $v=function(){function e(t){le(this,e),this.observer=t,this.muted=!1}return he(e,[{key:"next",value:function(e){this.observer.next&&this.Hc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Jc",value:function(){this.muted=!0}},{key:"Hc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Jv=function(){function e(t,n){var r=this;le(this,e),this.Yc=t,this.O=n,this.metadata=new Qo,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then((function(e){e&&e.ac()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return he(e,[{key:"close",value:function(){return this.Yc.cancel()}},{key:"getMetadata",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Zc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(){var e=$(Z().mark((function e(){var t,n,r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Xc.decode(t),r=Number(n),isNaN(r)&&this.eu("length string (".concat(n,") is not valid number")),e.next=9,this.nu(r);case 9:return i=e.sent,e.abrupt("return",new Vp(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"su",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"tu",value:function(){var e=$(Z().mark((function e(){var t,n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.su()<0)){e.next=7;break}return e.next=3,this.iu();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.su())<0&&this.eu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nu",value:function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.iu();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.eu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"eu",value:function(e){throw this.Yc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"iu",value:function(){var e=$(Z().mark((function e(){var t,n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Yc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Zv=function(){function e(t){le(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return he(e,[{key:"lookup",value:function(){var e=$(Z().mark((function e(t){var n,r=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Go(Ho.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=$(Z().mark((function e(t,n){var r,i,a,o,s,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ko(t),i=rl(r.O)+"/documents",a={documents:n.map((function(e){return Zc(r.O,e)}))},e.next=5,r.Lr("BatchGetDocuments",i,a);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=sl(r.O,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Wo(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new vc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=$(Z().mark((function e(){var t,n=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Ps.fromPath(t);n.mutations.push(new mc(r,n.precondition(r)))})),e.next=7,function(){var e=$(Z().mark((function e(t,n){var r,i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ko(t),i=rl(r.O)+"/documents",a={writes:n.map((function(e){return ul(r.O,e)}))},e.next=3,r.Mr("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Bo();t=ls.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Go(Ho.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ec.updateTime(t):ec.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ls.min()))throw new Go(Ho.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ec.updateTime(t)}return ec.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),em=function(){function e(t,n,r,i){le(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new Rd(this.asyncQueue,"transaction_retry")}return he(e,[{key:"run",value:function(){this.ru-=1,this.ou()}},{key:"ou",value:function(){var e=this;this.ro.Hr($(Z().mark((function t(){var n,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Zv(e.datastore),(r=e.cu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.uu(t)}))}))})).catch((function(t){e.uu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"cu",value:function(e){try{var t=this.updateFunction(e);return!Ns(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"uu",value:function(e){var t=this;this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget((function(){return t.ou(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"au",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!gc(t)}return!1}}]),e}(),tm=function(){function e(t,n,r,i){var a=this;le(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lo.UNAUTHENTICATED,this.clientId=as.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jo("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return jo("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return he(e,[{key:"getConfiguration",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Go(Ho.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Qo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted($(Z().mark((function n(){var r;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Tp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function nm(e,t){return rm.apply(this,arguments)}function rm(){return rm=$(Z().mark((function e(t,n){var r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),jo("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Fh(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),rm.apply(this,arguments)}function im(e,t){return am.apply(this,arguments)}function am(){return am=$(Z().mark((function e(t,n){var r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,om(t);case 3:return r=e.sent,jo("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return kp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return kp(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),am.apply(this,arguments)}function om(e){return sm.apply(this,arguments)}function sm(){return sm=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return jo("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,nm(t,new Hv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),sm.apply(this,arguments)}function um(e){return cm.apply(this,arguments)}function cm(){return cm=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return jo("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,im(t,new Yv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}function lm(e){return om(e).then((function(e){return e.persistence}))}function fm(e){return om(e).then((function(e){return e.localStore}))}function hm(e){return um(e).then((function(e){return e.remoteStore}))}function dm(e){return um(e).then((function(e){return e.syncEngine}))}function pm(e){return vm.apply(this,arguments)}function vm(){return vm=$(Z().mark((function e(t){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,um(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Xp.bind(null,n.syncEngine),r.onUnlisten=ev.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),vm.apply(this,arguments)}function mm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qo;return e.asyncQueue.enqueueAndForget($(Z().mark((function i(){return Z().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $v({next:function(a){t.enqueueAndForget((function(){return Dp(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new Go(Ho.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new Go(Ho.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new jp(_u(n.path),a,{includeMetadataChanges:!0,uc:!0});return Pp(e,o)},i.next=3,pm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function ym(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Qo;return e.asyncQueue.enqueueAndForget($(Z().mark((function i(){return Z().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new $v({next:function(n){t.enqueueAndForget((function(){return Dp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Go(Ho.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new jp(n,a,{includeMetadataChanges:!0,uc:!0});return Pp(e,o)},i.next=3,pm(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var gm=new Map;function km(e,t,n){if(!n)throw new Go(Ho.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function bm(e,t,n,r){if(!0===t&&!0===r)throw new Go(Ho.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function wm(e){if(!Ps.isDocumentKey(e))throw new Go(Ho.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function _m(e){if(Ps.isDocumentKey(e))throw new Go(Ho.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function xm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Bo()}function Im(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Go(Ho.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=xm(e);throw new Go(Ho.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Em(e,t){if(t<=0)throw new Go(Ho.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Tm=function(){function e(t){var n;if(le(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Go(Ho.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Go(Ho.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,bm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return he(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Sm=function(){function e(t,n,r){le(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tm({}),this._settingsFrozen=!1,t instanceof Cs?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Go(Ho.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cs(e.options.projectId)}(t))}return he(e,[{key:"app",get:function(){if(!this._app)throw new Go(Ho.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Go(Ho.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Xo;switch(e.type){case"gapi":var t=e.client;return Wo(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new es(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Go(Ho.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=gm.get(e);t&&(jo("ComponentProvider","Removing Datastore"),gm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Cm(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Im(e,Sm))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&qo("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Lo.MOCK_USER;else{o=Se(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new Go(Ho.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Lo(u)}e._authCredentials=new $o(new Yo(o,s))}}var Nm=function(){function e(t,n,r){le(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return he(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Rm(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Am=function(){function e(t,n,r){le(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return he(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Rm=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this,e,r,_u(i)))._path=i,a.type="collection",a}return he(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Nm(this.firestore,null,new Ps(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Am);function Pm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=it(e),km("collection","path",t),e instanceof Sm){var a=vs.fromString.apply(vs,[t].concat(r));return _m(a),new Rm(e,null,a)}if(!(e instanceof Nm||e instanceof Rm))throw new Go(Ho.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(vs.fromString.apply(vs,[t].concat(r)));return _m(o),new Rm(e.firestore,null,o)}function Om(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=it(e),1===arguments.length&&(t=as.R()),km("doc","path",t),e instanceof Sm){var a=vs.fromString.apply(vs,[t].concat(r));return wm(a),new Nm(e,null,new Ps(a))}if(!(e instanceof Nm||e instanceof Rm))throw new Go(Ho.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(vs.fromString.apply(vs,[t].concat(r)));return wm(o),new Nm(e.firestore,e instanceof Rm?e.converter:null,new Ps(o))}function Dm(e,t){return e=it(e),t=it(t),(e instanceof Nm||e instanceof Rm)&&(t instanceof Nm||t instanceof Rm)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Lm(e,t){return e=it(e),t=it(t),e instanceof Am&&t instanceof Am&&e.firestore===t.firestore&&Ru(e._query,t._query)&&e.converter===t.converter}var Mm=function(){function e(){var t=this;le(this,e),this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new Rd(this,"async_queue_retry"),this.yu=function(){var e=Nd();e&&jo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ro.Yr()};var n=Nd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.yu)}return he(e,[{key:"isShuttingDown",get:function(){return this.fu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.pu(),this.Iu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.fu){this.fu=!0,this.mu=e||!1;var t=Nd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}},{key:"enqueue",value:function(e){var t=this;if(this.pu(),this.fu)return new Promise((function(){}));var n=new Qo;return this.Iu((function(){return t.fu&&t.mu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.lu.push(e),t.Eu()}))}},{key:"Eu",value:function(){var e=$(Z().mark((function e(){var t=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.lu.length){e.next=14;break}return e.prev=1,e.next=4,this.lu[0]();case 4:this.lu.shift(),this.ro.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),nf(e.t0)){e.next=12;break}throw e.t0;case 12:jo("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.lu.length>0&&this.ro.Hr((function(){return t.Eu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Iu",value:function(e){var t=this,n=this.hu.then((function(){return t.wu=!0,e().catch((function(e){t._u=e,t.wu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Vo("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.wu=!1,e}))}));return this.hu=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.pu(),this.gu.indexOf(e)>-1&&(t=0);var i=Ep.createAndSchedule(this,e,t,n,(function(e){return r.Tu(e)}));return this.du.push(i),i}},{key:"pu",value:function(){this._u&&Bo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Au",value:function(){var e=$(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.hu,e.next=3,t;case 3:if(t!==this.hu){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ru",value:function(e){var t,n=ce(this.du);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.Au().then((function(){t.du.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=ce(t.du);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Au()}))}},{key:"bu",value:function(e){this.gu.push(e)}},{key:"Tu",value:function(e){var t=this.du.indexOf(e);this.du.splice(t,1)}}]),e}();function Fm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=ce(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Um=function(){function e(){le(this,e),this._progressObserver={},this._taskCompletionResolver=new Qo,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return he(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),jm=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Mm,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return he(n,[{key:"_terminate",value:function(){return this._firestoreClient||qm(this),this._firestoreClient.terminate()}}]),n}(Sm);function Vm(e){return e._firestoreClient||qm(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function qm(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Ss(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new tm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function zm(e,t,n){var r=new Qo;return e.asyncQueue.enqueue($(Z().mark((function i(){return Z().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,nm(e,n);case 3:return i.next=5,im(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ho.FAILED_PRECONDITION||e.code===Ho.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Bm(e){return function(e){return e.asyncQueue.enqueue($(Z().mark((function t(){var n,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lm(e);case 2:return n=t.sent,t.next=5,hm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Ko(e);return t.Ko.delete(0),Ud(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Vm(e=Im(e,jm)))}function Wm(e){return function(e){return e.asyncQueue.enqueue($(Z().mark((function t(){var n,r;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,lm(e);case 2:return n=t.sent,t.next=5,hm(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ko(t)).Ko.add(0),e.next=4,Vd(n);case 4:n.Qo.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Vm(e=Im(e,jm)))}function Km(e,t){var n=Vm(e=Im(e,jm)),r=new Um;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Jv(e,t)}(function(e,t){if(e instanceof Uint8Array)return Xv(e,t);if(e instanceof ArrayBuffer)return Xv(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Ad(t));e.asyncQueue.enqueueAndForget($(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Kv,t.next=3,dm(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Hm(e,t){return function(e,t){return e.asyncQueue.enqueue($(Z().mark((function n(){return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Ko(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Kn.getNamedQuery(e,t)}))},n.next=3,fm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Vm(e=Im(e,jm)),t).then((function(t){return t?new Am(e,null,t.query):null}))}function Gm(e){if(e._initialized||e._terminated)throw new Go(Ho.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Qm=function(){function e(){le(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Go(Ho.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ys(n)}return he(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Ym=function(){function e(t){le(this,e),this._byteString=t}return he(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ks.fromBase64String(t))}catch(t){throw new Go(Ho.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ks.fromUint8Array(t))}}]),e}(),Xm=he((function e(t){le(this,e),this._methodName=t})),$m=function(){function e(t,n){if(le(this,e),!isFinite(t)||t<-90||t>90)throw new Go(Ho.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Go(Ho.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return he(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return os(this._lat,e._lat)||os(this._long,e._long)}}]),e}(),Jm=/^__.*__$/,Zm=function(){function e(t,n,r){le(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return he(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new cc(e,this.data,this.fieldMask,t,this.fieldTransforms):new uc(e,this.data,t,this.fieldTransforms)}}]),e}(),ey=function(){function e(t,n,r){le(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return he(e,[{key:"toMutation",value:function(e,t){return new cc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function ty(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bo()}}var ny=function(){function e(t,n,r,i,a,o){le(this,e),this.settings=t,this.databaseId=n,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return he(e,[{key:"path",get:function(){return this.settings.path}},{key:"Vu",get:function(){return this.settings.Vu}},{key:"Su",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Du",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.Nu(e),r}},{key:"xu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Su({path:n,Cu:!1});return r.vu(),r}},{key:"ku",value:function(e){return this.Su({path:void 0,Cu:!0})}},{key:"Ou",value:function(e){return _y(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"vu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}},{key:"Nu",value:function(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(ty(this.Vu)&&Jm.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}]),e}(),ry=function(){function e(t,n,r){le(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.O=r||Ad(t)}return he(e,[{key:"Fu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new ny({Vu:e,methodName:t,$u:n,path:ys.emptyPath(),Cu:!1,Mu:r},this.databaseId,this.O,this.ignoreUndefinedProperties)}}]),e}();function iy(e){var t=e._freezeSettings(),n=Ad(e._databaseId);return new ry(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ay(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.Fu(a.merge||a.mergeFields?2:0,t,n,i);gy("Data must be an object, but it was:",o,r);var s,u,c=my(r,o);if(a.merge)s=new gs(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=ce(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=ky(t,d,n);if(!o.contains(p))throw new Go(Ho.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));xy(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}s=new gs(f),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new Zm(new Qs(c),s,u)}var oy=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Vu)throw 1===e.Vu?e.Ou("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Ou("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Xm);function sy(e,t,n){return new ny({Vu:3,$u:t.settings.$u,methodName:e._methodName,Cu:n},t.databaseId,t.O,t.ignoreUndefinedProperties)}var uy=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"_toFieldTransform",value:function(e){return new Ju(e.path,new Wu)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Xm),cy=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,e)).Bu=r,i}return he(n,[{key:"_toFieldTransform",value:function(e){var t=sy(this,e,!0),n=this.Bu.map((function(e){return vy(e,t)})),r=new Ku(n);return new Ju(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Xm),ly=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,e)).Bu=r,i}return he(n,[{key:"_toFieldTransform",value:function(e){var t=sy(this,e,!0),n=this.Bu.map((function(e){return vy(e,t)})),r=new Gu(n);return new Ju(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Xm),fy=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,e)).Lu=r,i}return he(n,[{key:"_toFieldTransform",value:function(e){var t=new Yu(e.O,ju(e.O,this.Lu));return new Ju(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Xm);function hy(e,t,n,r){var i=e.Fu(1,t,n);gy("Data must be an object, but it was:",i,r);var a=[],o=Qs.empty();hs(r,(function(e,r){var s=wy(t,e,n);r=it(r);var u=i.xu(s);if(r instanceof oy)a.push(s);else{var c=vy(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new gs(a);return new ey(o,s,i.fieldTransforms)}function dy(e,t,n,r,i,a){var o=e.Fu(1,t,n),s=[ky(t,r,n)],u=[i];if(a.length%2!=0)throw new Go(Ho.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(ky(t,a[c])),u.push(a[c+1]);for(var l=[],f=Qs.empty(),h=s.length-1;h>=0;--h)if(!xy(l,s[h])){var d=s[h],p=u[h];p=it(p);var v=o.xu(d);if(p instanceof oy)l.push(d);else{var m=vy(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new gs(l);return new ey(f,y,o.fieldTransforms)}function py(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return vy(n,e.Fu(r?4:3,t))}function vy(e,t){if(yy(e=it(e)))return gy("Unsupported field value:",t,e),my(e,t);if(e instanceof Xm)return function(e,t){if(!ty(t.Vu))throw t.Ou("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ou("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Cu&&4!==t.Vu)throw t.Ou("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=ce(e);try{for(a.s();!(n=a.n()).done;){var o=vy(n.value,t.ku(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=it(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ju(t.O,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=cs.fromDate(e);return{timestampValue:Gc(t.O,n)}}if(e instanceof cs){var r=new cs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Gc(t.O,r)}}if(e instanceof $m)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Ym)return{bytesValue:Qc(t.O,e._byteString)};if(e instanceof Nm){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.Ou("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:$c(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ou("Unsupported field value: ".concat(xm(e)))}(e,t)}function my(e,t){var n={};return ds(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hs(e,(function(e,r){var i=vy(r,t.Du(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function yy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof cs||e instanceof $m||e instanceof Ym||e instanceof Nm||e instanceof Xm)}function gy(e,t,n){if(!yy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=xm(n);throw"an object"===r?t.Ou(e+" a custom object"):t.Ou(e+" "+r)}}function ky(e,t,n){if((t=it(t))instanceof Qm)return t._internalPath;if("string"==typeof t)return wy(e,t);throw _y("Field path arguments must be of type string or ",e,!1,void 0,n)}var by=new RegExp("[~\\*/\\[\\]]");function wy(e,t,n){if(t.search(by)>=0)throw _y("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ne(Qm,at(t.split(".")))._internalPath}catch(r){throw _y("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function _y(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new Go(Ho.INVALID_ARGUMENT,s+e+u)}function xy(e,t){return e.some((function(e){return e.isEqual(t)}))}var Iy=function(){function e(t,n,r,i,a){le(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return he(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Nm(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new Ey(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Ty("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),Ey=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"data",value:function(){return kn(ie(n.prototype),"data",this).call(this)}}]),n}(Iy);function Ty(e,t){return"string"==typeof t?wy(e,t):t instanceof Qm?t._internalPath:t._delegate._internalPath}var Sy=function(){function e(t,n){le(this,e),this.hasPendingWrites=t,this.fromCache=n}return he(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Cy=function(e){re(n,e);var t=ue(n);function n(e,r,i,a,o,s){var u;return le(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return he(n,[{key:"exists",value:function(){return kn(ie(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Ny(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Ty("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Iy),Ny=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kn(ie(n.prototype),"data",this).call(this,e)}}]),n}(Cy),Ay=function(){function e(t,n,r,i){le(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Sy(i.hasPendingWrites,i.fromCache),this.query=r}return he(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Ny(n._firestore,n._userDataWriter,r.key,r,new Sy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Go(Ho.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new Ny(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Ny(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Sy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Ry(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Ry(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bo()}}function Py(e,t){return e instanceof Cy&&t instanceof Cy?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ay&&t instanceof Ay&&e._firestore===t._firestore&&Lm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Oy(e){if(Iu(e)&&0===e.explicitOrderBy.length)throw new Go(Ho.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Dy=he((function e(){le(this,e)}));function Ly(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var My=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this)).Uu=e,a.qu=r,a.Ku=i,a.type="where",a}return he(n,[{key:"_apply",value:function(e){var t=iy(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Go(Ho.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Qy(o,a);var u,c=[],l=ce(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;c.push(Gy(r,e,f))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=Gy(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Qy(o,a),s=py(n,"where",o,"in"===a||"not-in"===a);var h=ou.create(i,a,s);return function(e,t){if(t.S()){var n=Tu(e);if(null!==n&&!n.isEqual(t.field))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Eu(e);null!==r&&Yy(e,t.field,r)}var i=function(e,t){var n,r=ce(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Go(Ho.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Go(Ho.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new Am(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Dy);var Fy=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this)).Uu=e,i.Gu=r,i.type="orderBy",i}return he(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new mu(t,n);return function(e,t){if(null===Eu(e)){var n=Tu(e);null!==n&&Yy(e,n,t.field)}}(e,r),r}(e._query,this.Uu,this.Gu);return new Am(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new bu(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Dy);function Uy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=Ty("orderBy",e);return new Fy(r,n)}var jy=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this)).type=e,a.ju=r,a.Qu=i,a}return he(n,[{key:"_apply",value:function(e){return new Am(e.firestore,e.converter,Au(e._query,this.ju,this.Qu))}}]),n}(Dy);var Vy=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return he(n,[{key:"_apply",value:function(e){var t=Hy(e,this.type,this.Wu,this.zu);return new Am(e.firestore,e.converter,function(e,t){return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Dy);function qy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vy("startAt",t,!0)}function zy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vy("startAfter",t,!1)}var By=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a;return le(this,n),(a=t.call(this)).type=e,a.Wu=r,a.zu=i,a}return he(n,[{key:"_apply",value:function(e){var t=Hy(e,this.type,this.Wu,this.zu);return new Am(e.firestore,e.converter,function(e,t){return new bu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Dy);function Wy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new By("endBefore",t,!1)}function Ky(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new By("endAt",t,!0)}function Hy(e,t,n,r){if(n[0]=it(n[0]),n[0]instanceof Iy)return function(e,t,n,r,i){if(!r)throw new Go(Ho.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=ce(Cu(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(qs(t,r.key));else{var c=r.data.field(u.field);if(Is(c))throw new Go(Ho.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){s.e(f)}finally{s.f()}return new vu(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=iy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Go(Ho.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Su(e)&&-1!==c.indexOf("/"))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(vs.fromString(c));if(!Ps.isDocumentKey(l))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Ps(l);s.push(qs(t,f))}else{var h=py(n,r,c);s.push(h)}}return new vu(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Gy(e,t,n){if("string"==typeof(n=it(n))){if(""===n)throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Su(t)&&-1!==n.indexOf("/"))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(vs.fromString(n));if(!Ps.isDocumentKey(r))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return qs(e,new Ps(r))}if(n instanceof Nm)return qs(e,n._key);throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(xm(n),"."))}function Qy(e,t){if(!Array.isArray(e)||0===e.length)throw new Go(Ho.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Go(Ho.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Yy(e,t,n){if(!n.isEqual(t))throw new Go(Ho.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Xy=function(){function e(){le(this,e)}return he(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _s(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Bo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return hs(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new $m(_s(e.latitude),_s(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Es(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ts(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=ws(e);return new cs(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=vs.fromString(e);Wo(wl(n));var r=new Cs(n.get(1),n.get(3)),i=new Ps(n.popFirst(5));return r.isEqual(t)||Vo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function $y(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Jy=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this)).firestore=e,r}return he(n,[{key:"convertBytes",value:function(e){return new Ym(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nm(this.firestore,null,t)}}]),n}(Xy),Zy=function(){function e(t,n){le(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=iy(t)}return he(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=eg(e,this._firestore),i=$y(r.converter,t,n),a=ay(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ec.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=eg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=it(t))||t instanceof Qm?dy(this._dataReader,"WriteBatch.update",i._key,t,n,o):hy(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ec.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=eg(e,this._firestore);return this._mutations=this._mutations.concat(new vc(t._key,ec.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Go(Ho.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function eg(e,t){if((e=it(e)).firestore!==t)throw new Go(Ho.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var tg=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this)).firestore=e,r}return he(n,[{key:"convertBytes",value:function(e){return new Ym(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nm(this.firestore,null,t)}}]),n}(Xy);function ng(e){e=Im(e,Nm);var t=Im(e.firestore,jm),n=Vm(t),r=new tg(t);return function(e,t){var n=new Qo;return e.asyncQueue.enqueueAndForget($(Z().mark((function r(){return Z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=$(Z().mark((function e(t,n,r){var i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Ko(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Us.ys(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Go(Ho.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Tp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,fm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Cy(t,r,e._key,n,new Sy(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function rg(e){e=Im(e,Am);var t=Im(e.firestore,jm),n=Vm(t),r=new tg(t);return function(e,t){var n=new Qo;return e.asyncQueue.enqueueAndForget($(Z().mark((function r(){return Z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=$(Z().mark((function e(t,n,r){var i,a,o,s,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gh(t,n,!0);case 3:i=e.sent,a=new Hp(n,i.Ks),o=a.Ic(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=Tp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,fm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Ay(t,r,e,n)}))}function ig(e,t,n){e=Im(e,Nm);var r=Im(e.firestore,jm),i=$y(e.converter,t,n);return lg(r,[ay(iy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ec.none())])}function ag(e,t,n){e=Im(e,Nm);for(var r=Im(e.firestore,jm),i=iy(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return lg(r,[("string"==typeof(t=it(t))||t instanceof Qm?dy(i,"updateDoc",e._key,t,n,o):hy(i,"updateDoc",e._key,t)).toMutation(e._key,ec.exists(!0))])}function og(e){return lg(Im(e.firestore,jm),[new vc(e._key,ec.none())])}function sg(e,t){var n=Im(e.firestore,jm),r=Om(e),i=$y(e.converter,t);return lg(n,[ay(iy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ec.exists(!1))]).then((function(){return r}))}function ug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=it(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||Fm(n[u])||(s=n[u],u++);var c,l,f,h={includeMetadataChanges:s.includeMetadataChanges};if(Fm(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof Nm)l=Im(e.firestore,jm),f=_u(e._key.path),c={next:function(t){n[u]&&n[u](fg(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=Im(e,Am);l=Im(p.firestore,jm),f=p._query;var v=new tg(l);c={next:function(e){n[u]&&n[u](new Ay(l,v,p,e))},error:n[u+1],complete:n[u+2]},Oy(e._query)}return function(e,t,n,r){var i=new $v(r),a=new jp(t,i,n);return e.asyncQueue.enqueueAndForget($(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Pp,t.next=3,pm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Jc(),e.asyncQueue.enqueueAndForget($(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Dp,t.next=3,pm(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Vm(l),f,h,c)}function cg(e,t){return function(e,t){var n=new $v(t);return e.asyncQueue.enqueueAndForget($(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ko(e).Zo.add(t),t.next()},t.next=3,pm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Jc(),e.asyncQueue.enqueueAndForget($(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ko(e).Zo.delete(t)},t.next=3,pm(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Vm(e=Im(e,jm)),Fm(t)?t:{next:t})}function lg(e,t){return function(e,t){var n=new Qo;return e.asyncQueue.enqueueAndForget($(Z().mark((function r(){return Z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=nv,r.next=3,dm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Vm(e),t)}function fg(e,t,n){var r=n.docs.get(t._key),i=new tg(e);return new Cy(e,i,t._key,r,new Sy(n.hasPendingWrites,n.fromCache),t.converter)}var hg=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,e,r))._firestore=e,i}return he(n,[{key:"get",value:function(e){var t=this,r=eg(e,this._firestore),i=new tg(this._firestore);return kn(ie(n.prototype),"get",this).call(this,e).then((function(e){return new Cy(t._firestore,i,r._key,e._document,new Sy(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){le(this,e),this._firestore=t,this._transaction=n,this._dataReader=iy(t)}return he(e,[{key:"get",value:function(e){var t=this,n=eg(e,this._firestore),r=new Jy(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Bo();var i=e[0];if(i.isFoundDocument())return new Iy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Iy(t._firestore,r,n._key,null,n.converter);throw Bo()}))}},{key:"set",value:function(e,t,n){var r=eg(e,this._firestore),i=$y(r.converter,t,n),a=ay(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=eg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=it(t))||t instanceof Qm?dy(this._dataReader,"Transaction.update",i._key,t,n,o):hy(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=eg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function dg(e,t){return function(e,t){var n=new Qo;return e.asyncQueue.enqueueAndForget($(Z().mark((function r(){var i;return Z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return um(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new em(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(Vm(e=Im(e,jm)),(function(n){return t(new hg(e,n))}))}function pg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new cy("arrayUnion",t)}function vg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ly("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Mo=e}(Ut),Rt(new ot("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new jm(i,new Jo(e.getProvider("auth-internal")),new ns(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Wt(Do,"3.4.5",e),Wt(Do,"3.4.5","esm2017")}();function mg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Go("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function yg(){if("undefined"===typeof Uint8Array)throw new Go("unimplemented","Uint8Arrays are not available in this environment.")}function gg(){if("undefined"==typeof atob)throw new Go("unimplemented","Blobs are unavailable in Firestore in this environment.")}var kg=function(){function e(t){le(this,e),this._delegate=t}return he(e,[{key:"toBase64",value:function(){return gg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return yg(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return gg(),new e(Ym.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return yg(),new e(Ym.fromUint8Array(t))}}]),e}();function bg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=ce(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var wg=function(){function e(){le(this,e)}return he(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Gm(e=Im(e,jm));var n=Vm(e),r=e._freezeSettings(),i=new Yv;return zm(n,i,new Gv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Gm(e=Im(e,jm));var t=Vm(e),n=e._freezeSettings(),r=new Yv;return zm(t,r,new Qv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Go(Ho.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Qo;return e._queue.enqueueAndForgetEvenWhileRestricted($(Z().mark((function n(){return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zl.Vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Zl.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Ah(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),_g=function(){function e(t,n,r){var i=this;le(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Cs||(this._appCompat=t)}return he(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||qo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Cm(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Bm(this._delegate)}},{key:"disableNetwork",value:function(){return Wm(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&bm("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Qo;return e.asyncQueue.enqueueAndForget($(Z().mark((function n(){return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=dv,n.next=3,dm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Vm(e=Im(e,jm)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return cg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Go("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Mg(this,Pm(this._delegate,e))}catch(t){throw Cg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Sg(this,Om(this._delegate,e))}catch(t){throw Cg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Og(this,function(e,t){if(e=Im(e,Sm),km("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Go(Ho.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Am(e,null,function(e){return new bu(vs.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Cg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return dg(this._delegate,(function(n){return e(new Ig(t,n))}))}},{key:"batch",value:function(){var e=this;return Vm(this._delegate),new Eg(new Zy(this._delegate,(function(t){return lg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Km(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Hm(this._delegate,e).then((function(e){return e?new Og(t,e):null}))}}]),e}(),xg=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this)).firestore=e,r}return he(n,[{key:"convertBytes",value:function(e){return new kg(new Ym(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Sg.forKey(t,this.firestore,null)}}]),n}(Xy);var Ig=function(){function e(t,n){le(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new xg(t)}return he(e,[{key:"get",value:function(e){var t=this,n=Fg(e);return this._delegate.get(n).then((function(e){return new Rg(t._firestore,new Cy(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Fg(e);return n?(mg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=Fg(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Fg(e);return this._delegate.delete(t),this}}]),e}(),Eg=function(){function e(t){le(this,e),this._delegate=t}return he(e,[{key:"set",value:function(e,t,n){var r=Fg(e);return n?(mg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=Fg(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Fg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Tg=function(){function e(t,n,r){le(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return he(e,[{key:"fromFirestore",value:function(e,t){var n=new Ny(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pg(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new xg(t),n),i.set(n,a)),a}}]),e}();Tg.INSTANCES=new WeakMap;var Sg=function(){function e(t,n){le(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new xg(t)}return he(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Mg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Mg(this.firestore,Pm(this._delegate,e))}catch(t){throw Cg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=it(e))instanceof Nm&&Dm(this._delegate,e)}},{key:"set",value:function(e,t){t=mg("DocumentReference.set",t);try{return t?ig(this._delegate,e,t):ig(this._delegate,e)}catch(n){throw Cg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ag(this._delegate,e):ag.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw Cg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return og(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ng(n),a=Ag(n,(function(t){return new Rg(e.firestore,new Cy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return ug(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?ng(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Im(e,Nm);var t=Im(e.firestore,jm);return mm(Vm(t),e._key,{source:"server"}).then((function(n){return fg(t,e,n)}))}(this._delegate):function(e){e=Im(e,Nm);var t=Im(e.firestore,jm);return mm(Vm(t),e._key).then((function(n){return fg(t,e,n)}))}(this._delegate),t.then((function(e){return new Rg(n.firestore,new Cy(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Tg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Go("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Nm(n._delegate,r,new Ps(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Nm(n._delegate,r,t))}}]),e}();function Cg(e,t,n){return e.message=e.message.replace(t,n),e}function Ng(e){var t,n=ce(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!bg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Ag(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=bg(e[0])?e[0]:bg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Rg=function(){function e(t,n){le(this,e),this._firestore=t,this._delegate=n}return he(e,[{key:"ref",get:function(){return new Sg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Py(this._delegate,e._delegate)}}]),e}(),Pg=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Bo()}(void 0!==t),t}}]),n}(Rg),Og=function(){function e(t,n){le(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new xg(t)}return he(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Ly(this._delegate,function(e,t,n){var r=t,i=Ty("where",e);return new My(i,r,n)}(t,n,r)))}catch(i){throw Cg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Ly(this._delegate,Uy(t,n)))}catch(r){throw Cg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Ly(this._delegate,function(e){return Em("limit",e),new jy("limit",e,"F")}(t)))}catch(n){throw Cg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Ly(this._delegate,function(e){return Em("limitToLast",e),new jy("limitToLast",e,"L")}(t)))}catch(n){throw Cg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Ly(this._delegate,qy.apply(void 0,arguments)))}catch(t){throw Cg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Ly(this._delegate,zy.apply(void 0,arguments)))}catch(t){throw Cg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Ly(this._delegate,Wy.apply(void 0,arguments)))}catch(t){throw Cg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Ly(this._delegate,Ky.apply(void 0,arguments)))}catch(t){throw Cg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Lm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?rg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Im(e,Am);var t=Im(e.firestore,jm),n=Vm(t),r=new tg(t);return ym(n,e._query,{source:"server"}).then((function(n){return new Ay(t,r,e,n)}))}(this._delegate):function(e){e=Im(e,Am);var t=Im(e.firestore,jm),n=Vm(t),r=new tg(t);return Oy(e._query),ym(n,e._query).then((function(n){return new Ay(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Lg(n.firestore,new Ay(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ng(n),a=Ag(n,(function(t){return new Lg(e.firestore,new Ay(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return ug(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Tg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Dg=function(){function e(t,n){le(this,e),this._firestore=t,this._delegate=n}return he(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Pg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Lg=function(){function e(t,n){le(this,e),this._firestore=t,this._delegate=n}return he(e,[{key:"query",get:function(){return new Og(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Pg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Dg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Pg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Py(this._delegate,e._delegate)}}]),e}(),Mg=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return he(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Sg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Sg(this.firestore,void 0===e?Om(this._delegate):Om(this._delegate,e))}catch(t){throw Cg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return sg(this._delegate,e).then((function(e){return new Sg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Dm(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Tg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Og);function Fg(e){return Im(e,Nm)}var Ug,jg=function(){function e(){le(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=ne(Qm,n)}return he(e,[{key:"isEqual",value:function(e){return(e=it(e))instanceof Qm&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(ys.keyField().canonicalString())}}]),e}(),Vg=function(){function e(t){le(this,e),this._delegate=t}return he(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new uy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new oy("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=pg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=vg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new fy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),qg={Firestore:_g,GeoPoint:$m,Timestamp:cs,Blob:kg,Transaction:Ig,WriteBatch:Eg,DocumentReference:Sg,DocumentSnapshot:Rg,Query:Og,QueryDocumentSnapshot:Pg,QuerySnapshot:Lg,CollectionReference:Mg,FieldPath:jg,FieldValue:Vg,setLogLevel:function(e){!function(e){Fo.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ot("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},qg)))})(Ug=yn,(function(e,t){return new _g(e,t,new wg)})),Ug.registerVersion("@firebase/firestore-compat","0.1.14");var zg="firebasestorage.googleapis.com",Bg=function(e){re(n,e);var t=ue(n);function n(e,r){var i;return le(this,n),(i=t.call(this,Wg(e),"Firebase Storage: ".concat(r," (").concat(Wg(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(oe(i),n.prototype),i}return he(n,[{key:"_codeEquals",value:function(e){return Wg(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Me);function Wg(e){return"storage/"+e}function Kg(){return new Bg("unknown","An unknown error occurred, please check the error payload for server response.")}function Hg(){return new Bg("canceled","User canceled the upload/download.")}function Gg(){return new Bg("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Qg(e){return new Bg("invalid-argument",e)}function Yg(){return new Bg("app-deleted","The Firebase app was deleted.")}function Xg(e){return new Bg("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function $g(e,t){return new Bg("invalid-format","String does not match format '"+e+"': "+t)}function Jg(e){throw new Bg("internal-error","Internal error: "+e)}var Zg,ek=function(){function e(t,n){le(this,e),this.bucket=t,this.path_=n}return he(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new Bg("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===zg?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Bg("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),tk=function(){function e(t){le(this,e),this.promise_=Promise.reject(t)}return he(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function nk(e){return"string"===typeof e||e instanceof String}function rk(e){return ik()&&e instanceof Blob}function ik(){return"undefined"!==typeof Blob}function ak(e,t,n,r){if(r<t)throw Qg("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Qg("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function ok(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function sk(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Zg||(Zg={}));var uk=function(){function e(t,n,r,i,a,o,s,u,c,l,f){var h=this;le(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return he(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=Kg();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?Yg():Hg());else i(new Bg("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new ck(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(s=2),clearTimeout(i),f(0)):e||(s=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new ck(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Zg.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new ck(o,r))}else{var s=r.getErrorCode()===Zg.ABORT;t(!1,new ck(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),ck=he((function e(t,n,r){le(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function lk(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function fk(){for(var e=lk(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(ik())return new Blob(n);throw new Bg("unsupported-environment","This browser doesn't seem to support creating Blobs")}var hk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},dk=he((function e(t,n){le(this,e),this.data=t,this.contentType=n||null}));function pk(e,t){switch(e){case hk.RAW:return new dk(vk(t));case hk.BASE64:case hk.BASE64URL:return new dk(mk(e,t));case hk.DATA_URL:return new dk(function(e){var t=new yk(e);return t.base64?mk(hk.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw $g(hk.DATA_URL,"Malformed data URL.")}return vk(t)}(t.rest)}(t),new yk(t).contentType)}throw Kg()}function vk(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function mk(e,t){switch(e){case hk.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw $g(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case hk.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw $g(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw $g(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var yk=he((function e(t){le(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw $g(hk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var gk=function(){function e(t,n){le(this,e);var r=0,i="";rk(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return he(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(rk(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(ik()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(fk.apply(null,i))}var a=n.map((function(e){return nk(e)?pk(hk.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function kk(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function bk(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function wk(e,t){return t}var _k=he((function e(t,n,r,i){le(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||wk})),xk=null;function Ik(){if(xk)return xk;var e=[];e.push(new _k("bucket")),e.push(new _k("generation")),e.push(new _k("metageneration")),e.push(new _k("name","fullPath",!0));var t=new _k("name");t.xform=function(e,t){return function(e){return!nk(e)||e.length<2?e:bk(e)}(t)},e.push(t);var n=new _k("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new _k("timeCreated")),e.push(new _k("updated")),e.push(new _k("md5Hash",null,!0)),e.push(new _k("cacheControl",null,!0)),e.push(new _k("contentDisposition",null,!0)),e.push(new _k("contentEncoding",null,!0)),e.push(new _k("contentLanguage",null,!0)),e.push(new _k("contentType",null,!0)),e.push(new _k("metadata","customMetadata",!0)),xk=e}function Ek(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new ek(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Tk(e,t,n){var r=kk(t);return null===r?null:Ek(e,r,n)}function Sk(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function Ck(e,t,n){var r=kk(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=ce(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new ek(t,o));r.prefixes.push(s)}}catch(h){a.e(h)}finally{a.f()}}if(n.items){var u,c=ce(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=e._makeStorageReference(new ek(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var Nk=he((function e(t,n,r,i){le(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Ak(e){if(!e)throw Kg()}function Rk(e,t){return function(n,r){var i=Tk(e,r,t);return Ak(null!==i),i}}function Pk(e,t){return function(n,r){var i=Tk(e,r,t);return Ak(null!==i),function(e,t,n,r){var i=kk(t);if(null===i)return null;if(!nk(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return ok("/b/"+o(i)+"/o/"+o(a),n,r)+sk({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Ok(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Bg("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Bg("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Bg("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Bg("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Dk(e){var t=Ok(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Bg("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Lk(e,t,n){var r=ok(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Nk(r,"GET",Rk(e,n),i);return a.errorHandler=Dk(t),a}function Mk(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=ok(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new Nk(o,"GET",function(e,t){return function(n,r){var i=Ck(e,t,r);return Ak(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=Ok(t),u}function Fk(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Uk(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=Fk(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Sk(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=gk.getBlob(c,r,l);if(null===f)throw Gg();var h={name:u.fullPath},d=ok(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Nk(d,"POST",Rk(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Ok(t),v}var jk=he((function e(t,n,r,i){le(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function Vk(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){Ak(!1)}return Ak(!!n&&-1!==(t||["active"]).indexOf(n)),n}var qk=262144;function zk(e,t,n,r,i,a,o,s){var u=new jk(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Bg("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,h=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(f,h);if(null===p)throw Gg();var v=t.maxUploadRetryTime,m=new Nk(n,"POST",(function(e,n){var i,o=Vk(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?Rk(t,a)(e,n):null,new jk(s,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=Ok(e),m}var Bk={STATE_CHANGED:"state_changed"},Wk={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Kk(e){switch(e){case"running":case"pausing":case"canceling":return Wk.RUNNING;case"paused":return Wk.PAUSED;case"success":return Wk.SUCCESS;case"canceled":return Wk.CANCELED;default:return Wk.ERROR}}var Hk=he((function e(t,n,r){le(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Gk(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Qk=function(){function e(){var t=this;le(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zg.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Zg.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Zg.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return he(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Jg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Jg("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Jg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Jg("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Jg("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Yk=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Qk);function Xk(){return new Yk}var $k=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;le(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Ik(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return he(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Fk(t,r,i),s={name:o.fullPath},u=ok(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Sk(o,n),f=e.maxUploadRetryTime,h=new Nk(u,"POST",(function(e){var t;Vk(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){Ak(!1)}return Ak(nk(t)),t}),f);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=Ok(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Xk,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Nk(n,"POST",(function(e){var t=Vk(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){Ak(!1)}n||Ak(!1);var i=Number(n);return Ak(!isNaN(i)),new jk(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=Ok(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Xk,n,r);e._request=a,a.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=qk*this._chunkMultiplier,n=new jk(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=zk(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,Xk,i,a);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){qk*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Lk(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Xk,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Uk(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Xk,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Hg(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Kk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Hk(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Kk(this._state)){case Wk.SUCCESS:Gk(this._resolve.bind(null,this.snapshot))();break;case Wk.CANCELED:case Wk.ERROR:Gk(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Kk(this._state)){case Wk.RUNNING:case Wk.PAUSED:e.next&&Gk(e.next.bind(e,this.snapshot))();break;case Wk.SUCCESS:e.complete&&Gk(e.complete.bind(e))();break;default:e.error&&Gk(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Jk=function(){function e(t,n){le(this,e),this._service=t,this._location=n instanceof ek?n:ek.makeFromUrl(n,t.host)}return he(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new ek(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return bk(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new ek(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Xg(e)}}]),e}();function Zk(e,t,n){e._throwIfRoot("uploadBytes");var r=Uk(e.storage,e._location,Ik(),new gk(t,!0),n);return e.storage.makeRequestWithTokens(r,Xk).then((function(t){return{metadata:t,ref:e}}))}function eb(e,t,n){return tb.apply(this,arguments)}function tb(){return tb=$(Z().mark((function e(t,n,r){var i,a,o,s;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,nb(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,at(s.prefixes)),(a=n.items).push.apply(a,at(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,eb(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)}))),tb.apply(this,arguments)}function nb(e,t){null!=t&&"number"===typeof t.maxResults&&ak("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Mk(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Xk)}function rb(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=ok(t.fullServerUrl(),e.host,e._protocol),a=Sk(n,r),o=e.maxOperationRetryTime,s=new Nk(i,"PATCH",Rk(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=Dk(t),s}(e.storage,e._location,t,Ik());return e.storage.makeRequestWithTokens(n,Xk)}function ib(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=ok(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Nk(r,"GET",Pk(e,n),i);return a.errorHandler=Dk(t),a}(e.storage,e._location,Ik());return e.storage.makeRequestWithTokens(t,Xk).then((function(e){if(null===e)throw new Bg("no-download-url","The given file does not have any download URLs.");return e}))}function ab(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=ok(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Nk(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Dk(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Xk)}function ob(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ek(e._location.bucket,n);return new Jk(e.storage,r)}function sb(e,t){if(e instanceof fb){var n=e;if(null==n._bucket)throw new Bg("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Jk(n,n._bucket);return null!=t?sb(r,t):r}return void 0!==t?ob(e,t):e}function ub(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof fb)return new Jk(e,t);throw Qg("To use ref(service, url), the first argument must be a Storage instance.")}return sb(e,t)}function cb(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:ek.makeFromBucketSpec(n,e)}function lb(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:Se(i,e.app.options.projectId))}var fb=function(){function e(t,n,r,i,a){le(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=zg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ek.makeFromBucketSpec(i,this._host):cb(this._host,this.app.options)}return he(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=ek.makeFromBucketSpec(this._url,e):this._bucket=cb(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){ak("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){ak("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=$(Z().mark((function e(){var t,n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=$(Z().mark((function e(){var t,n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Jk(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new tk(Yg());var a=function(e,t,n,r,i,a){var o=sk(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new uk(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=$(Z().mark((function e(t,n){var r,i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),hb="@firebase/storage",db="0.9.2",pb="storage";function vb(e,t,n,r){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:hk.RAW,r=arguments.length>3?arguments[3]:void 0;e._throwIfRoot("uploadString");var i=pk(n,t),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),Zk(e,i.data,a)}(e=it(e),t,n,r)}function mb(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new $k(e,new gk(t),n)}(e=it(e),t,n)}function yb(e){return function(e){e._throwIfRoot("getMetadata");var t=Lk(e.storage,e._location,Ik());return e.storage.makeRequestWithTokens(t,Xk)}(e=it(e))}function gb(e){return function(e){var t={prefixes:[],items:[]};return eb(e,t).then((function(){return t}))}(e=it(e))}function kb(e){return ib(e=it(e))}function bb(e){return ab(e=it(e))}function wb(e,t){return ub(e=it(e),t)}function _b(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};lb(e,t,n,r)}function xb(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new fb(r,i,a,n,Ut)}Rt(new ot(pb,xb,"PUBLIC").setMultipleInstances(!0)),Wt(hb,db,""),Wt(hb,db,"esm2017");var Ib=function(){function e(t,n,r){le(this,e),this._delegate=t,this.task=n,this.ref=r}return he(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Eb=function(){function e(t,n){le(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return he(e,[{key:"snapshot",get:function(){return new Ib(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Ib(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Ib(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Ib(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Tb=function(){function e(t,n){le(this,e),this._delegate=t,this._service=n}return he(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Sb(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Sb(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Sb=function(){function e(t,n){le(this,e),this._delegate=t,this.storage=n}return he(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return ob(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Eb(mb(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hk.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=pk(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Eb(new $k(this._delegate,new gk(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return gb(this._delegate).then((function(t){return new Tb(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return nb(e=it(e),t)}(this._delegate,e||void 0).then((function(e){return new Tb(e,t.storage)}))}},{key:"getMetadata",value:function(){return yb(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return rb(e=it(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return kb(this._delegate)}},{key:"delete",value:function(){return this._throwIfRoot("delete"),bb(this._delegate)}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Xg(e)}}]),e}(),Cb=function(){function e(t,n){le(this,e),this.app=t,this._delegate=n}return he(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Nb(e))throw Qg("ref() expected a child path but got a URL, use refFromURL instead.");return new Sb(wb(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Nb(e))throw Qg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ek.makeFromUrl(e,this._delegate.host)}catch(t){throw Qg("refFromUrl() expected a valid full URL but got an invalid one.")}return new Sb(wb(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_b(this._delegate,e,t,n)}}]),e}();function Nb(e){return/^[A-Za-z]+:\/\//.test(e)}function Ab(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Cb(r,i)}!function(e){var t={TaskState:Wk,TaskEvent:Bk,StringFormat:hk,Storage:Cb,Reference:Sb};e.INTERNAL.registerComponent(new ot("storage-compat",Ab,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.10")}(yn);Wt("firebase","9.6.8","app");function Rb(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Pb;Object.create;function Ob(){return de({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Db=Ob,Lb=new Fe("auth","Firebase",Ob()),Mb=new yt("@firebase/auth");function Fb(e){if(Mb.logLevel<=lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Mb.error.apply(Mb,["Auth (".concat(Ut,"): ").concat(e)].concat(n))}}function Ub(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw zb.apply(void 0,[e].concat(n))}function jb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zb.apply(void 0,[e].concat(n))}function Vb(e,t,n){var r=Object.assign(Object.assign({},Db()),de({},t,n));return new Fe("auth","Firebase",r).create(t,{appName:e.name})}function qb(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ub(e,"argument-error"),Vb(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function zb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=at(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(at(o)))}return Lb.create.apply(Lb,[e].concat(n))}function Bb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw zb.apply(void 0,[t].concat(r))}}function Wb(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Fb(t),new Error(t)}function Kb(e,t){e||Wb(t)}var Hb=new Map;function Gb(e){Kb(e instanceof Function,"Expected a class definition");var t=Hb.get(e);return t?(Kb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Hb.set(e,t),t)}function Qb(e,t){var n=Pt(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Ge(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Ub(r,"already-initialized")}return n.initialize({options:t})}function Yb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Xb(){return"http:"===$b()||"https:"===$b()}function $b(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Jb=function(){function e(t,n){le(this,e),this.shortDelay=t,this.longDelay=n,Kb(n>t,"Short delay should be less than long delay!"),this.isMobile=Ne()||Re()}return he(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Xb()||Ae()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Zb(e,t){Kb(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var ew=function(){function e(){le(this,e)}return he(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Wb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Wb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Wb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),tw=(de(Pb={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),de(Pb,"MISSING_CUSTOM_TOKEN","internal-error"),de(Pb,"INVALID_IDENTIFIER","invalid-email"),de(Pb,"MISSING_CONTINUE_URI","internal-error"),de(Pb,"INVALID_PASSWORD","wrong-password"),de(Pb,"MISSING_PASSWORD","internal-error"),de(Pb,"EMAIL_EXISTS","email-already-in-use"),de(Pb,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),de(Pb,"INVALID_IDP_RESPONSE","invalid-credential"),de(Pb,"INVALID_PENDING_TOKEN","invalid-credential"),de(Pb,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),de(Pb,"MISSING_REQ_TYPE","internal-error"),de(Pb,"EMAIL_NOT_FOUND","user-not-found"),de(Pb,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),de(Pb,"EXPIRED_OOB_CODE","expired-action-code"),de(Pb,"INVALID_OOB_CODE","invalid-action-code"),de(Pb,"MISSING_OOB_CODE","internal-error"),de(Pb,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),de(Pb,"INVALID_ID_TOKEN","invalid-user-token"),de(Pb,"TOKEN_EXPIRED","user-token-expired"),de(Pb,"USER_NOT_FOUND","user-token-expired"),de(Pb,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),de(Pb,"INVALID_CODE","invalid-verification-code"),de(Pb,"INVALID_SESSION_INFO","invalid-verification-id"),de(Pb,"INVALID_TEMPORARY_PROOF","invalid-credential"),de(Pb,"MISSING_SESSION_INFO","missing-verification-id"),de(Pb,"SESSION_EXPIRED","code-expired"),de(Pb,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),de(Pb,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),de(Pb,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),de(Pb,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),de(Pb,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),de(Pb,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),de(Pb,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),de(Pb,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),de(Pb,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),de(Pb,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),de(Pb,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Pb),nw=new Jb(3e4,6e4);function rw(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function iw(e,t,n,r){return aw.apply(this,arguments)}function aw(){return aw=$(Z().mark((function e(t,n,r,i){var a,o=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",ow(t,a,$(Z().mark((function e(){var a,o,s,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Ye(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",ew.fetch()(lw(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),aw.apply(this,arguments)}function ow(e,t,n){return sw.apply(this,arguments)}function sw(){return(sw=$(Z().mark((function e(t,n,r){var i,a,o,u,c,l,f,h,d,p;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},tw),n),e.prev=2,a=new fw(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw hw(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=o.ok?u.errorMessage:u.error.message,l=c.split(" : "),f=s(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw hw(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=25;break}throw hw(t,"email-already-in-use",u);case 25:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=30;break}throw Vb(t,p,d);case 30:Ub(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof Me)){e.next=37;break}throw e.t0;case 37:Ub(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])})))).apply(this,arguments)}function uw(e,t,n,r){return cw.apply(this,arguments)}function cw(){return cw=$(Z().mark((function e(t,n,r,i){var a,o,s=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,iw(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ub(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),cw.apply(this,arguments)}function lw(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Zb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var fw=function(){function e(t){var n=this;le(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(jb(n.auth,"network-request-failed"))}),nw.get())}))}return he(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function hw(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=jb(e,t,r);return i.customData._tokenResponse=n,i}function dw(e,t){return pw.apply(this,arguments)}function pw(){return(pw=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iw(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vw(e,t){return mw.apply(this,arguments)}function mw(){return(mw=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iw(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yw(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function gw(){return gw=$(Z().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=it(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Bb((a=bw(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:yw(kw(a.auth_time)),issuedAtTime:yw(kw(a.iat)),expirationTime:yw(kw(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),gw.apply(this,arguments)}function kw(e){return 1e3*Number(e)}function bw(e){var t=s(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Fb("JWT malformed, contained fewer than 3 sections"),null;try{var a=Ie(r);return a?JSON.parse(a):(Fb("Failed to decode base64 JWT payload"),null)}catch(o){return Fb("Caught error parsing JWT payload as JSON",o),null}}function ww(e,t){return _w.apply(this,arguments)}function _w(){return _w=$(Z().mark((function e(t,n){var r=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Me&&xw(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),_w.apply(this,arguments)}function xw(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Iw=function(){function e(t){le(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return he(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout($(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ew=function(){function e(t,n){le(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return he(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=yw(this.lastLoginAt),this.creationTime=yw(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Tw(e){return Sw.apply(this,arguments)}function Sw(){return Sw=$(Z().mark((function e(t){var n,r,i,a,o,s,u,c,l,f,h;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ww(t,vw(r,{idToken:i}));case 6:Bb(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Aw(o.providerUserInfo):[],u=Nw(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ew(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),Sw.apply(this,arguments)}function Cw(){return(Cw=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=it(t),e.next=3,Tw(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nw(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(at(n),at(t))}function Aw(e){return e.map((function(e){var t=e.providerId,n=Rb(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Rw(e,t){return Pw.apply(this,arguments)}function Pw(){return(Pw=$(Z().mark((function e(t,n){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ow(t,{},$(Z().mark((function e(){var r,i,a,o,s,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ye({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=lw(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",ew.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ow=function(){function e(){le(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return he(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Bb(e.idToken,"internal-error"),Bb("undefined"!==typeof e.idToken,"internal-error"),Bb("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=bw(e);return Bb(t,"internal-error"),Bb("undefined"!==typeof t.exp,"internal-error"),Bb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=$(Z().mark((function e(t){var n,r=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Bb(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=$(Z().mark((function e(t,n){var r,i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rw(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Wb("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Bb("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Bb("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Bb("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Dw(e,t){Bb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Lw=function(){function e(t){le(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Rb(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Iw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?at(a.providerData):[],this.metadata=new Ew(a.createdAt||void 0,a.lastLoginAt||void 0)}return he(e,[{key:"getIdToken",value:function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ww(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Bb(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return gw.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Cw.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Bb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Bb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=$(Z().mark((function e(t){var n,r,i=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Tw(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=$(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,ww(this,dw(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Bb(k&&x,t,"internal-error");var I=Ow.fromJSON(this.name,x);Bb("string"===typeof k,t,"internal-error"),Dw(f,t.name),Dw(h,t.name),Bb("boolean"===typeof b,t,"internal-error"),Bb("boolean"===typeof w,t,"internal-error"),Dw(d,t.name),Dw(p,t.name),Dw(v,t.name),Dw(m,t.name),Dw(y,t.name),Dw(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(E._redirectEventId=m),E}},{key:"_fromIdTokenResponse",value:function(){var t=$(Z().mark((function t(n,r){var i,a,o,s=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Ow).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Tw(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Mw=function(){function e(){le(this,e),this.type="NONE",this.storage={}}return he(e,[{key:"_isAvailable",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Mw.type="NONE";var Fw=Mw;function Uw(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var jw=function(){function e(t,n,r){le(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Uw(this.userKey,a.apiKey,o),this.fullPersistenceKey=Uw("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return he(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=$(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Lw._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=$(Z().mark((function t(n,r){var i,a,o,s,u,c,l,f,h,d,p,v=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Gb(Fw),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Gb(Fw),s=Uw(i,n.config.apiKey,n.name),u=null,c=ce(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(s);case 17:if(!(h=t.sent)){t.next=23;break}return d=Lw._fromJSON(n,h),f!==o&&(u=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Vw(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ww(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Hw(t))return"Blackberry";if(Gw(t))return"Webos";if(zw(t))return"Safari";if((t.includes("chrome/")||Bw(t))&&!t.includes("edge/"))return"Chrome";if(Kw(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function qw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/firefox\//i.test(e)}function zw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Bw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/crios\//i.test(e)}function Ww(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/iemobile/i.test(e)}function Kw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/android/i.test(e)}function Hw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/blackberry/i.test(e)}function Gw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/webos/i.test(e)}function Qw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return/iphone|ipad|ipod/i.test(e)}function Yw(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return Qw(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Xw(){return Pe()&&10===document.documentMode}function $w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce();return Qw(e)||Kw(e)||Gw(e)||Hw(e)||/windows phone/i.test(e)||Ww(e)}function Jw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Vw(Ce());break;case"Worker":t="".concat(Vw(Ce()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ut,"/").concat(r)}var Zw=function(){function e(t,n){le(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new t_(this),this.idTokenSubscription=new t_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lb,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return he(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Gb(t)),this._initializationPromise=this.queue($(Z().mark((function r(){var i,a;return Z().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,jw.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=$(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=$(Z().mark((function e(t){var n,r,i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return i=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,a=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,i&&i!==a||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Bb(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Tw(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?it(t):null)&&Bb(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=$(Z().mark((function e(t){var n=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Bb(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue($(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue($(Z().mark((function n(){return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Gb(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Fe("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=$(Z().mark((function e(t,n){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Bb(n=t&&Gb(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,jw.create(this,[Gb(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=$(Z().mark((function e(t){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue($(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=$(Z().mark((function e(t){var n=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue($(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Bb(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Bb(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Jw(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=$(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=de({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function e_(e){return it(e)}var t_=function(){function e(t){var n=this;le(this,e),this.auth=t,this.observer=null,this.addObserver=Ze((function(e){return n.observer=e}))}return he(e,[{key:"next",get:function(){return Bb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();var n_=function(){function e(t,n){le(this,e),this.providerId=t,this.signInMethod=n}return he(e,[{key:"toJSON",value:function(){return Wb("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Wb("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Wb("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Wb("not implemented")}}]),e}();function r_(e,t){return i_.apply(this,arguments)}function i_(){return(i_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iw(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a_(e,t){return o_.apply(this,arguments)}function o_(){return(o_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uw(t,"POST","/v1/accounts:signInWithPassword",rw(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s_(e,t){return u_.apply(this,arguments)}function u_(){return(u_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uw(t,"POST","/v1/accounts:signInWithEmailLink",rw(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c_(e,t){return l_.apply(this,arguments)}function l_(){return(l_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uw(t,"POST","/v1/accounts:signInWithEmailLink",rw(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f_=function(e){re(n,e);var t=ue(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return le(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return he(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",a_(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",s_(t,{email:this._email,oobCode:this._password}));case 5:Ub(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",r_(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",c_(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ub(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(n_);function h_(e,t){return d_.apply(this,arguments)}function d_(){return(d_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uw(t,"POST","/v1/accounts:signInWithIdp",rw(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p_=function(e){re(n,e);var t=ue(n);function n(){var e;return le(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return he(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return h_(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,h_(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,h_(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ye(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ub("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Rb(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(n_);function v_(e,t){return m_.apply(this,arguments)}function m_(){return(m_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iw(t,"POST","/v1/accounts:sendVerificationCode",rw(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y_(){return(y_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uw(t,"POST","/v1/accounts:signInWithPhoneNumber",rw(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g_(){return(g_=$(Z().mark((function e(t,n){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uw(t,"POST","/v1/accounts:signInWithPhoneNumber",rw(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw hw(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k_=de({},"USER_NOT_FOUND","user-not-found");function b_(){return(b_=$(Z().mark((function e(t,n){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",uw(t,"POST","/v1/accounts:signInWithPhoneNumber",rw(t,r),k_));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w_=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this,"phone","phone")).params=e,r}return he(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return y_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return g_.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return b_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(n_);var __=function(){function e(t){var n,r,i,a,o,s;le(this,e);var u=Xe($e(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);Bb(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return he(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Xe($e(e)).link,n=t?Xe($e(t)).deep_link_id:null,r=Xe($e(e)).deep_link_id;return(r?Xe($e(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(Vm){return null}}}]),e}();var x_=function(){function e(){le(this,e),this.providerId=e.PROVIDER_ID}return he(e,null,[{key:"credential",value:function(e,t){return f_._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=__.parseLink(t);return Bb(n,"argument-error"),f_._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();x_.PROVIDER_ID="password",x_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",x_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var I_=function(){function e(t){le(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return he(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),E_=function(e){re(n,e);var t=ue(n);function n(){var e;return le(this,n),(e=t.apply(this,arguments)).scopes=[],e}return he(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return at(this.scopes)}}]),n}(I_),T_=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.call(this,"facebook.com")}return he(n,null,[{key:"credential",value:function(e){return p_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Vm){return null}}}]),n}(E_);T_.FACEBOOK_SIGN_IN_METHOD="facebook.com",T_.PROVIDER_ID="facebook.com";var S_=function(e){re(n,e);var t=ue(n);function n(){var e;return le(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return he(n,null,[{key:"credential",value:function(e,t){return p_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(Vm){return null}}}]),n}(E_);S_.GOOGLE_SIGN_IN_METHOD="google.com",S_.PROVIDER_ID="google.com";var C_=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.call(this,"github.com")}return he(n,null,[{key:"credential",value:function(e){return p_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(Vm){return null}}}]),n}(E_);C_.GITHUB_SIGN_IN_METHOD="github.com",C_.PROVIDER_ID="github.com";var N_=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.call(this,"twitter.com")}return he(n,null,[{key:"credential",value:function(e,t){return p_._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(Vm){return null}}}]),n}(E_);function A_(e,t){return R_.apply(this,arguments)}function R_(){return(R_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uw(t,"POST","/v1/accounts:signUp",rw(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}N_.TWITTER_SIGN_IN_METHOD="twitter.com",N_.PROVIDER_ID="twitter.com";var P_=function(){function e(t){le(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return he(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=$(Z().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Lw._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=O_(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=$(Z().mark((function t(n,r,i){var a;return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=O_(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function O_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}var D_=function(e){re(n,e);var t=ue(n);function n(e,r,i,a){var o,s;return le(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(oe(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return he(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Me);function L_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw D_._fromErrorAndOperation(e,n,t,r);throw n}))}function M_(e,t){return F_.apply(this,arguments)}function F_(){return F_=$(Z().mark((function e(t,n){var r,i,a=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=ww,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",P_._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),F_.apply(this,arguments)}function U_(e,t){return j_.apply(this,arguments)}function j_(){return j_=$(Z().mark((function e(t,n){var r,i,a,o,s,u,c=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,ww(t,L_(i,a,n,t),r);case 6:return Bb((o=e.sent).idToken,i,"internal-error"),Bb(s=bw(o.idToken),i,"internal-error"),u=s.sub,Bb(t.uid===u,i,"user-mismatch"),e.abrupt("return",P_._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ub(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),j_.apply(this,arguments)}function V_(e,t){return q_.apply(this,arguments)}function q_(){return q_=$(Z().mark((function e(t,n){var r,i,a,o,s=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,L_(t,i,n);case 4:return a=e.sent,e.next=7,P_._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),q_.apply(this,arguments)}function z_(e,t){return B_.apply(this,arguments)}function B_(){return(B_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",V_(e_(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W_(e,t,n){return K_.apply(this,arguments)}function K_(){return(K_=$(Z().mark((function e(t,n,r){var i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=e_(t),e.next=3,A_(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,P_._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H_(e,t,n){return z_(it(e),x_.credential(t,n))}function G_(e,t){return Q_.apply(this,arguments)}function Q_(){return(Q_=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",iw(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y_(e,t){return X_.apply(this,arguments)}function X_(){return(X_=$(Z().mark((function e(t,n){var r,i,a,o,s,u,c;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=it(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,ww(a,G_(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $_(e,t){return iw(e,"POST","/v2/accounts/mfaEnrollment:start",rw(e,t))}new WeakMap;var J_="__sak",Z_=function(){function e(t,n){le(this,e),this.storageRetriever=t,this.type=n}return he(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(J_,"1"),this.storage.removeItem(J_),Promise.resolve(!0)):Promise.resolve(!1)}catch(Vm){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var ex=function(e){re(n,e);var t=ue(n);function n(){var e;return le(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Ce();return zw(e)||Qw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=$w(),e._shouldAllowMigration=!0,e}return he(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Xw()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=$(Z().mark((function e(t,r){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(ie(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=$(Z().mark((function e(t){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(ie(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kn(ie(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Z_);ex.type="LOCAL";var tx=ex,nx=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return he(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Z_);nx.type="SESSION";var rx=nx;function ix(e){return Promise.all(e.map(function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ax=function(){function e(t){le(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return he(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=$(Z().mark((function e(t){var n,r,i,a,o,s,u,c;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ix(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ox(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ax.receivers=[];var sx=function(){function e(t){le(this,e),this.target=t,this.handlers=new Set}return he(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=$(Z().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=ox("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function ux(){return window}function cx(){return"undefined"!==typeof ux().WorkerGlobalScope&&"function"===typeof ux().importScripts}function lx(){return fx.apply(this,arguments)}function fx(){return(fx=$(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function hx(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var dx="firebaseLocalStorageDb",px="firebaseLocalStorage",vx="fbase_key",mx=function(){function e(t){le(this,e),this.request=t}return he(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function yx(e,t){return e.transaction([px],t?"readwrite":"readonly").objectStore(px)}function gx(){var e=indexedDB.deleteDatabase(dx);return new mx(e).toPromise()}function kx(){var e=indexedDB.open(dx,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(px,{keyPath:vx})}catch(r){n(r)}})),e.addEventListener("success",$(Z().mark((function n(){var r;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(px)){n.next=12;break}return r.close(),n.next=5,gx();case 5:return n.t0=t,n.next=8,kx();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function bx(e,t,n){return wx.apply(this,arguments)}function wx(){return wx=$(Z().mark((function e(t,n,r){var i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=yx(t,!0).put((de(i={},vx,n),de(i,"value",r),i)),e.abrupt("return",new mx(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}function _x(e,t){return xx.apply(this,arguments)}function xx(){return xx=$(Z().mark((function e(t,n){var r,i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yx(t,!1).get(n),e.next=3,new mx(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}function Ix(e,t){var n=yx(e,!0).delete(t);return new mx(n).toPromise()}var Ex=function(){function e(){le(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return he(e,[{key:"_openDb",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,kx();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=$(Z().mark((function e(t){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cx()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=$(Z().mark((function e(){var t=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ax._getInstance(cx()?self:null),this.receiver._subscribe("keyChanged",function(){var e=$(Z().mark((function e(n,r){var i;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=$(Z().mark((function e(t,n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=$(Z().mark((function e(){var t,n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lx();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new sx(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&hx()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=$(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,kx();case 5:return t=e.sent,e.next=8,bx(t,J_,"1");case 8:return e.next=10,Ix(t,J_);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=$(Z().mark((function e(t,n){var r=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite($(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return bx(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return _x(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=$(Z().mark((function e(t){var n=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite($(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ix(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=$(Z().mark((function e(){var t,n,r,i,a,o,s,u,c,l,f;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=yx(e,!1).getAll();return new mx(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=ce(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval($(Z().mark((function t(){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Ex.type="LOCAL";var Tx=Ex;function Sx(e,t){return iw(e,"POST","/v2/accounts/mfaSignIn:start",rw(e,t))}function Cx(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=jb("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Nx(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}Nx("rcb"),new Jb(3e4,6e4);var Ax="recaptcha";function Rx(e,t,n){return Px.apply(this,arguments)}function Px(){return Px=$(Z().mark((function e(t,n,r){var i,a,o,s,u,c,l,f,h;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Bb("string"===typeof a,t,"argument-error"),Bb(r.type===Ax,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Bb("enroll"===s.type,t,"internal-error"),e.next=13,$_(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Bb("signin"===s.type,t,"internal-error"),Bb(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Sx(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,v_(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Px.apply(this,arguments)}var Ox=function(){function e(t){le(this,e),this.providerId=e.PROVIDER_ID,this.auth=e_(t)}return he(e,[{key:"verifyPhoneNumber",value:function(e,t){return Rx(this.auth,e,it(t))}}],[{key:"credential",value:function(e,t){return w_._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?w_._fromTokenResponse(n,r):null}}]),e}();function Dx(e,t){return t?Gb(t):(Bb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ox.PROVIDER_ID="phone",Ox.PHONE_SIGN_IN_METHOD="phone";var Lx=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this,"custom","custom")).params=e,r}return he(n,[{key:"_getIdTokenResponse",value:function(e){return h_(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return h_(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return h_(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(n_);function Mx(e){return V_(e.auth,new Lx(e),e.bypassAuthState)}function Fx(e){var t=e.auth,n=e.user;return Bb(n,t,"internal-error"),U_(n,new Lx(e),e.bypassAuthState)}function Ux(e){return jx.apply(this,arguments)}function jx(){return(jx=$(Z().mark((function e(t){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Bb(r=t.user,n,"internal-error"),e.abrupt("return",M_(r,new Lx(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];le(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return he(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=$(Z().mark((function t(n,r){return Z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=$(Z().mark((function e(t){var n,r,i,a,o,s,u;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mx;case"linkViaPopup":case"linkViaRedirect":return Ux;case"reauthViaPopup":case"reauthViaRedirect":return Fx;default:Ub(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Kb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Kb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),qx=new Jb(2e3,1e4);function zx(e,t,n){return Bx.apply(this,arguments)}function Bx(){return(Bx=$(Z().mark((function e(t,n,r){var i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=e_(t),qb(t,n,I_),a=Dx(i,r),o=new Wx(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wx=function(e){re(n,e);var t=ue(n);function n(e,r,i,a,o){var s;return le(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=oe(s),s}return he(n,[{key:"executeNotNull",value:function(){var e=$(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Bb(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=$(Z().mark((function e(){var t,n=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kb(1===this.filter.length,"Popup operations only handle one event"),t=ox(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(jb(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(jb(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(jb(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,qx.get())}()}}]),n}(Vx);Wx.currentPopupAction=null;var Kx=new Map,Hx=function(e){re(n,e);var t=ue(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return le(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return he(n,[{key:"execute",value:function(){var e=$(Z().mark((function e(){var t,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Kx.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Gx(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,kn(ie(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Kx.set(this.auth._key(),t);case 21:return this.bypassAuthState||Kx.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=$(Z().mark((function e(t){var r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",kn(ie(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",kn(ie(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Vx);function Gx(e,t){return Qx.apply(this,arguments)}function Qx(){return(Qx=$(Z().mark((function e(t,n){var r,i,a;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Xx(n),i=Yx(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yx(e){return Gb(e._redirectPersistence)}function Xx(e){return Uw("pendingRedirect",e.config.apiKey,e.name)}function $x(e,t){return Jx.apply(this,arguments)}function Jx(){return Jx=$(Z().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=e_(t),a=Dx(i,n),o=new Hx(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Jx.apply(this,arguments)}var Zx=function(){function e(t){le(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return he(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!tI(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(jb(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(eI(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(eI(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function eI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function tI(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function nI(e){return rI.apply(this,arguments)}function rI(){return rI=$(Z().mark((function e(t){var n,r=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",iw(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),rI.apply(this,arguments)}var iI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aI=/^https?/;function oI(){return(oI=$(Z().mark((function e(t){var n,r,i,a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,nI(t);case 4:n=e.sent,r=n.authorizedDomains,i=ce(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!sI(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ub(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function sI(e){var t=Yb(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!aI.test(r))return!1;if(iI.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var uI=new Jb(3e4,6e4);function cI(){var e=ux().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=at(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var lI=null;function fI(e){return lI=lI||function(e){return new Promise((function(t,n){var r,i,a;function o(){cI(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){cI(),n(jb(e,"network-request-failed"))},timeout:uI.get()})}if(null===(i=null===(r=ux().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=ux().gapi)||void 0===a?void 0:a.load)){var s=Nx("iframefcb");return ux()[s]=function(){gapi.load?o():n(jb(e,"network-request-failed"))},Cx("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw lI=null,e}))}(e),lI}var hI=new Jb(5e3,15e3),dI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vI(e){var t=e.config;Bb(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Zb(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Ut},i=pI.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ye(r).slice(1))}function mI(e){return yI.apply(this,arguments)}function yI(){return yI=$(Z().mark((function e(t){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fI(t);case 2:return n=e.sent,Bb(r=ux().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:vI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dI,dontclear:!0},(function(e){return new Promise(function(){var n=$(Z().mark((function n(r,i){var a,o,s;return Z().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){ux().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=jb(t,"network-request-failed"),o=ux().setTimeout((function(){i(a)}),hI.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),yI.apply(this,arguments)}var gI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kI="_blank",bI="http://localhost",wI=function(){function e(t){le(this,e),this.window=t,this.associatedEvent=null}return he(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function _I(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},gI),{width:r.toString(),height:i.toString(),top:a,left:o}),l=Ce().toLowerCase();n&&(u=Bw(l)?kI:n),qw(l)&&(t=t||bI,c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=s(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Yw(l)&&"_self"!==u)return xI(t||"",u),new wI(null);var h=window.open(t||"",u,f);Bb(h,e,"popup-blocked");try{h.focus()}catch(d){}return new wI(h)}function xI(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var II="__/auth/handler",EI="emulator/auth/handler";function TI(e,t,n,r,i,a){Bb(e.config.authDomain,e,"auth-domain-config-required"),Bb(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ut,eventId:i};if(t instanceof I_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Ke(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=s(c[u],2),f=l[0],h=l[1];o[f]=h}}if(t instanceof E_){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(II);return Zb(t,EI)}(e),"?").concat(Ye(p).slice(1))}var SI="webStorageSupport",CI=function(){function e(){le(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rx,this._completeRedirectFn=$x}return he(e,[{key:"_openPopup",value:function(){var e=$(Z().mark((function e(t,n,r,i){var a,o;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Kb(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=TI(t,n,r,Yb(),i),e.abrupt("return",_I(t,o,ox()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=$(Z().mark((function e(t,n,r,i){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=TI(t,n,r,Yb(),i),ux().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Kb(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=$(Z().mark((function e(t){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mI(t);case 2:return n=e.sent,r=new Zx(t),n.register("authEvent",(function(e){return Bb(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(SI,{type:SI},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Ub(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return oI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return $w()||zw()||Qw()}}]),e}(),NI=CI,AI=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this,"phone")).credential=e,r}return he(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return iw(e,"POST","/v2/accounts/mfaEnrollment:finalize",rw(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return iw(e,"POST","/v2/accounts/mfaSignIn:finalize",rw(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){le(this,e),this.factorId=t}return he(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Wb("unexpected MultiFactorSessionType")}}}]),e}());(function(){function e(){le(this,e)}return he(e,null,[{key:"assertion",value:function(e){return AI._fromCredential(e)}}]),e}()).FACTOR_ID="phone";var RI,PI="@firebase/auth",OI="0.19.9",DI=function(){function e(t){le(this,e),this.auth=t,this.internalListeners=new Map}return he(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=$(Z().mark((function e(t){var n;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Bb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function LI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt(),t=Pt(e,"auth");return t.isInitialized()?t.getImmediate():Qb(e,{popupRedirectResolver:NI,persistence:[Tx,tx,rx]})}RI="Browser",Rt(new ot("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,a=i.apiKey,o=i.authDomain;return function(e){Bb(a&&!a.includes(":"),"invalid-api-key",{appName:e.name}),Bb(!(null===o||void 0===o?void 0:o.includes(":")),"argument-error",{appName:e.name});var t={apiKey:a,authDomain:o,clientPlatform:RI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jw(RI)},r=new Zw(e,t);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gb);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(r,n),r}(r)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Rt(new ot("auth-internal",(function(e){return function(e){return new DI(e)}(e_(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Wt(PI,OI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(RI)),Wt(PI,OI,"esm2017");var MI="@firebase/database",FI="0.12.5",UI="";var jI=function(){function e(t){le(this,e),this.domStorage_=t,this.prefix_="firebase:"}return he(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),qe(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ve(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),VI=function(){function e(){le(this,e),this.cache_={},this.isInMemoryStorage=!0}return he(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Be(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),qI=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new jI(t)}}catch(n){}return new VI},zI=qI("localStorage"),BI=qI("sessionStorage"),WI=new yt("@firebase/database"),KI=function(){var e=1;return function(){return e++}}(),HI=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,ge(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Je;n.update(t);var r=n.digest();return we.encodeByteArray(r)},GI=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?qe(r):r,t+=" "}return t},QI=null,YI=!0,XI=function(e,t){ge(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(WI.logLevel=lt.VERBOSE,QI=WI.log.bind(WI),t&&BI.set("logging_enabled",!0)):"function"===typeof e?QI=e:(QI=null,BI.remove("logging_enabled"))},$I=function(){if(!0===YI&&(YI=!1,null===QI&&!0===BI.get("logging_enabled")&&XI(!0)),QI){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=GI.apply(null,t);QI(r)}},JI=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];$I.apply(void 0,[e].concat(n))}},ZI=function(){var e="FIREBASE INTERNAL ERROR: "+GI.apply(void 0,arguments);WI.error(e)},eE=function(){var e="FIREBASE FATAL ERROR: ".concat(GI.apply(void 0,arguments));throw WI.error(e),new Error(e)},tE=function(){var e="FIREBASE WARNING: "+GI.apply(void 0,arguments);WI.warn(e)},nE=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},rE="[MIN_NAME]",iE="[MAX_NAME]",aE=function(e,t){if(e===t)return 0;if(e===rE||t===iE)return-1;if(t===rE||e===iE)return 1;var n=vE(e),r=vE(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},oE=function(e,t){return e===t?0:e<t?-1:1},sE=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+qe(t))},uE=function e(t){if("object"!==typeof t||null===t)return qe(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=qe(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},cE=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function lE(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var fE=function(e){ge(!nE(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var hE=new RegExp("^-?(0*)\\d{1,10}$"),dE=-2147483648,pE=2147483647,vE=function(e){if(hE.test(e)){var t=Number(e);if(t>=dE&&t<=pE)return t}return null},mE=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw tE("Exception was thrown by user callback.",e),t}),Math.floor(0))}},yE=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},gE=function(){function e(t,n){var r=this;le(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return he(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){tE('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),kE=function(){function e(t,n,r){var i=this;le(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return he(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?($I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tE(e)}}]),e}(),bE=function(){function e(t){le(this,e),this.accessToken=t}return he(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();bE.OWNER="owner";var wE="5",_E=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xE="websocket",IE="long_polling",EE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];le(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zI.get("host:"+t)||this._host}return he(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&zI.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function TE(e,t,n){var r;if(ge("string"===typeof t,"typeof type must == string"),ge("object"===typeof n,"typeof params must == object"),t===xE)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==IE)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return lE(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var SE=function(){function e(){le(this,e),this.counters_={}}return he(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Be(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Ee(void 0,this.counters_)}}]),e}(),CE={},NE={};function AE(e){var t=e.toString();return CE[t]||(CE[t]=new SE),CE[t]}var RE=function(){function e(t){le(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return he(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&mE((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),PE="start",OE="close",DE=function(){function e(t,n,r,i,a,o,s){var u=this;le(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=JI(t),this.stats_=AE(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),TE(n,IE,e)}}return he(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new RE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Oe()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new LE((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===PE)n.id=a,n.password=o;else{if(i!==OE)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=wE,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&_E.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=qe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=_e(t),r=cE(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Oe()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=qe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Oe()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),LE=function(){function e(t,n,r,i){if(le(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Oe())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=KI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){$I("frame writing exception"),s.stack&&$I(s.stack),$I(s)}}}return he(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Oe()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){$I("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||$I("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),ME=null;"undefined"!==typeof MozWebSocket?ME=MozWebSocket:"undefined"!==typeof WebSocket&&(ME=WebSocket);var FE=function(){function e(t,n,r,i,a,o,s){le(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=JI(this.connId),this.stats_=AE(n),this.connURL=e.connectionURL_(n,o,s,i),this.nodeAdmin=n.nodeAdmin}return he(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zI.set("previous_websocket_failure",!0);try{if(Oe()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(wE,"/").concat(UI,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBwS_jf7yuRFb4wahRFCoXhhKzoJPN9R8U",REACT_APP_APP_ID:"1:560448026776:web:10a763e6a9728b7b6e78ed",REACT_APP_AUTH_DOMAIN:"nwitter-ccf4c.firebaseapp.com",REACT_APP_DATABASE_URL:"https://nwitter-ccf4c.firebaseapp.com",REACT_APP_MESSAGIN_ID:"560448026776",REACT_APP_PROJECT_ID:"nwitter-ccf4c",REACT_APP_STORAGE_BUCKET:"nwitter-ccf4c.appspot.com"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o}),this.mySock=new ME(this.connURL,[],i)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new ME(this.connURL,[],s)}}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){zI.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ve(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(ge(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=qe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=cE(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={};return i.v=wE,!Oe()&&"undefined"!==typeof location&&location.hostname&&_E.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),TE(e,xE,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==ME&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return zI.isInMemoryStorage||!0===zI.get("previous_websocket_failure")}}]),e}();FE.responsesRequiredToBeHealthy=2,FE.healthyTimeout=3e4;var UE=function(){function e(t){le(this,e),this.initTransports_(t)}return he(e,[{key:"initTransports_",value:function(t){var n=FE&&FE.isAvailable(),r=n&&!FE.previouslyFailed();if(t.webSocketOnly&&(n||tE("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[FE];else{var i,a=this.transports_=[],o=ce(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[DE,FE]}}]),e}(),jE=function(){function e(t,n,r,i,a,o,s,u,c,l){le(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=JI("c:"+this.id+":"),this.transportManager_=new UE(n),this.log_("Connection created"),this.start_()}return he(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=yE((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=sE("t",e),n=sE("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=sE("t",e),n=sE("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=sE("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?ZI("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZI("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),wE!==n&&tE("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),yE((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yE((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zI.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),VE=function(){function e(){le(this,e)}return he(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),qE=function(){function e(t){le(this,e),this.allowedEvents_=t,this.listeners_={},ge(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return he(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=at(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){ge(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),zE=function(e){re(n,e);var t=ue(n);function n(){var e;return le(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Ne()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return he(n,[{key:"getInitialEvent",value:function(e){return ge("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(qE),BE=function(){function e(t,n){if(le(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return he(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function WE(){return new BE("")}function KE(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function HE(e){return e.pieces_.length-e.pieceNum_}function GE(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new BE(e.pieces_,t)}function QE(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function YE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function XE(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new BE(t,0)}function $E(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof BE)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new BE(n,0)}function JE(e){return e.pieceNum_>=e.pieces_.length}function ZE(e,t){var n=KE(e),r=KE(t);if(null===n)return t;if(n===r)return ZE(GE(e),GE(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function eT(e,t){if(HE(e)!==HE(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function tT(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(HE(e)>HE(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var nT=he((function e(t,n){le(this,e),this.errorPrefix_=n,this.parts_=YE(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=rt(this.parts_[r]);rT(this)}));function rT(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+iT(e))}function iT(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var aT=function(e){re(n,e);var t=ue(n);function n(){var e,r,i;return le(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return he(n,[{key:"getInitialEvent",value:function(e){return ge("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(qE),oT=1e3,sT=function(e){re(n,e);var t=ue(n);function n(e,r,i,a,o,s,u,c){var l;if(le(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=JI("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=oT,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Oe())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return aT.getInstance().on("visible",l.onVisible_,oe(l)),-1===e.host.indexOf("fblocal")&&zE.getInstance().on("online",l.onOnline_,oe(l)),l}return he(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(qe(i)),ge(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Te,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ge(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ze(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ze(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ge(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+qe(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):ZI("Unrecognized action received from server: "+qe(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;ge(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oT,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=oT,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=oT),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=$(Z().mark((function e(){var t,r,i,a,o,u,c,l,f,h,d,p,v,m,y=this;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},f=function(e){ge(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=s(d,2),v=p[0],m=p[1],u?$I("getToken() completed but was canceled"):($I("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,c=new jE(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){tE(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&tE(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){$I("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){$I("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Ke(this.interruptReasons_)&&(this.reconnectDelay_=oT,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return uE(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new BE(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){$I("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){$I("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=ce(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=ce(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Oe()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+UI.replace(/\./g,"-")]=1,Ne()?e["framework.cordova"]=1:Re()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=zE.getInstance().currentlyOnline();return Ke(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Be(e,"w")){var n=We(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();tE("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(VE);sT.nextPersistentConnectionId_=0,sT.nextConnectionId_=0;var uT,cT=function(){function e(t,n){le(this,e),this.name=t,this.node=n}return he(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),lT=function(){function e(){le(this,e)}return he(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new cT(rE,e),r=new cT(rE,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return cT.MIN}}]),e}(),fT=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"compare",value:function(e,t){return aE(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw ke("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return cT.MIN}},{key:"maxPost",value:function(){return new cT(iE,uT)}},{key:"makePost",value:function(e,t){return ge("string"===typeof e,"KeyIndex indexValue must always be a string."),new cT(e,uT)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return uT},set:function(e){uT=e}}]),n}(lT),hT=new fT,dT=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;le(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return he(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),pT=function(){function e(t,n,r,i,a){le(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:yT.EMPTY_NODE,this.right=null!=a?a:yT.EMPTY_NODE}return he(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return yT.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return yT.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();pT.RED=!0,pT.BLACK=!1;var vT,mT=function(){function e(){le(this,e)}return he(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new pT(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),yT=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;le(this,e),this.comparator_=t,this.root_=n}return he(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,pT.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,pT.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new dT(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new dT(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new dT(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new dT(this.root_,null,this.comparator_,!0,e)}}]),e}();function gT(e,t){return aE(e.name,t.name)}function kT(e,t){return aE(e,t)}yT.EMPTY_NODE=new mT;var bT,wT,_T,xT=function(e){return"number"===typeof e?"number:"+fE(e):"string:"+e},IT=function(e){if(e.isLeafNode()){var t=e.val();ge("string"===typeof t||"number"===typeof t||"object"===typeof t&&Be(t,".sv"),"Priority must be a string or number.")}else ge(e===vT||e.isEmpty(),"priority of unexpected type.");ge(e===vT||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ET=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;le(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,ge(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),IT(this.priorityNode_)}return he(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return JE(t)?this:".priority"===KE(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=KE(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(ge(".priority"!==r||1===HE(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(GE(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+xT(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?fE(this.value_):this.value_,this.lazyHash_=HI(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(ge(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return ge(i>=0,"Unknown leaf type: "+n),ge(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return bT},set:function(e){bT=e}}]),e}();ET.VALUE_TYPE_ORDER=["object","boolean","number","string"];var TT,ST,CT=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?aE(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return cT.MIN}},{key:"maxPost",value:function(){return new cT(iE,new ET("[PRIORITY-POST]",_T))}},{key:"makePost",value:function(e,t){var n=wT(e);return new cT(t,new ET("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(lT),NT=new CT,AT=Math.log(2),RT=function(){function e(t){le(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/AT,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return he(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),PT=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new pT(o,a.node,pT.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new pT(o,a.node,pT.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],f=n?n(l):l;u(new pT(f,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?s(f,pT.BLACK):(s(f,pT.BLACK),s(f,pT.RED))}return a}(new RT(e.length));return new yT(r||t,a)},OT={},DT=function(){function e(t,n){le(this,e),this.indexes_=t,this.indexSet_=n}return he(e,[{key:"get",value:function(e){var t=We(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof yT?t:null}},{key:"hasIndex",value:function(e){return Be(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){ge(t!==hT,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(cT.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?PT(i,t.getCompare()):OT;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(He(this.indexes_,(function(e,i){var a=We(r.indexSet_,i);if(ge(a,"Missing index implementation for "+i),e===OT){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(cT.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),PT(o,a.getCompare())}return OT}var c=n.get(t.name),l=e;return c&&(l=l.remove(new cT(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(He(this.indexes_,(function(e){if(e===OT)return e;var r=n.get(t.name);return r?e.remove(new cT(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return ge(OT&&NT,"ChildrenNode.ts has not been loaded"),TT=TT||new e({".priority":OT},{".priority":NT})}}]),e}(),LT=function(){function e(t,n,r){le(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&IT(this.priorityNode_),this.children_.isEmpty()&&ge(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return he(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||ST}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ST:t}},{key:"getChild",value:function(e){var t=KE(e);return null===t?this:this.getImmediateChild(t).getChild(GE(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(ge(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new cT(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?ST:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=KE(e);if(null===n)return t;ge(".priority"!==KE(e)||1===HE(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(GE(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(NT,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+xT(this.getPriority().val())+":"),this.forEachChild(NT,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":HI(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new cT(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new cT(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new cT(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,cT.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,cT.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===MT?-1:0}},{key:"withIndex",value:function(t){if(t===hT||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===hT||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(NT),r=t.getIterator(NT),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===hT?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return ST||(ST=new e(new yT(kT),null,DT.Default))}}]),e}();LT.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var MT=new(function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.call(this,new yT(kT),LT.EMPTY_NODE,DT.Default)}return he(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return LT.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(LT));Object.defineProperties(cT,{MIN:{value:new cT(rE,LT.EMPTY_NODE)},MAX:{value:new cT(iE,MT)}}),fT.__EMPTY_NODE=LT.EMPTY_NODE,ET.__childrenNodeConstructor=LT,vT=MT,function(e){_T=e}(MT);function FT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return LT.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ge(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new ET(n,FT(t))}if(e instanceof Array){var r=LT.EMPTY_NODE;return lE(e,(function(t,n){if(Be(e,t)&&"."!==t.substring(0,1)){var i=FT(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(FT(t))}var i=[],a=!1,o=e;if(lE(o,(function(e,t){if("."!==e.substring(0,1)){var n=FT(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new cT(e,n)))}})),0===i.length)return LT.EMPTY_NODE;var s=PT(i,gT,(function(e){return e.name}),kT);if(a){var u=PT(i,NT.getCompare());return new LT(s,FT(t),new DT({".priority":u},{".priority":NT}))}return new LT(s,FT(t),DT.Default)}!function(e){wT=e}(FT);var UT=function(e){re(n,e);var t=ue(n);function n(e){var r;return le(this,n),(r=t.call(this)).indexPath_=e,ge(!JE(e)&&".priority"!==KE(e),"Can't create PathIndex with empty path or .priority key"),r}return he(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?aE(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=FT(e),r=LT.EMPTY_NODE.updateChild(this.indexPath_,n);return new cT(t,r)}},{key:"maxPost",value:function(){var e=LT.EMPTY_NODE.updateChild(this.indexPath_,MT);return new cT(iE,e)}},{key:"toString",value:function(){return YE(this.indexPath_,0).join("/")}}]),n}(lT),jT=function(e){re(n,e);var t=ue(n);function n(){return le(this,n),t.apply(this,arguments)}return he(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?aE(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return cT.MIN}},{key:"maxPost",value:function(){return cT.MAX}},{key:"makePost",value:function(e,t){var n=FT(e);return new cT(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(lT),VT=new jT,qT="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function zT(e){return{type:"value",snapshotNode:e}}function BT(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function WT(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function KT(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var HT=function(){function e(){le(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=NT}return he(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return ge(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return ge(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rE}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return ge(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return ge(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:iE}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return ge(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===NT}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function GT(e){var t,n={};return e.isDefault()||(e.index_===NT?t="$priority":e.index_===VT?t="$value":e.index_===hT?t="$key":(ge(e.index_ instanceof UT,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=qe(t),e.startSet_&&(n.startAt=qe(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+qe(e.indexStartName_))),e.endSet_&&(n.endAt=qe(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+qe(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function QT(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==NT&&(t.i=e.index_.toString()),t}var YT=function(e){re(n,e);var t=ue(n);function n(e,r,i,a){var o;return le(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=JI("p:rest:"),o.listens_={},o}return he(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=GT(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),We(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=GT(e._queryParams),r=e._path.toString(),i=new Te;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=s(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Ye(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Ve(l.responseText)}catch(n){tE("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&tE("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(ge(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(VE),XT=function(){function e(){le(this,e),this.rootNode_=LT.EMPTY_NODE}return he(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function $T(){return{value:null,children:new Map}}function JT(e,t,n){if(JE(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=KE(t);e.children.has(r)||e.children.set(r,$T()),JT(e.children.get(r),t=GE(t),n)}}function ZT(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){ZT(r,new BE(t.toString()+"/"+e),n)}))}var eS,tS=function(){function e(t){le(this,e),this.collection_=t,this.last_=null}return he(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&lE(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),nS=function(){function e(t,n){le(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new tS(t);var r=1e4+2e4*Math.random();yE(this.reportStats_.bind(this),Math.floor(r))}return he(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;lE(t,(function(t,i){i>0&&Be(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),yE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function rS(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(eS||(eS={}));var iS,aS=function(){function e(t,n,r){le(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=eS.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return he(e,[{key:"operationForChild",value:function(t){if(JE(this.path)){if(null!=this.affectedTree.value)return ge(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new BE(t));return new e(WE(),n,this.revert)}return ge(KE(this.path)===t,"operationForChild called for unrelated child."),new e(GE(this.path),this.affectedTree,this.revert)}}]),e}(),oS=function(){function e(t,n,r){le(this,e),this.source=t,this.path=n,this.snap=r,this.type=eS.OVERWRITE}return he(e,[{key:"operationForChild",value:function(t){return JE(this.path)?new e(this.source,WE(),this.snap.getImmediateChild(t)):new e(this.source,GE(this.path),this.snap)}}]),e}(),sS=function(){function e(t,n,r){le(this,e),this.source=t,this.path=n,this.children=r,this.type=eS.MERGE}return he(e,[{key:"operationForChild",value:function(t){if(JE(this.path)){var n=this.children.subtree(new BE(t));return n.isEmpty()?null:n.value?new oS(this.source,WE(),n.value):new e(this.source,WE(),n)}return ge(KE(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,GE(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),uS=function(){function e(t,n,r){le(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return he(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(JE(e))return this.isFullyInitialized()&&!this.filtered_;var t=KE(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function cS(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw ke("Should only compare child_ events.");var r=new cT(t.childName,t.snapshotNode),i=new cT(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function lS(e,t){return{eventCache:e,serverCache:t}}function fS(e,t,n,r){return lS(new uS(t,n,r),e.serverCache)}function hS(e,t,n,r){return lS(e.eventCache,new uS(t,n,r))}function dS(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function pS(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var vS=function(){return iS||(iS=new yT(oE)),iS},mS=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vS();le(this,e),this.value=t,this.children=n}return he(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:WE(),value:this.value};if(JE(e))return null;var n=KE(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(GE(e),t);return null!=i?{path:$E(new BE(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(JE(t))return this;var n=KE(t),r=this.children.get(n);return null!==r?r.subtree(GE(t)):new e(null)}},{key:"set",value:function(t,n){if(JE(t))return new e(n,this.children);var r=KE(t),i=(this.children.get(r)||new e(null)).set(GE(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(JE(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=KE(t),r=this.children.get(n);if(r){var i,a=r.remove(GE(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(JE(e))return this.value;var t=KE(e),n=this.children.get(t);return n?n.get(GE(e)):null}},{key:"setTree",value:function(t,n){if(JE(t))return n;var r,i=KE(t),a=(this.children.get(i)||new e(null)).setTree(GE(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(WE(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_($E(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,WE(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(JE(e))return null;var i=KE(e),a=this.children.get(i);return a?a.findOnPath_(GE(e),$E(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,WE(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(JE(t))return this;this.value&&r(n,this.value);var i=KE(t),a=this.children.get(i);return a?a.foreachOnPath_(GE(t),$E(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(WE(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_($E(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return lE(t,(function(e,t){n=n.set(new BE(e),t)})),n}}]),e}(),yS=function(){function e(t){le(this,e),this.writeTree_=t}return he(e,null,[{key:"empty",value:function(){return new e(new mS(null))}}]),e}();function gS(e,t,n){if(JE(t))return new yS(new mS(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=ZE(i,t);return a=a.updateChild(o,n),new yS(e.writeTree_.set(i,a))}var s=new mS(n),u=e.writeTree_.setTree(t,s);return new yS(u)}function kS(e,t,n){var r=e;return lE(n,(function(e,n){r=gS(r,$E(t,e),n)})),r}function bS(e,t){if(JE(t))return yS.empty();var n=e.writeTree_.setTree(t,new mS(null));return new yS(n)}function wS(e,t){return null!=_S(e,t)}function _S(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(ZE(n.path,t)):null}function xS(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(NT,(function(e,n){t.push(new cT(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new cT(e,n.value))})),t}function IS(e,t){if(JE(t))return e;var n=_S(e,t);return new yS(null!=n?new mS(n):e.writeTree_.subtree(t))}function ES(e){return e.writeTree_.isEmpty()}function TS(e,t){return SS(WE(),e.writeTree_,t)}function SS(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(ge(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=SS($E(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild($E(e,".priority"),r)),n}function CS(e,t){return zS(t,e)}function NS(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function AS(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));ge(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&RS(s,r.path)?i=!1:tT(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=OS(e.allWrites,PS,WE()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=bS(e.visibleWrites,r.path):lE(r.children,(function(t){e.visibleWrites=bS(e.visibleWrites,$E(r.path,t))}));return!0}return!1}function RS(e,t){if(e.snap)return tT(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&tT($E(e.path,n),t))return!0;return!1}function PS(e){return e.visible}function OS(e,t,n){for(var r=yS.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)tT(n,o)?r=gS(r,s=ZE(n,o),a.snap):tT(o,n)&&(s=ZE(o,n),r=gS(r,WE(),a.snap.getChild(s)));else{if(!a.children)throw ke("WriteRecord should have .snap or .children");if(tT(n,o))r=kS(r,s=ZE(n,o),a.children);else if(tT(o,n))if(JE(s=ZE(o,n)))r=kS(r,WE(),a.children);else{var u=We(a.children,KE(s));if(u){var c=u.getChild(GE(s));r=gS(r,WE(),c)}}}}}return r}function DS(e,t,n,r,i){if(r||i){var a=IS(e.visibleWrites,t);if(!i&&ES(a))return n;if(i||null!=n||wS(a,WE())){return TS(OS(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(tT(e.path,t)||tT(t,e.path))}),t),n||LT.EMPTY_NODE)}return null}var o=_S(e.visibleWrites,t);if(null!=o)return o;var s=IS(e.visibleWrites,t);return ES(s)?n:null!=n||wS(s,WE())?TS(s,n||LT.EMPTY_NODE):null}function LS(e,t,n,r){return DS(e.writeTree,e.treePath,t,n,r)}function MS(e,t){return function(e,t,n){var r=LT.EMPTY_NODE,i=_S(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(NT,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=IS(e.visibleWrites,t);return n.forEachChild(NT,(function(e,t){var n=TS(IS(a,new BE(e)),t);r=r.updateImmediateChild(e,n)})),xS(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return xS(IS(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function FS(e,t,n,r){return function(e,t,n,r,i){ge(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=$E(t,n);if(wS(e.visibleWrites,a))return null;var o=IS(e.visibleWrites,a);return ES(o)?i.getChild(n):TS(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function US(e,t){return function(e,t){return _S(e.visibleWrites,t)}(e.writeTree,$E(e.treePath,t))}function jS(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=IS(e.visibleWrites,t),c=_S(u,WE());if(null!=c)s=c;else{if(null==n)return[];s=TS(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function VS(e,t,n){return function(e,t,n,r){var i=$E(t,n),a=_S(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?TS(IS(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function qS(e,t){return zS($E(e.treePath,t),e.writeTree)}function zS(e,t){return{treePath:e,writeTree:t}}var BS=function(){function e(){le(this,e),this.changeMap=new Map}return he(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;ge("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ge(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,KT(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,WT(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,BT(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw ke("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,KT(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),WS=new(function(){function e(){le(this,e)}return he(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),KS=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;le(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return he(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new uS(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return VS(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pS(this.viewCache_),i=jS(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function HS(e,t,n,r,i){var a,o,s=new BS;if(n.type===eS.OVERWRITE){var u=n;u.source.fromUser?a=YS(e,t,u.path,u.snap,r,i,s):(ge(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!JE(u.path),a=QS(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===eS.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=$E(n,r);XS(t,KE(c))&&(s=YS(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=$E(n,r);XS(t,KE(c))||(s=YS(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(ge(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=JS(e,t,c.path,c.children,r,i,o,s))}else if(n.type===eS.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=US(r,n))return t;var s,u=new KS(r,t,i),c=t.eventCache.getNode();if(JE(n)||".priority"===KE(n)){var l;if(t.serverCache.isFullyInitialized())l=LS(r,pS(t));else{var f=t.serverCache.getNode();ge(f instanceof LT,"serverChildren would be complete if leaf node"),l=MS(r,f)}l=l,s=e.filter.updateFullNode(c,l,a)}else{var h=KE(n),d=VS(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(s=null!=d?e.filter.updateChild(c,h,d,GE(n),u,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,LT.EMPTY_NODE,GE(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=LS(r,pS(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=US(r,WE()),fS(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=US(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(JE(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return QS(e,t,n,u.getNode().getChild(n),i,a,s,o);if(JE(n)){var c=new mS(null);return u.getNode().forEachChild(hT,(function(e,t){c=c.set(new BE(e),t)})),JS(e,t,n,c,i,a,s,o)}return t}var l=new mS(null);return r.foreach((function(e,t){var r=$E(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),JS(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==eS.LISTEN_COMPLETE)throw ke("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=hS(t,a.getNode(),a.isFullyInitialized()||JE(n),a.isFiltered());return GS(e,o,n,r,WS,i)}(e,t,n.path,r,s)}var f=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=dS(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(zT(dS(t)))}}(t,a,f),{viewCache:a,changes:f}}function GS(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=US(r,n))return t;if(JE(n))if(ge(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=pS(t),l=MS(r,c instanceof LT?c:LT.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=LS(r,pS(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=KE(n);if(".priority"===h){ge(1===HE(n),"Can't have a priority with additional path components");var d=u.getNode(),p=FS(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,m=GE(n);if(u.isCompleteForChild(h)){s=t.serverCache.getNode();var y=FS(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(h).updateChild(m,y):u.getNode().getImmediateChild(h)}else v=VS(r,h,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),h,v,m,i,a):u.getNode()}}return fS(t,o,u.isFullyInitialized()||JE(n),e.filter.filtersNodes())}function QS(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(JE(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{var h=KE(n);if(!c.isCompleteForPath(n)&&HE(n)>1)return t;var d=GE(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);u=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,WS,null)}var v=hS(t,u,c.isFullyInitialized()||JE(n),l.filtersNodes());return GS(e,v,n,i,new KS(i,v,a),s)}function YS(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new KS(i,t,a);if(JE(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=fS(t,u,!0,e.filter.filtersNodes());else{var f=KE(n);if(".priority"===f)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=fS(t,u,c.isFullyInitialized(),c.isFiltered());else{var h,d=GE(n),p=c.getNode().getImmediateChild(f);if(JE(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===QE(d)&&v.getChild(XE(d)).isEmpty()?v:v.updateChild(d,r):LT.EMPTY_NODE}if(p.equals(h))s=t;else s=fS(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function XS(e,t){return e.eventCache.isCompleteForChild(t)}function $S(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function JS(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=JE(n)?r:new mS(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=$S(0,t.serverCache.getNode().getImmediateChild(n),r);c=QS(e,c,new BE(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var f=$S(0,t.serverCache.getNode().getImmediateChild(n),r);c=QS(e,c,new BE(n),f,i,a,o,s)}})),c}var ZS;function eC(e,t){var n=pS(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!JE(t)&&!n.getImmediateChild(KE(t)).isEmpty())?n.getChild(t):null}function tC(e,t,n,r){t.type===eS.MERGE&&null!==t.source.queryId&&(ge(pS(e.viewCache_),"We should always have a full cache before handling merges"),ge(dS(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=HS(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,ge(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),ge(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),ge(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,nC(e,s.changes,s.viewCache.eventCache.getNode(),null)}function nC(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),cS(e,i,"child_removed",t,r,n),cS(e,i,"child_added",t,r,n),cS(e,i,"child_moved",a,r,n),cS(e,i,"child_changed",t,r,n),cS(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var rC;function iC(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return ge(null!=a,"SyncTree gave us an op for an invalid query."),tC(a,t,n,r)}var o,s=[],u=ce(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(tC(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function aC(e,t){var n,r=null,i=ce(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||eC(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var oC=he((function e(t){le(this,e),this.listenProvider_=t,this.syncPointTree_=new mS(null),this.pendingWriteTree_={visibleWrites:yS.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function sC(e,t,n,r,i){return function(e,t,n,r,i){ge(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=gS(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?fC(e,new oS({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function uC(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=NS(e.pendingWriteTree_,t),i=AS(e.pendingWriteTree_,t);if(i){var a=new mS(null);return null!=r.snap?a=a.set(WE(),!0):lE(r.children,(function(e){a=a.set(new BE(e),!0)})),fC(e,new aS(r.path,a,n))}return[]}function cC(e,t,n){return fC(e,new oS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function lC(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=aC(n,ZE(e,t));if(r)return r}));return DS(r,t,i,n,!0)}function fC(e,t){return hC(t,e.syncPointTree_,null,CS(e.pendingWriteTree_,WE()))}function hC(e,t,n,r){if(JE(e.path))return dC(e,t,n,r);var i=t.get(WE());null==n&&null!=i&&(n=aC(i,WE()));var a=[],o=KE(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=qS(r,o);a=a.concat(hC(s,u,c,l))}return i&&(a=a.concat(iC(i,e,r,n))),a}function dC(e,t,n,r){var i=t.get(WE());null==n&&null!=i&&(n=aC(i,WE()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=qS(r,t),u=e.operationForChild(t);u&&(a=a.concat(dC(u,i,o,s)))})),i&&(a=a.concat(iC(i,e,r,n))),a}function pC(e,t){return e.tagToQueryMap.get(t)}function vC(e){var t=e.indexOf("$");return ge(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new BE(e.substr(0,t))}}function mC(e,t,n){var r=e.syncPointTree_.get(t);return ge(r,"Missing sync point for query tag that we're tracking"),iC(r,n,CS(e.pendingWriteTree_,t),null)}var yC=function(){function e(t){le(this,e),this.node_=t}return he(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),gC=function(){function e(t,n){le(this,e),this.syncTree_=t,this.path_=n}return he(e,[{key:"getImmediateChild",value:function(t){var n=$E(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return lC(this.syncTree_,this.path_)}}]),e}(),kC=function(e,t,n){return e&&"object"===typeof e?(ge(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?bC(e[".sv"],t,n):"object"===typeof e[".sv"]?wC(e[".sv"],t):void ge(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},bC=function(e,t,n){if("timestamp"===e)return n.timestamp;ge(!1,"Unexpected server value: "+e)},wC=function(e,t,n){e.hasOwnProperty("increment")||ge(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&ge(!1,"Unexpected increment value: "+r);var i=t.node();if(ge(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},_C=function(e,t,n,r){return IC(t,new gC(n,e),r)},xC=function(e,t,n){return IC(e,new yC(t),n)};function IC(e,t,n){var r,i=e.getPriority().val(),a=kC(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=kC(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new ET(s,FT(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new ET(a))),u.forEachChild(NT,(function(e,i){var a=IC(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var EC=he((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};le(this,e),this.name=t,this.parent=n,this.node=r}));function TC(e,t){for(var n=t instanceof BE?t:new BE(t),r=e,i=KE(n);null!==i;){var a=We(r.node.children,i)||{children:{},childCount:0};r=new EC(i,r,a),i=KE(n=GE(n))}return r}function SC(e){return e.node.value}function CC(e,t){e.node.value=t,OC(e)}function NC(e){return e.node.childCount>0}function AC(e,t){lE(e.node.children,(function(n,r){t(new EC(n,e,r))}))}function RC(e,t,n,r){n&&!r&&t(e),AC(e,(function(e){RC(e,t,!0,r)})),n&&r&&t(e)}function PC(e){return new BE(null===e.parent?e.name:PC(e.parent)+"/"+e.name)}function OC(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===SC(e)&&!NC(e)}(n),i=Be(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,OC(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,OC(e))}(e.parent,e.name,e)}var DC=/[\[\].#$\/\u0000-\u001F\u007F]/,LC=/[\[\].#$\u0000-\u001F\u007F]/,MC=10485760,FC=function(e){return"string"===typeof e&&0!==e.length&&!DC.test(e)},UC=function(e){return"string"===typeof e&&0!==e.length&&!LC.test(e)},jC=function e(t,n,r){var i=r instanceof BE?new nT(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+iT(i));if("function"===typeof n)throw new Error(t+"contains a function "+iT(i)+" with contents = "+n.toString());if(nE(n))throw new Error(t+"contains "+n.toString()+" "+iT(i));if("string"===typeof n&&n.length>MC/3&&rt(n)>MC)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+iT(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(lE(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!FC(n)))throw new Error(t+" contains an invalid key ("+n+") "+iT(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=rt(t),rT(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=rt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+iT(i)+" in addition to actual children.")}},VC=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!FC(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),UC(e)}(n))throw new Error(nt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},qC=he((function e(){le(this,e),this.eventLists_=[],this.recursionDepth_=0}));function zC(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||eT(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function BC(e,t,n){zC(e,n),WC(e,(function(e){return tT(e,t)||tT(t,e)}))}function WC(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(KC(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function KC(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();QI&&$I("event: "+n.toString()),mE(r)}}}var HC="repo_interrupt",GC=function(){function e(t,n,r,i){le(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$T(),this.transactionQueueTree_=new EC,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return he(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function QC(e,t,n){if(e.stats_=AE(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new YT(e.repoInfo_,(function(t,n,r,i){$C(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return JC(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{qe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new sT(e.repoInfo_,t,(function(t,n,r,i){$C(e,t,n,r,i)}),(function(t){JC(e,t)}),(function(t){!function(e,t){lE(t,(function(t,n){ZC(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return NE[n]||(NE[n]=t()),NE[n]}(e.repoInfo_,(function(){return new nS(e.stats_,e.server_)})),e.infoData_=new XT,e.infoSyncTree_=new oC({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=cC(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),ZC(e,"connected",!1),e.serverSyncTree_=new oC({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);BC(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function YC(e){var t=e.infoData_.getNode(new BE(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function XC(e){return(t=(t={timestamp:YC(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function $C(e,t,n,r,i){e.dataUpdateCount++;var a=new BE(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=He(n,(function(e){return FT(e)}));o=function(e,t,n,r){var i=pC(e,r);if(i){var a=vC(i),o=a.path,s=a.queryId,u=ZE(o,t),c=mS.fromObject(n);return mC(e,o,new sS(rS(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=FT(n);o=function(e,t,n,r){var i=pC(e,r);if(null!=i){var a=vC(i),o=a.path,s=a.queryId,u=ZE(o,t);return mC(e,o,new oS(rS(s),u,n))}return[]}(e.serverSyncTree_,a,u,i)}else if(r){var c=He(n,(function(e){return FT(e)}));o=function(e,t,n){var r=mS.fromObject(n);return fC(e,new sS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=FT(n);o=cC(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=oN(e,a)),BC(e.eventQueue_,f,o)}function JC(e,t){ZC(e,"connected",t),!1===t&&function(e){nN(e,"onDisconnectEvents");var t=XC(e),n=$T();ZT(e.onDisconnect_,WE(),(function(r,i){var a=_C(r,i,e.serverSyncTree_,t);JT(n,r,a)}));var r=[];ZT(n,WE(),(function(t,n){r=r.concat(cC(e.serverSyncTree_,t,n));var i=fN(e,t);oN(e,i)})),e.onDisconnect_=$T(),BC(e.eventQueue_,WE(),r)}(e)}function ZC(e,t,n){var r=new BE("/.info/"+t),i=FT(n);e.infoData_.updateSnapshot(r,i);var a=cC(e.infoSyncTree_,r,i);BC(e.eventQueue_,r,a)}function eN(e){return e.nextWriteId_++}function tN(e){e.persistentConnection_&&e.persistentConnection_.interrupt(HC)}function nN(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];$I.apply(void 0,[t].concat(r))}function rN(e,t,n){return lC(e.serverSyncTree_,t,n)||LT.EMPTY_NODE}function iN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||lN(e,t),SC(t)){var n=uN(e,t);ge(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&aN(e,PC(t),n)}else NC(t)&&AC(t,(function(t){iN(e,t)}))}function aN(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=rN(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];ge(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=ZE(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){nN(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(uC(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);lN(e,TC(e.transactionQueueTree_,t)),iN(e,e.transactionQueueTree_),BC(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)mE(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{tE("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}oN(e,t)}}),o)}function oN(e,t){var n=sN(e,t),r=PC(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=ZE(n,u.path),l=!1,f=void 0;if(ge(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,f=u.abortReason,i=i.concat(uC(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,f="maxretry",i=i.concat(uC(e.serverSyncTree_,u.currentWriteId,!0));else{var h=rN(e,u.path,o);u.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){jC("transaction failed: Data returned ",d,u.path);var p=FT(d);"object"===typeof d&&null!=d&&Be(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=u.currentWriteId,m=XC(e),y=xC(p,h,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=y,u.currentWriteId=eN(e),o.splice(o.indexOf(v),1),i=(i=i.concat(sC(e.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(uC(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(uC(e.serverSyncTree_,u.currentWriteId,!0))}BC(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},u=0;u<t.length;u++)s(u);lN(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)mE(r[c]);iN(e,e.transactionQueueTree_)}(e,uN(e,n),r),r}function sN(e,t){var n,r=e.transactionQueueTree_;for(n=KE(t);null!==n&&void 0===SC(r);)r=TC(r,n),n=KE(t=GE(t));return r}function uN(e,t){var n=[];return cN(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function cN(e,t,n){var r=SC(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);AC(t,(function(t){cN(e,t,n)}))}function lN(e,t){var n=SC(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,CC(t,n.length>0?n:void 0)}AC(t,(function(t){lN(e,t)}))}function fN(e,t){var n=PC(sN(e,t)),r=TC(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){hN(e,t)})),hN(e,r),RC(r,(function(t){hN(e,t)})),n}function hN(e,t){var n=SC(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(ge(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(ge(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(uC(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?CC(t,void 0):n.length=a+1,BC(e.eventQueue_,PC(t),i);for(var s=0;s<r.length;s++)mE(r[s])}}var dN=function(e,t){var n=pN(e),r=n.namespace;"firebase.com"===n.domain&&eE(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||eE("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&tE("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new EE(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new BE(n.pathString)}},pN=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=ce(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):tE("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},vN=function(){function e(t,n,r,i){le(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return he(e,[{key:"key",get:function(){return JE(this._path)?null:QE(this._path)}},{key:"ref",get:function(){return new mN(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=QT(this._queryParams),t=uE(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return QT(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=it(t))instanceof e))return!1;var n=this._repo===t._repo,r=eT(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var mN=function(e){re(n,e);var t=ue(n);function n(e,r){return le(this,n),t.call(this,e,r,new HT,!1)}return he(n,[{key:"parent",get:function(){var e=XE(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(vN);!function(e){ge(!ZS,"__referenceConstructor has already been defined"),ZS=e}(mN),function(e){ge(!rC,"__referenceConstructor has already been defined"),rC=e}(mN);var yN={},gN=!1;function kN(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||eE("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$I("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=dN(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBwS_jf7yuRFb4wahRFCoXhhKzoJPN9R8U",REACT_APP_APP_ID:"1:560448026776:web:10a763e6a9728b7b6e78ed",REACT_APP_AUTH_DOMAIN:"nwitter-ccf4c.firebaseapp.com",REACT_APP_DATABASE_URL:"https://nwitter-ccf4c.firebaseapp.com",REACT_APP_MESSAGIN_ID:"560448026776",REACT_APP_PROJECT_ID:"nwitter-ccf4c",REACT_APP_STORAGE_BUCKET:"nwitter-ccf4c.appspot.com"}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=dN(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new bE(bE.OWNER):new kE(e.name,e.options,t);VC("Invalid Firebase Database URL",s),JE(s.path)||eE("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=yN[t.name];i||(i={},yN[t.name]=i);var a=i[e.toURLString()];a&&eE("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new GC(e,gN,n,r),i[e.toURLString()]=a,a}(u,e,l,new gE(e.name,n));return new bN(f,e)}var bN=function(){function e(t,n){le(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return he(e,[{key:"_repo",get:function(){return this._instanceStarted||(QC(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new mN(this._repo,WE())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=yN[t];n&&n[e.key]===e||eE("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),tN(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&eE("Cannot call "+e+" on a deleted database.")}}]),e}();sT.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},sT.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){UI=e}(Ut),Rt(new ot("database",(function(e,t){var n=t.instanceIdentifier;return kN(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Wt(MI,FI,e),Wt(MI,FI,"esm2017")}();var wN=LI(jt({apiKey:"AIzaSyBwS_jf7yuRFb4wahRFCoXhhKzoJPN9R8U",authDomain:"nwitter-ccf4c.firebaseapp.com",projectId:"nwitter-ccf4c",storageBucket:"nwitter-ccf4c.appspot.com",messagingSenderId:"560448026776",appId:"1:560448026776:web:10a763e6a9728b7b6e78ed"})),_N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt();return Pt(e,"firestore").getImmediate()}(),xN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt(),t=arguments.length>1?arguments[1]:void 0,n=Pt(e=it(e),pb),r=n.getImmediate({identifier:t});return r}();function IN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function EN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IN(Object(n),!0).forEach((function(t){CN(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IN(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function TN(e){return TN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TN(e)}function SN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function CN(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NN(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||RN(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function AN(e){return function(e){if(Array.isArray(e))return PN(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||RN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RN(e,t){if(e){if("string"===typeof e)return PN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PN(e,t):void 0}}function PN(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ON=function(){},DN={},LN={},MN=null,FN={mark:ON,measure:ON};try{"undefined"!==typeof window&&(DN=window),"undefined"!==typeof document&&(LN=document),"undefined"!==typeof MutationObserver&&(MN=MutationObserver),"undefined"!==typeof performance&&(FN=performance)}catch(vO){}var UN=(DN.navigator||{}).userAgent,jN=void 0===UN?"":UN,VN=DN,qN=LN,zN=MN,BN=FN,WN=(VN.document,!!qN.documentElement&&!!qN.head&&"function"===typeof qN.addEventListener&&"function"===typeof qN.createElement),KN=~jN.indexOf("MSIE")||~jN.indexOf("Trident/"),HN="svg-inline--fa",GN="data-fa-i2svg",QN="data-fa-pseudo-element",YN="data-prefix",XN="data-icon",$N="fontawesome-i2svg",JN=["HTML","HEAD","STYLE","SCRIPT"],ZN=function(){try{return!0}catch(vO){return!1}}(),eA={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},tA={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},nA={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},rA={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},iA=/fa[srltdbk\-\ ]/,aA="fa-layers-text",oA=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,sA={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},uA=[1,2,3,4,5,6,7,8,9,10],cA=uA.concat([11,12,13,14,15,16,17,18,19,20]),lA=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],fA="duotone-group",hA="swap-opacity",dA="primary",pA="secondary",vA=[].concat(AN(Object.keys(tA)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",fA,hA,dA,pA]).concat(uA.map((function(e){return"".concat(e,"x")}))).concat(cA.map((function(e){return"w-".concat(e)}))),mA=VN.FontAwesomeConfig||{};if(qN&&"function"===typeof qN.querySelector){[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=NN(e,2),n=t[0],r=t[1],i=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=qN.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==i&&null!==i&&(mA[r]=i)}))}var yA=EN(EN({},{familyPrefix:"fa",styleDefault:"solid",replacementClass:HN,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0}),mA);yA.autoReplaceSvg||(yA.observeMutations=!1);var gA={};Object.keys(yA).forEach((function(e){Object.defineProperty(gA,e,{enumerable:!0,set:function(t){yA[e]=t,kA.forEach((function(e){return e(gA)}))},get:function(){return yA[e]}})})),VN.FontAwesomeConfig=gA;var kA=[];var bA=16,wA={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function _A(){for(var e=12,t="";e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function xA(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function IA(e){return e.classList?xA(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function EA(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function TA(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function SA(e){return e.size!==wA.size||e.x!==wA.x||e.y!==wA.y||e.rotate!==wA.rotate||e.flipX||e.flipY}function CA(){var e="fa",t=HN,n=gA.familyPrefix,r=gA.replacementClass,i=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0);\n          animation-delay: var(--fa-animation-delay, 0);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';if(n!==e||r!==t){var a=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),s=new RegExp("\\.".concat(t),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(s,".".concat(r))}return i}var NA=!1;function AA(){gA.autoAddCss&&!NA&&(!function(e){if(e&&WN){var t=qN.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=qN.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}qN.head.insertBefore(t,r)}}(CA()),NA=!0)}var RA={mixout:function(){return{dom:{css:CA,insertCss:AA}}},hooks:function(){return{beforeDOMElementCreation:function(){AA()},beforeI2svg:function(){AA()}}}},PA=VN||{};PA.___FONT_AWESOME___||(PA.___FONT_AWESOME___={}),PA.___FONT_AWESOME___.styles||(PA.___FONT_AWESOME___.styles={}),PA.___FONT_AWESOME___.hooks||(PA.___FONT_AWESOME___.hooks={}),PA.___FONT_AWESOME___.shims||(PA.___FONT_AWESOME___.shims=[]);var OA=PA.___FONT_AWESOME___,DA=[],LA=!1;function MA(e){WN&&(LA?setTimeout(e,0):DA.push(e))}function FA(e){var t=e.tag,n=e.attributes,r=void 0===n?{}:n,i=e.children,a=void 0===i?[]:i;return"string"===typeof e?EA(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(EA(e[n]),'" ')}),"").trim()}(r),">").concat(a.map(FA).join(""),"</").concat(t,">")}function UA(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}WN&&((LA=(qN.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(qN.readyState))||qN.addEventListener("DOMContentLoaded",(function e(){qN.removeEventListener("DOMContentLoaded",e),LA=1,DA.map((function(e){return e()}))})));var jA=function(e,t,n,r){var i,a,o,s=Object.keys(e),u=s.length,c=void 0!==r?function(e,t){return function(n,r,i,a){return e.call(t,n,r,i,a)}}(t,r):t;for(void 0===n?(i=1,o=e[s[0]]):(i=0,o=n);i<u;i++)o=c(o,e[a=s[i]],a,e);return o};function VA(e){var t=function(e){for(var t=[],n=0,r=e.length;n<r;){var i=e.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&i)<<10)+(1023&a)+65536):(t.push(i),n--)}else t.push(i)}return t}(e);return 1===t.length?t[0].toString(16):null}function qA(e){return Object.keys(e).reduce((function(t,n){var r=e[n];return!!r.icon?t[r.iconName]=r.icon:t[n]=r,t}),{})}function zA(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.skipHooks,i=void 0!==r&&r,a=qA(t);"function"!==typeof OA.hooks.addPack||i?OA.styles[e]=EN(EN({},OA.styles[e]||{}),a):OA.hooks.addPack(e,qA(t)),"fas"===e&&zA("fa",t)}var BA=OA.styles,WA=OA.shims,KA=Object.values(nA),HA=null,GA={},QA={},YA={},XA={},$A={},JA=Object.keys(eA);function ZA(e,t){var n,r=t.split("-"),i=r[0],a=r.slice(1).join("-");return i!==e||""===a||(n=a,~vA.indexOf(n))?null:a}var eR=function(){var e=function(e){return jA(BA,(function(t,n,r){return t[r]=jA(n,e,{}),t}),{})};GA=e((function(e,t,n){if(t[3]&&(e[t[3]]=n),t[2]){var r=t[2].filter((function(e){return"number"===typeof e}));r.forEach((function(t){e[t.toString(16)]=n}))}return e})),QA=e((function(e,t,n){if(e[n]=n,t[2]){var r=t[2].filter((function(e){return"string"===typeof e}));r.forEach((function(t){e[t]=n}))}return e})),$A=e((function(e,t,n){var r=t[2];return e[n]=n,r.forEach((function(t){e[t]=n})),e}));var t="far"in BA||gA.autoFetchSvg,n=jA(WA,(function(e,n){var r=n[0],i=n[1],a=n[2];return"far"!==i||t||(i="fas"),"string"===typeof r&&(e.names[r]={prefix:i,iconName:a}),"number"===typeof r&&(e.unicodes[r.toString(16)]={prefix:i,iconName:a}),e}),{names:{},unicodes:{}});YA=n.names,XA=n.unicodes,HA=aR(gA.styleDefault)};function tR(e,t){return(GA[e]||{})[t]}function nR(e,t){return($A[e]||{})[t]}function rR(e){return YA[e]||{prefix:null,iconName:null}}function iR(){return HA}!function(e){kA.push(e)}((function(e){HA=aR(e.styleDefault)})),eR();function aR(e){var t=tA[e]||tA[eA[e]],n=e in OA.styles?e:null;return t||n||null}function oR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.skipLookups,r=void 0!==n&&n,i=null,a=e.reduce((function(e,t){var n=ZA(gA.familyPrefix,t);if(BA[t]?(t=KA.includes(t)?rA[t]:t,i=t,e.prefix=t):JA.indexOf(t)>-1?(i=t,e.prefix=aR(t)):n?e.iconName=n:t!==gA.replacementClass&&e.rest.push(t),!r&&e.prefix&&e.iconName){var a="fa"===i?rR(e.iconName):{},o=nR(e.prefix,e.iconName);a.prefix&&(i=null),e.iconName=a.iconName||o||e.iconName,e.prefix=a.prefix||e.prefix,"far"!==e.prefix||BA.far||!BA.fas||gA.autoFetchSvg||(e.prefix="fas")}return e}),{prefix:null,iconName:null,rest:[]});return"fa"!==a.prefix&&"fa"!==i||(a.prefix=iR()||"fas"),a}var sR=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,r;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.reduce(this._pullDefinitions,{});Object.keys(i).forEach((function(t){e.definitions[t]=EN(EN({},e.definitions[t]||{}),i[t]),zA(t,i[t]);var n=nA[t];n&&zA(n,i[t]),eR()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var r=n[t],i=r.prefix,a=r.iconName,o=r.icon,s=o[2];e[i]||(e[i]={}),s.length>0&&s.forEach((function(t){"string"===typeof t&&(e[i][t]=o)})),e[i][a]=o})),e}}],n&&SN(t.prototype,n),r&&SN(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),uR=[],cR={},lR={},fR=Object.keys(lR);function hR(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=cR[e]||[];return a.forEach((function(e){t=e.apply(null,[t].concat(r))})),t}function dR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=cR[e]||[];i.forEach((function(e){e.apply(null,n)}))}function pR(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return lR[e]?lR[e].apply(null,t):void 0}function vR(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||iR();if(t)return t=nR(n,t)||t,UA(mR.definitions,n,t)||UA(OA.styles,n,t)}var mR=new sR,yR={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return WN?(dR("beforeI2svg",e),pR("pseudoElements2svg",e),pR("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===gA.autoReplaceSvg&&(gA.autoReplaceSvg=!0),gA.observeMutations=!0,MA((function(){bR({autoReplaceSvgRoot:t}),dR("watch",e)}))}},gR={icon:function(e){if(null===e)return null;if("object"===TN(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:nR(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=aR(e[0]);return{prefix:n,iconName:nR(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(gA.familyPrefix,"-"))>-1||e.match(iA))){var r=oR(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||iR(),iconName:nR(r.prefix,r.iconName)||r.iconName}}if("string"===typeof e){var i=iR();return{prefix:i,iconName:nR(i,e)||e}}}},kR={noAuto:function(){gA.autoReplaceSvg=!1,gA.observeMutations=!1,dR("noAuto")},config:gA,dom:yR,parse:gR,library:mR,findIconDefinition:vR,toHtml:FA},bR=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot,n=void 0===t?qN:t;(Object.keys(OA.styles).length>0||gA.autoFetchSvg)&&WN&&gA.autoReplaceSvg&&kR.dom.i2svg({node:n})};function wR(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return FA(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(WN){var t=qN.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function _R(e){var t=e.icons,n=t.main,r=t.mask,i=e.prefix,a=e.iconName,o=e.transform,s=e.symbol,u=e.title,c=e.maskId,l=e.titleId,f=e.extra,h=e.watchable,d=void 0!==h&&h,p=r.found?r:n,v=p.width,m=p.height,y="fak"===i,g=[gA.replacementClass,a?"".concat(gA.familyPrefix,"-").concat(a):""].filter((function(e){return-1===f.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(f.classes).join(" "),k={children:[],attributes:EN(EN({},f.attributes),{},{"data-prefix":i,"data-icon":a,class:g,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(v," ").concat(m)})},b=y&&!~f.classes.indexOf("fa-fw")?{width:"".concat(v/m*16*.0625,"em")}:{};d&&(k.attributes[GN]=""),u&&(k.children.push({tag:"title",attributes:{id:k.attributes["aria-labelledby"]||"title-".concat(l||_A())},children:[u]}),delete k.attributes.title);var w=EN(EN({},k),{},{prefix:i,iconName:a,main:n,mask:r,maskId:c,transform:o,symbol:s,styles:EN(EN({},b),f.styles)}),_=r.found&&n.found?pR("generateAbstractMask",w)||{children:[],attributes:{}}:pR("generateAbstractIcon",w)||{children:[],attributes:{}},x=_.children,I=_.attributes;return w.children=x,w.attributes=I,s?function(e){var t=e.prefix,n=e.iconName,r=e.children,i=e.attributes,a=e.symbol,o=!0===a?"".concat(t,"-").concat(gA.familyPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:EN(EN({},i),{},{id:o}),children:r}]}]}(w):function(e){var t=e.children,n=e.main,r=e.mask,i=e.attributes,a=e.styles,o=e.transform;if(SA(o)&&n.found&&!r.found){var s={x:n.width/n.height/2,y:.5};i.style=TA(EN(EN({},a),{},{"transform-origin":"".concat(s.x+o.x/16,"em ").concat(s.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:t}]}(w)}function xR(e){var t=e.content,n=e.width,r=e.height,i=e.transform,a=e.title,o=e.extra,s=e.watchable,u=void 0!==s&&s,c=EN(EN(EN({},o.attributes),a?{title:a}:{}),{},{class:o.classes.join(" ")});u&&(c[GN]="");var l=EN({},o.styles);SA(i)&&(l.transform=function(e){var t=e.transform,n=e.width,r=void 0===n?16:n,i=e.height,a=void 0===i?16:i,o=e.startCentered,s=void 0!==o&&o,u="";return u+=s&&KN?"translate(".concat(t.x/bA-r/2,"em, ").concat(t.y/bA-a/2,"em) "):s?"translate(calc(-50% + ".concat(t.x/bA,"em), calc(-50% + ").concat(t.y/bA,"em)) "):"translate(".concat(t.x/bA,"em, ").concat(t.y/bA,"em) "),u+="scale(".concat(t.size/bA*(t.flipX?-1:1),", ").concat(t.size/bA*(t.flipY?-1:1),") "),u+"rotate(".concat(t.rotate,"deg) ")}({transform:i,startCentered:!0,width:n,height:r}),l["-webkit-transform"]=l.transform);var f=TA(l);f.length>0&&(c.style=f);var h=[];return h.push({tag:"span",attributes:c,children:[t]}),a&&h.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),h}function IR(e){var t=e.content,n=e.title,r=e.extra,i=EN(EN(EN({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),a=TA(r.styles);a.length>0&&(i.style=a);var o=[];return o.push({tag:"span",attributes:i,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var ER=OA.styles;function TR(e){var t=e[0],n=e[1],r=NN(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(r)?{tag:"g",attributes:{class:"".concat(gA.familyPrefix,"-").concat(fA)},children:[{tag:"path",attributes:{class:"".concat(gA.familyPrefix,"-").concat(pA),fill:"currentColor",d:r[0]}},{tag:"path",attributes:{class:"".concat(gA.familyPrefix,"-").concat(dA),fill:"currentColor",d:r[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:r}}}}var SR={found:!1,width:512,height:512};function CR(e,t){var n=t;return"fa"===t&&null!==gA.styleDefault&&(t=iR()),new Promise((function(r,i){pR("missingIconAbstract");if("fa"===n){var a=rR(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&ER[t]&&ER[t][e])return r(TR(ER[t][e]));!function(e,t){ZN||gA.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),r(EN(EN({},SR),{},{icon:gA.showMissingIcons&&e&&pR("missingIconAbstract")||{}}))}))}var NR=function(){},AR=gA.measurePerformance&&BN&&BN.mark&&BN.measure?BN:{mark:NR,measure:NR},RR='FA "6.1.0"',PR=function(e){AR.mark("".concat(RR," ").concat(e," ends")),AR.measure("".concat(RR," ").concat(e),"".concat(RR," ").concat(e," begins"),"".concat(RR," ").concat(e," ends"))},OR=function(e){return AR.mark("".concat(RR," ").concat(e," begins")),function(){return PR(e)}},DR=function(){};function LR(e){return"string"===typeof(e.getAttribute?e.getAttribute(GN):null)}function MR(e){return qN.createElementNS("http://www.w3.org/2000/svg",e)}function FR(e){return qN.createElement(e)}function UR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ceFn,r=void 0===n?"svg"===e.tag?MR:FR:n;if("string"===typeof e)return qN.createTextNode(e);var i=r(e.tag);Object.keys(e.attributes||[]).forEach((function(t){i.setAttribute(t,e.attributes[t])}));var a=e.children||[];return a.forEach((function(e){i.appendChild(UR(e,{ceFn:r}))})),i}var jR={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(UR(e),t)})),null===t.getAttribute(GN)&&gA.keepOriginalSource){var n=qN.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~IA(t).indexOf(gA.replacementClass))return jR.replace(e);var r=new RegExp("".concat(gA.familyPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var i=n[0].attributes.class.split(" ").reduce((function(e,t){return t===gA.replacementClass||t.match(r)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=i.toSvg.join(" "),0===i.toNode.length?t.removeAttribute("class"):t.setAttribute("class",i.toNode.join(" "))}var a=n.map((function(e){return FA(e)})).join("\n");t.setAttribute(GN,""),t.innerHTML=a}};function VR(e){e()}function qR(e,t){var n="function"===typeof t?t:DR;if(0===e.length)n();else{var r=VR;"async"===gA.mutateApproach&&(r=VN.requestAnimationFrame||VR),r((function(){var t=!0===gA.autoReplaceSvg?jR.replace:jR[gA.autoReplaceSvg]||jR.replace,r=OR("mutate");e.map(t),r(),n()}))}}var zR=!1;function BR(){zR=!0}function WR(){zR=!1}var KR=null;function HR(e){if(zN&&gA.observeMutations){var t=e.treeCallback,n=void 0===t?DR:t,r=e.nodeCallback,i=void 0===r?DR:r,a=e.pseudoElementsCallback,o=void 0===a?DR:a,s=e.observeMutationsRoot,u=void 0===s?qN:s;KR=new zN((function(e){if(!zR){var t=iR();xA(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!LR(e.addedNodes[0])&&(gA.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&gA.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&LR(e.target)&&~lA.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(YN):null,n=e.getAttribute?e.getAttribute(XN):null;return t&&n}(e.target)){var r=oR(IA(e.target)),a=r.prefix,s=r.iconName;e.target.setAttribute(YN,a||t),s&&e.target.setAttribute(XN,s)}else(u=e.target)&&u.classList&&u.classList.contains&&u.classList.contains(gA.replacementClass)&&i(e.target);var u}))}})),WN&&KR.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function GR(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),r=n[0],i=n.slice(1);return r&&i.length>0&&(e[r]=i.join(":").trim()),e}),{})),n}function QR(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),r=void 0!==e.innerText?e.innerText.trim():"",i=oR(IA(e));return i.prefix||(i.prefix=iR()),t&&n&&(i.prefix=t,i.iconName=n),i.iconName&&i.prefix||i.prefix&&r.length>0&&(i.iconName=function(e,t){return(QA[e]||{})[t]}(i.prefix,e.innerText)||tR(i.prefix,VA(e.innerText))),i}function YR(e){var t=xA(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),r=e.getAttribute("data-fa-title-id");return gA.autoA11y&&(n?t["aria-labelledby"]="".concat(gA.replacementClass,"-title-").concat(r||_A()):(t["aria-hidden"]="true",t.focusable="false")),t}function XR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=QR(e),r=n.iconName,i=n.prefix,a=n.rest,o=YR(e),s=hR("parseNodeAttributes",{},e),u=t.styleParser?GR(e):[];return EN({iconName:r,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:i,transform:wA,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:u,attributes:o}},s)}var $R=OA.styles;function JR(e){var t="nest"===gA.autoReplaceSvg?XR(e,{styleParser:!1}):XR(e);return~t.extra.classes.indexOf(aA)?pR("generateLayersText",e,t):pR("generateSvgReplacementMutation",e,t)}function ZR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!WN)return Promise.resolve();var n=qN.documentElement.classList,r=function(e){return n.add("".concat($N,"-").concat(e))},i=function(e){return n.remove("".concat($N,"-").concat(e))},a=gA.autoFetchSvg?Object.keys(eA):Object.keys($R),o=[".".concat(aA,":not([").concat(GN,"])")].concat(a.map((function(e){return".".concat(e,":not([").concat(GN,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var s=[];try{s=xA(e.querySelectorAll(o))}catch(vO){}if(!(s.length>0))return Promise.resolve();r("pending"),i("complete");var u=OR("onTree"),c=s.reduce((function(e,t){try{var n=JR(t);n&&e.push(n)}catch(vO){ZN||"MissingIcon"===vO.name&&console.error(vO)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){qR(n,(function(){r("active"),r("complete"),i("pending"),"function"===typeof t&&t(),u(),e()}))})).catch((function(e){u(),n(e)}))}))}function eP(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;JR(e).then((function(e){e&&qR([e],t)}))}var tP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?wA:n,i=t.symbol,a=void 0!==i&&i,o=t.mask,s=void 0===o?null:o,u=t.maskId,c=void 0===u?null:u,l=t.title,f=void 0===l?null:l,h=t.titleId,d=void 0===h?null:h,p=t.classes,v=void 0===p?[]:p,m=t.attributes,y=void 0===m?{}:m,g=t.styles,k=void 0===g?{}:g;if(e){var b=e.prefix,w=e.iconName,_=e.icon;return wR(EN({type:"icon"},e),(function(){return dR("beforeDOMElementCreation",{iconDefinition:e,params:t}),gA.autoA11y&&(f?y["aria-labelledby"]="".concat(gA.replacementClass,"-title-").concat(d||_A()):(y["aria-hidden"]="true",y.focusable="false")),_R({icons:{main:TR(_),mask:s?TR(s.icon):{found:!1,width:null,height:null,icon:{}}},prefix:b,iconName:w,transform:EN(EN({},wA),r),symbol:a,title:f,maskId:c,titleId:d,extra:{attributes:y,styles:k,classes:v}})}))}},nP={mixout:function(){return{icon:(e=tP,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t||{}).icon?t:vR(t||{}),i=n.mask;return i&&(i=(i||{}).icon?i:vR(i||{})),e(r,EN(EN({},n),{},{mask:i}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=ZR,e.nodeCallback=eP,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?qN:t,r=e.callback;return ZR(n,void 0===r?function(){}:r)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,r=t.title,i=t.titleId,a=t.prefix,o=t.transform,s=t.symbol,u=t.mask,c=t.maskId,l=t.extra;return new Promise((function(t,f){Promise.all([CR(n,a),u.iconName?CR(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(u){var f=NN(u,2),h=f[0],d=f[1];t([e,_R({icons:{main:h,mask:d},prefix:a,iconName:n,transform:o,symbol:s,maskId:c,title:r,titleId:i,extra:l,watchable:!0})])})).catch(f)}))},e.generateAbstractIcon=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.transform,o=TA(e.styles);return o.length>0&&(r.style=o),SA(a)&&(t=pR("generateAbstractTransformGrouping",{main:i,transform:a,containerWidth:i.width,iconWidth:i.width})),n.push(t||i.icon),{children:n,attributes:r}}}},rP={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,r=void 0===n?[]:n;return wR({type:"layer"},(function(){dR("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(gA.familyPrefix,"-layers")].concat(AN(r)).join(" ")},children:n}]}))}}}},iP={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,r=void 0===n?null:n,i=t.classes,a=void 0===i?[]:i,o=t.attributes,s=void 0===o?{}:o,u=t.styles,c=void 0===u?{}:u;return wR({type:"counter",content:e},(function(){return dR("beforeDOMElementCreation",{content:e,params:t}),IR({content:e.toString(),title:r,extra:{attributes:s,styles:c,classes:["".concat(gA.familyPrefix,"-layers-counter")].concat(AN(a))}})}))}}}},aP={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,r=void 0===n?wA:n,i=t.title,a=void 0===i?null:i,o=t.classes,s=void 0===o?[]:o,u=t.attributes,c=void 0===u?{}:u,l=t.styles,f=void 0===l?{}:l;return wR({type:"text",content:e},(function(){return dR("beforeDOMElementCreation",{content:e,params:t}),xR({content:e,transform:EN(EN({},wA),r),title:a,extra:{attributes:c,styles:f,classes:["".concat(gA.familyPrefix,"-layers-text")].concat(AN(s))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,r=t.transform,i=t.extra,a=null,o=null;if(KN){var s=parseInt(getComputedStyle(e).fontSize,10),u=e.getBoundingClientRect();a=u.width/s,o=u.height/s}return gA.autoA11y&&!n&&(i.attributes["aria-hidden"]="true"),Promise.resolve([e,xR({content:e.innerHTML,width:a,height:o,transform:r,title:n,extra:i,watchable:!0})])}}},oP=new RegExp('"',"ug"),sP=[1105920,1112319];function uP(e,t){var n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise((function(r,i){if(null!==e.getAttribute(n))return r();var a=xA(e.children).filter((function(e){return e.getAttribute(QN)===t}))[0],o=VN.getComputedStyle(e,t),s=o.getPropertyValue("font-family").match(oA),u=o.getPropertyValue("font-weight"),c=o.getPropertyValue("content");if(a&&!s)return e.removeChild(a),r();if(s&&"none"!==c&&""!==c){var l=o.getPropertyValue("content"),f=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(s[2])?tA[s[2].toLowerCase()]:sA[u],h=function(e){var t=e.replace(oP,""),n=function(e,t){var n,r=e.length,i=e.charCodeAt(t);return i>=55296&&i<=56319&&r>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(i-55296)+n-56320+65536:i}(t,0),r=n>=sP[0]&&n<=sP[1],i=2===t.length&&t[0]===t[1];return{value:VA(i?t[0]:t),isSecondary:r||i}}(l),d=h.value,p=h.isSecondary,v=s[0].startsWith("FontAwesome"),m=tR(f,d),y=m;if(v){var g=function(e){var t=XA[e],n=tR("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(d);g.iconName&&g.prefix&&(m=g.iconName,f=g.prefix)}if(!m||p||a&&a.getAttribute(YN)===f&&a.getAttribute(XN)===y)r();else{e.setAttribute(n,y),a&&e.removeChild(a);var k={iconName:null,title:null,titleId:null,prefix:null,transform:wA,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},b=k.extra;b.attributes[QN]=t,CR(m,f).then((function(i){var a=_R(EN(EN({},k),{},{icons:{main:i,mask:{prefix:null,iconName:null,rest:[]}},prefix:f,iconName:y,extra:b,watchable:!0})),o=qN.createElement("svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=a.map((function(e){return FA(e)})).join("\n"),e.removeAttribute(n),r()})).catch(i)}}else r()}))}function cP(e){return Promise.all([uP(e,"::before"),uP(e,"::after")])}function lP(e){return e.parentNode!==document.head&&!~JN.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(QN)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function fP(e){if(WN)return new Promise((function(t,n){var r=xA(e.querySelectorAll("*")).filter(lP).map(cP),i=OR("searchPseudoElements");BR(),Promise.all(r).then((function(){i(),WR(),t()})).catch((function(){i(),WR(),n()}))}))}var hP=!1,dP=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),r=n[0],i=n.slice(1).join("-");if(r&&"h"===i)return e.flipX=!0,e;if(r&&"v"===i)return e.flipY=!0,e;if(i=parseFloat(i),isNaN(i))return e;switch(r){case"grow":e.size=e.size+i;break;case"shrink":e.size=e.size-i;break;case"left":e.x=e.x-i;break;case"right":e.x=e.x+i;break;case"up":e.y=e.y-i;break;case"down":e.y=e.y+i;break;case"rotate":e.rotate=e.rotate+i}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},pP={mixout:function(){return{parse:{transform:function(e){return dP(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=dP(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,r=e.containerWidth,i=e.iconWidth,a={transform:"translate(".concat(r/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),s="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),u="rotate(".concat(n.rotate," 0 0)"),c={outer:a,inner:{transform:"".concat(o," ").concat(s," ").concat(u)},path:{transform:"translate(".concat(i/2*-1," -256)")}};return{tag:"g",attributes:EN({},c.outer),children:[{tag:"g",attributes:EN({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:EN(EN({},t.icon.attributes),c.path)}]}]}}}},vP={x:0,y:0,width:"100%",height:"100%"};function mP(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var yP={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),r=n?oR(n.split(" ").map((function(e){return e.trim()}))):{prefix:null,iconName:null,rest:[]};return r.prefix||(r.prefix=iR()),e.mask=r,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,r=e.attributes,i=e.main,a=e.mask,o=e.maskId,s=e.transform,u=i.width,c=i.icon,l=a.width,f=a.icon,h=function(e){var t=e.transform,n=e.containerWidth,r=e.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),s="rotate(".concat(t.rotate," 0 0)");return{outer:i,inner:{transform:"".concat(a," ").concat(o," ").concat(s)},path:{transform:"translate(".concat(r/2*-1," -256)")}}}({transform:s,containerWidth:l,iconWidth:u}),d={tag:"rect",attributes:EN(EN({},vP),{},{fill:"white"})},p=c.children?{children:c.children.map(mP)}:{},v={tag:"g",attributes:EN({},h.inner),children:[mP(EN({tag:c.tag,attributes:EN(EN({},c.attributes),h.path)},p))]},m={tag:"g",attributes:EN({},h.outer),children:[v]},y="mask-".concat(o||_A()),g="clip-".concat(o||_A()),k={tag:"mask",attributes:EN(EN({},vP),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[d,m]},b={tag:"defs",children:[{tag:"clipPath",attributes:{id:g},children:(t=f,"g"===t.tag?t.children:[t])},k]};return n.push(b,{tag:"rect",attributes:EN({fill:"currentColor","clip-path":"url(#".concat(g,")"),mask:"url(#".concat(y,")")},vP)}),{children:n,attributes:r}}}},gP={provides:function(e){var t=!1;VN.matchMedia&&(t=VN.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},r={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:EN(EN({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var i=EN(EN({},r),{},{attributeName:"opacity"}),a={tag:"circle",attributes:EN(EN({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:EN(EN({},r),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:EN(EN({},i),{},{values:"1;0;1;1;0;1;"})}),e.push(a),e.push({tag:"path",attributes:EN(EN({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:EN(EN({},i),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:EN(EN({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:EN(EN({},i),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;uR=e,cR={},Object.keys(lR).forEach((function(e){-1===fR.indexOf(e)&&delete lR[e]})),uR.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===TN(t[e])&&Object.keys(t[e]).forEach((function(r){n[e]||(n[e]={}),n[e][r]=t[e][r]}))})),e.hooks){var r=e.hooks();Object.keys(r).forEach((function(e){cR[e]||(cR[e]=[]),cR[e].push(r[e])}))}e.provides&&e.provides(lR)}))}([RA,nP,rP,iP,aP,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=fP,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?qN:t;gA.searchPseudoElements&&fP(n)}}},{mixout:function(){return{dom:{unwatch:function(){BR(),hP=!0}}}},hooks:function(){return{bootstrap:function(){HR(hR("mutationObserverCallbacks",{}))},noAuto:function(){KR&&KR.disconnect()},watch:function(e){var t=e.observeMutationsRoot;hP?WR():HR(hR("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},pP,yP,gP,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),r=null!==n&&(""===n||n);return e.symbol=r,e}}}}],{mixoutsTo:kR});var kP=kR.parse,bP=kR.icon,wP=n(7),_P=n.n(wP);function xP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function IP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xP(Object(n),!0).forEach((function(t){TP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function EP(e){return EP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EP(e)}function TP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function SP(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function CP(e){return function(e){if(Array.isArray(e))return NP(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return NP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NP(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function AP(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var RP=["style"];function PP(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n=t.indexOf(":"),r=AP(t.slice(0,n)),i=t.slice(n+1).trim();return r.startsWith("webkit")?e[function(e){return e.charAt(0).toUpperCase()+e.slice(1)}(r)]=i:e[r]=i,e}),{})}var OP=!1;try{OP=!0}catch(vO){}function DP(e){return e&&"object"===EP(e)&&e.prefix&&e.iconName&&e.icon?e:kP.icon?kP.icon(e):null===e?null:e&&"object"===EP(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function LP(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?TP({},e,t):{}}var MP=["forwardedRef"];function FP(e){var t=e.forwardedRef,n=SP(e,MP),r=n.icon,i=n.mask,a=n.symbol,o=n.className,s=n.title,u=n.titleId,c=n.maskId,l=DP(r),f=LP("classes",[].concat(CP(function(e){var t,n=e.beat,r=e.fade,i=e.beatFade,a=e.bounce,o=e.shake,s=e.flash,u=e.spin,c=e.spinPulse,l=e.spinReverse,f=e.pulse,h=e.fixedWidth,d=e.inverse,p=e.border,v=e.listItem,m=e.flip,y=e.size,g=e.rotation,k=e.pull,b=(TP(t={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":a,"fa-shake":o,"fa-flash":s,"fa-spin":u,"fa-spin-reverse":l,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":h,"fa-inverse":d,"fa-border":p,"fa-li":v,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(y),"undefined"!==typeof y&&null!==y),TP(t,"fa-rotate-".concat(g),"undefined"!==typeof g&&null!==g&&0!==g),TP(t,"fa-pull-".concat(k),"undefined"!==typeof k&&null!==k),TP(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(b).map((function(e){return b[e]?e:null})).filter((function(e){return e}))}(n)),CP(o.split(" ")))),h=LP("transform","string"===typeof n.transform?kP.transform(n.transform):n.transform),d=LP("mask",DP(i)),p=bP(l,IP(IP(IP(IP({},f),h),d),{},{symbol:a,title:s,titleId:u,maskId:c}));if(!p)return function(){var e;!OP&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",l),null;var v=p.abstract,m={ref:t};return Object.keys(n).forEach((function(e){FP.defaultProps.hasOwnProperty(e)||(m[e]=n[e])})),UP(v[0],m)}FP.displayName="FontAwesomeIcon",FP.propTypes={beat:_P().bool,border:_P().bool,bounce:_P().bool,className:_P().string,fade:_P().bool,flash:_P().bool,mask:_P().oneOfType([_P().object,_P().array,_P().string]),maskId:_P().string,fixedWidth:_P().bool,inverse:_P().bool,flip:_P().oneOf(["horizontal","vertical","both"]),icon:_P().oneOfType([_P().object,_P().array,_P().string]),listItem:_P().bool,pull:_P().oneOf(["right","left"]),pulse:_P().bool,rotation:_P().oneOf([0,90,180,270]),shake:_P().bool,size:_P().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:_P().bool,spinPulse:_P().bool,spinReverse:_P().bool,symbol:_P().oneOfType([_P().bool,_P().string]),title:_P().string,titleId:_P().string,transform:_P().oneOfType([_P().string,_P().object]),swapOpacity:_P().bool},FP.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var UP=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),a=Object.keys(n.attributes||{}).reduce((function(e,t){var r=n.attributes[t];switch(t){case"class":e.attrs.className=r,delete n.attributes.class;break;case"style":e.attrs.style=PP(r);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=r:e.attrs[AP(t)]=r}return e}),{attrs:{}}),o=r.style,s=void 0===o?{}:o,u=SP(r,RP);return a.attrs.style=IP(IP({},a.attrs.style),s),t.apply(void 0,[n.tag,IP(IP({},a.attrs),u)].concat(CP(i)))}.bind(null,r.createElement),jP={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},VP={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},qP={prefix:"fab",iconName:"twitter",icon:[512,512,[],"f099","M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"]},zP=n(184),BP=function(){var e=s((0,r.useState)(""),2),t=e[0],n=e[1],i=s((0,r.useState)(""),2),a=i[0],o=i[1],u=s((0,r.useState)(!0),2),c=u[0],l=u[1],f=s((0,r.useState)(""),2),h=f[0],d=f[1],p=function(e){var t=e.target,r=t.name,i=t.value;"email"===r?n(i):"password"===r&&o(i)},v=function(){var e=$(Z().mark((function e(n){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),e.prev=1,!c){e.next=7;break}LI(),W_(wN,t,a),e.next=10;break;case 7:return e.next=9,H_(wN,t,a);case 9:e.sent;case 10:console.log(undefined),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),d(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}();return(0,zP.jsxs)(zP.Fragment,{children:[(0,zP.jsxs)("form",{onSubmit:v,className:"container",children:[(0,zP.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:t,onChange:p,className:"authInput"}),(0,zP.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:a,onChange:p,className:"authInput"}),(0,zP.jsx)("input",{type:"submit",className:"authInput authSubmit",value:c?"Create Account":"Sign In"}),h&&(0,zP.jsx)("span",{className:"authError",children:h})]}),(0,zP.jsx)("span",{onClick:function(){return l((function(e){return!e}))},className:"authSwitch",children:c?"Sign In.":"Create Account"})]})},WP=function(){var e=function(){var e=$(Z().mark((function e(t){var n,r;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?r=new S_:"github"===n&&(r=new C_),e.next=4,zx(wN,r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,zP.jsxs)("div",{className:"authContainer",children:[(0,zP.jsx)(FP,{icon:qP,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),(0,zP.jsx)(BP,{}),(0,zP.jsxs)("div",{className:"authBtns",children:[(0,zP.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue with Google ",(0,zP.jsx)(FP,{icon:VP})]}),(0,zP.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue with Github ",(0,zP.jsx)(FP,{icon:jP})]})]})]})};function KP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var HP,GP={prefix:"fas",iconName:"pencil",icon:[512,512,[61504,9999,"pencil-alt"],"f303","M421.7 220.3L188.5 453.4L154.6 419.5L158.1 416H112C103.2 416 96 408.8 96 400V353.9L92.51 357.4C87.78 362.2 84.31 368 82.42 374.4L59.44 452.6L137.6 429.6C143.1 427.7 149.8 424.2 154.6 419.5L188.5 453.4C178.1 463.8 165.2 471.5 151.1 475.6L30.77 511C22.35 513.5 13.24 511.2 7.03 504.1C.8198 498.8-1.502 489.7 .976 481.2L36.37 360.9C40.53 346.8 48.16 333.9 58.57 323.5L291.7 90.34L421.7 220.3zM492.7 58.75C517.7 83.74 517.7 124.3 492.7 149.3L444.3 197.7L314.3 67.72L362.7 19.32C387.7-5.678 428.3-5.678 453.3 19.32L492.7 58.75z"]},QP=GP,YP={prefix:"fas",iconName:"plus",icon:[448,512,[10133,"add"],"2b","M432 256c0 17.69-14.33 32.01-32 32.01H256v144c0 17.69-14.33 31.99-32 31.99s-32-14.3-32-31.99v-144H48c-17.67 0-32-14.32-32-32.01s14.33-31.99 32-31.99H192v-144c0-17.69 14.33-32.01 32-32.01s32 14.32 32 32.01v144h144C417.7 224 432 238.3 432 256z"]},XP={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM394.8 466.1C393.2 492.3 372.3 512 346.9 512H101.1C75.75 512 54.77 492.3 53.19 466.1L31.1 128H416L394.8 466.1z"]},$P={prefix:"fas",iconName:"user",icon:[448,512,[62144,128100],"f007","M224 256c70.7 0 128-57.31 128-128s-57.3-128-128-128C153.3 0 96 57.31 96 128S153.3 256 224 256zM274.7 304H173.3C77.61 304 0 381.6 0 477.3c0 19.14 15.52 34.67 34.66 34.67h378.7C432.5 512 448 496.5 448 477.3C448 381.6 370.4 304 274.7 304z"]},JP={prefix:"fas",iconName:"xmark",icon:[320,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"]},ZP=JP,eO=function(e){var t=e.postObj,n=e.isOwner,i=s((0,r.useState)(!1),2),a=i[0],o=i[1],u=s((0,r.useState)(t.text),2),c=u[0],l=u[1],f=Om(_N,"posts","".concat(t.id)),h=function(){var e=$(Z().mark((function e(){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=6;break}return e.next=4,og(f);case 4:return e.next=6,bb(wb(xN,t.attachmentUrl));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){return o((function(e){return!e}))},p=function(){var e=$(Z().mark((function e(t){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ag(f,{text:c});case 3:o(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,zP.jsx)("div",{className:"nweet",children:a?(0,zP.jsxs)(zP.Fragment,{children:[(0,zP.jsxs)("form",{onSubmit:p,className:"container nweetEdit",children:[(0,zP.jsx)("input",{type:"text",placeholder:"Edit your Post",value:c,required:!0,autoFocus:!0,onChange:function(e){var t=e.target.value;l(t)},className:"formInput"}),(0,zP.jsx)("input",{type:"submit",value:"Update Post",className:"formBtn"})]}),(0,zP.jsx)("span",{onClick:d,className:"formBtn cancelBtn",children:"Cancel"})]}):(0,zP.jsxs)(zP.Fragment,{children:[(0,zP.jsx)("h4",{children:t.text}),t.attachmentUrl&&(0,zP.jsx)("img",{src:t.attachmentUrl}),n&&(0,zP.jsxs)("div",{className:"nweet__actions",children:[(0,zP.jsx)("span",{onClick:h,children:(0,zP.jsx)(FP,{icon:XP})}),(0,zP.jsx)("span",{onClick:d,children:(0,zP.jsx)(FP,{icon:QP})})]})]})})},tO=new Uint8Array(16);function nO(){if(!HP&&!(HP="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return HP(tO)}var rO=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var iO=function(e){return"string"===typeof e&&rO.test(e)},aO=[],oO=0;oO<256;++oO)aO.push((oO+256).toString(16).substr(1));var sO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(aO[e[t+0]]+aO[e[t+1]]+aO[e[t+2]]+aO[e[t+3]]+"-"+aO[e[t+4]]+aO[e[t+5]]+"-"+aO[e[t+6]]+aO[e[t+7]]+"-"+aO[e[t+8]]+aO[e[t+9]]+"-"+aO[e[t+10]]+aO[e[t+11]]+aO[e[t+12]]+aO[e[t+13]]+aO[e[t+14]]+aO[e[t+15]]).toLowerCase();if(!iO(n))throw TypeError("Stringified UUID is invalid");return n};var uO=function(e,t,n){var r=(e=e||{}).random||(e.rng||nO)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return sO(r)},cO=function(e){var t=e.userObj,n=s((0,r.useState)(""),2),i=n[0],a=n[1],o=s((0,r.useState)(""),2),u=o[0],c=o[1],l=function(){var e=$(Z().mark((function e(n){var r,o,s,l;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==i){e.next=2;break}return e.abrupt("return");case 2:if(n.preventDefault(),r="",""===u){e.next=12;break}return o=wb(xN,"".concat(t.uid,"/").concat(uO())),e.next=8,vb(o,u,"data_url");case 8:return s=e.sent,e.next=11,kb(s.ref);case 11:r=e.sent;case 12:return l={text:i,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:r},e.next=15,sg(Pm(_N,"posts"),l);case 15:a(""),c("");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,zP.jsxs)("form",{onSubmit:l,className:"factoryForm",children:[(0,zP.jsxs)("div",{className:"factoryInput__container",children:[(0,zP.jsx)("input",{className:"factoryInput__input",value:i,onChange:function(e){var t=e.target.value;a(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),(0,zP.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]}),(0,zP.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[(0,zP.jsx)("span",{children:"Add photos"}),(0,zP.jsx)(FP,{icon:YP})]}),(0,zP.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;c(t)},n.readAsDataURL(t)},style:{opacity:0}}),u&&(0,zP.jsxs)("div",{className:"factoryForm__attachment",children:[(0,zP.jsx)("img",{src:u,style:{backgroundImage:u}}),(0,zP.jsxs)("div",{className:"factoryForm__clear",onClick:function(){return c("")},children:[(0,zP.jsx)("span",{children:"Remove"}),(0,zP.jsx)(FP,{icon:ZP})]})]})]})},lO=function(e){var t=e.userObj,n=s((0,r.useState)([]),2),i=n[0],a=n[1];return(0,r.useEffect)((function(){ug(Ly(Pm(_N,"posts"),Uy("createdAt","desc")),(function(e){var t=e.docs.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KP(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},e.data())}));a(t)}))}),[]),(0,zP.jsxs)("div",{className:"container",children:[(0,zP.jsx)(cO,{userObj:t}),(0,zP.jsx)("div",{style:{marginTop:30},children:i.map((function(e){return(0,zP.jsx)(eO,{postObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},fO=function(e){var t=e.userObj;return(0,zP.jsx)("nav",{children:(0,zP.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[(0,zP.jsx)("li",{children:(0,zP.jsx)(Y,{to:"/",style:{marginRight:10},children:(0,zP.jsx)(FP,{icon:qP,color:"#04AAFF",size:"2x"})})}),(0,zP.jsx)("li",{children:(0,zP.jsxs)(Y,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[(0,zP.jsx)(FP,{icon:$P,color:"#04AAFF",size:"2x"}),(0,zP.jsx)("span",{style:{marginTop:10},children:t.displayName?"".concat(t.displayName,"\uc758 Profile"):"Profile"})]})})]})})},hO=function(e){var t=e.userObj,n=e.refreshUser,i=N(),a=s((0,r.useState)(t.displayName),2),o=a[0],u=a[1],c=function(){var e=$(Z().mark((function e(r){return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t.displayName===o){e.next=4;break}return e.next=4,Y_(wN.currentUser,{displayName:o});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,zP.jsxs)("div",{className:"container",children:[(0,zP.jsxs)("form",{onSubmit:c,className:"profileForm",children:[(0,zP.jsx)("input",{onChange:function(e){var t=e.target.value;u(t)},type:"text",autoFocus:!0,placeholder:"Display name",value:o,className:"formInput"}),(0,zP.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),(0,zP.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:function(){wN.signOut(),i("/")},children:"Log Out"})]})},dO=function(e){var t=e.refreshUser,n=e.isLoggedIn,r=e.userObj;return(0,zP.jsxs)(Q,{children:[n&&(0,zP.jsx)(fO,{userObj:r}),(0,zP.jsx)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:(0,zP.jsx)(E,{children:n?(0,zP.jsxs)(zP.Fragment,{children:[(0,zP.jsx)(x,{path:"/",element:(0,zP.jsx)(lO,{userObj:r})}),(0,zP.jsx)(x,{path:"/profile",element:(0,zP.jsx)(hO,{userObj:r,refreshUser:t})})]}):(0,zP.jsxs)(zP.Fragment,{children:[(0,zP.jsx)(x,{path:"/",element:(0,zP.jsx)(WP,{})}),(0,zP.jsx)(x,{path:"*",element:(0,zP.jsx)(_,{replace:!0,to:"/"})})]})})})]})};var pO=function(){var e=s((0,r.useState)(!1),2),t=e[0],n=e[1],i=s((0,r.useState)(!1),2),a=i[0],o=i[1],u=s((0,r.useState)(""),2),c=u[0],l=u[1];return(0,r.useEffect)((function(){wN.onAuthStateChanged((function(e){if(e){if(o(!0),l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return Y_(e,{displayName:e.displayName})}}),null===c.displayName){var t=e.email.split("@")[0];e.displayName=t}}else o(!1);n(!0)}))}),[]),(0,zP.jsx)(zP.Fragment,{children:t?(0,zP.jsx)(dO,{refreshUser:function(){var e=wN.currentUser;l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return Y_(e,{displayName:e.displayName})}})},isLoggedIn:a,userObj:c}):"Initializing...."})};i.render((0,zP.jsx)(r.StrictMode,{children:(0,zP.jsx)(pO,{})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.0239404d.js.map